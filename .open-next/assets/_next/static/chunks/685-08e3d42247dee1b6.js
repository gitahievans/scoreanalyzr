(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[685],{965:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(40157).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},2419:t=>{t.exports=function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},4582:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(40157).A)("FileMusic",[["path",{d:"M10.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v8.4",key:"1d3kfm"}],["path",{d:"M8 18v-7.7L16 9v7",key:"1oie6o"}],["circle",{cx:"14",cy:"16",r:"2",key:"1bzzi3"}],["circle",{cx:"6",cy:"18",r:"2",key:"1fncim"}]])},4727:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Track=void 0;var i=n(11309),r=n(25965),s=n(78506),o=n(23597),a=n(71957),l=n(87812),u=new WeakMap;e.Track=function(){function t(t,e){var n=this;if(this.name="",this.notes=[],this.controlChanges=(0,s.createControlChanges)(),this.pitchBends=[],u.set(this,e),t){var i=t.find(function(t){return"trackName"===t.type});this.name=i?i.text:""}if(this.instrument=new a.Instrument(t,this),this.channel=0,t){for(var r=t.filter(function(t){return"noteOn"===t.type}),o=t.filter(function(t){return"noteOff"===t.type}),l=this;r.length;)!function(){var t=r.shift();l.channel=t.channel;var e=o.findIndex(function(e){return e.noteNumber===t.noteNumber&&e.absoluteTime>=t.absoluteTime});if(-1!==e){var n=o.splice(e,1)[0];l.addNote({durationTicks:n.absoluteTime-t.absoluteTime,midi:t.noteNumber,noteOffVelocity:n.velocity/127,ticks:t.absoluteTime,velocity:t.velocity/127})}}();t.filter(function(t){return"controller"===t.type}).forEach(function(t){n.addCC({number:t.controllerType,ticks:t.absoluteTime,value:t.value/127})}),t.filter(function(t){return"pitchBend"===t.type}).forEach(function(t){n.addPitchBend({ticks:t.absoluteTime,value:t.value/8192})});var h=t.find(function(t){return"endOfTrack"===t.type});this.endOfTrackTicks=void 0!==h?h.absoluteTime:void 0}}return t.prototype.addNote=function(t){var e=u.get(this),n=new l.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},e);return Object.assign(n,t),(0,i.insert)(this.notes,n,"ticks"),this},t.prototype.addCC=function(t){var e=u.get(this),n=new r.ControlChange({controllerType:t.number},e);return delete t.number,Object.assign(n,t),Array.isArray(this.controlChanges[n.number])||(this.controlChanges[n.number]=[]),(0,i.insert)(this.controlChanges[n.number],n,"ticks"),this},t.prototype.addPitchBend=function(t){var e=u.get(this),n=new o.PitchBend({},e);return Object.assign(n,t),(0,i.insert)(this.pitchBends,n,"ticks"),this},Object.defineProperty(t.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,e=0;e<this.notes.length-1;e++){var n=this.notes[e].time+this.notes[e].duration;t<n&&(t=n)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,e=0;e<this.notes.length-1;e++){var n=this.notes[e].ticks+this.notes[e].durationTicks;t<n&&(t=n)}return t},enumerable:!1,configurable:!0}),t.prototype.fromJSON=function(t){var e=this;for(var n in this.name=t.name,this.channel=t.channel,this.instrument=new a.Instrument(void 0,this),this.instrument.fromJSON(t.instrument),void 0!==t.endOfTrackTicks&&(this.endOfTrackTicks=t.endOfTrackTicks),t.controlChanges)t.controlChanges[n]&&t.controlChanges[n].forEach(function(t){e.addCC({number:t.number,ticks:t.ticks,value:t.value})});t.notes.forEach(function(t){e.addNote({durationTicks:t.durationTicks,midi:t.midi,ticks:t.ticks,velocity:t.velocity})})},t.prototype.toJSON=function(){for(var t={},e=0;e<127;e++)this.controlChanges.hasOwnProperty(e)&&(t[e]=this.controlChanges[e].map(function(t){return t.toJSON()}));var n={channel:this.channel,controlChanges:t,pitchBends:this.pitchBends.map(function(t){return t.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(t){return t.toJSON()})};return void 0!==this.endOfTrackTicks&&(n.endOfTrackTicks=this.endOfTrackTicks),n},t}()},7610:(t,e)=>{e.read=function(t,e,n,i,r){var s,o,a=8*r-i-1,l=(1<<a)-1,u=l>>1,h=-7,c=n?r-1:0,p=n?-1:1,d=t[e+c];for(c+=p,s=d&(1<<-h)-1,d>>=-h,h+=a;h>0;s=256*s+t[e+c],c+=p,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=i;h>0;o=256*o+t[e+c],c+=p,h-=8);if(0===s)s=1-u;else{if(s===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,i),s-=u}return(d?-1:1)*o*Math.pow(2,s-i)},e.write=function(t,e,n,i,r,s){var o,a,l,u=8*s-r-1,h=(1<<u)-1,c=h>>1,p=5960464477539062e-23*(23===r),d=i?0:s-1,f=i?1:-1,m=+(e<0||0===e&&1/e<0);for(isNaN(e=Math.abs(e))||e===1/0?(a=+!!isNaN(e),o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+c>=1?e+=p/l:e+=p*Math.pow(2,1-c),e*l>=2&&(o++,l/=2),o+c>=h?(a=0,o=h):o+c>=1?(a=(e*l-1)*Math.pow(2,r),o+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,r),o=0));r>=8;t[n+d]=255&a,d+=f,a/=256,r-=8);for(o=o<<r|a,u+=r;u>0;t[n+d]=255&o,d+=f,o/=256,u-=8);t[n+d-f]|=128*m}},9255:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(40157).A)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]])},11309:(t,e)=>{"use strict";function n(t,e,n){void 0===n&&(n="ticks");var i=0,r=t.length,s=r;if(r>0&&t[r-1][n]<=e)return r-1;for(;i<s;){var o=Math.floor(i+(s-i)/2),a=t[o],l=t[o+1];if(a[n]===e){for(var u=o;u<t.length;u++)t[u][n]===e&&(o=u);return o}if(a[n]<e&&l[n]>e)return o;a[n]>e?s=o:a[n]<e&&(i=o+1)}return -1}Object.defineProperty(e,"__esModule",{value:!0}),e.insert=e.search=void 0,e.search=n,e.insert=function(t,e,i){if(void 0===i&&(i="ticks"),t.length){var r=n(t,e[i],i);t.splice(r+1,0,e)}else t.push(e)}},13437:(t,e,n)=>{"use strict";function i(t){var e=[];return function t(e,n){for(var i=0;i<e.length;i++){var r=e[i];Array.isArray(r)?t(r,n):n.push(r)}}(t,e),e}n.r(e),n.d(e,{flatten:()=>i})},16809:(t,e,n)=>{"use strict";n.d(e,{UC:()=>tu,B8:()=>ta,bL:()=>to,l9:()=>tl});var i,r=n(12115),s=n.t(r,2);function o(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),!1===n||!i.defaultPrevented)return e?.(i)}}var a=n(95155);function l(t,e=[]){let n=[],i=()=>{let e=n.map(t=>r.createContext(t));return function(n){let i=n?.[t]||e;return r.useMemo(()=>({[`__scope${t}`]:{...n,[t]:i}}),[n,i])}};return i.scopeName=t,[function(e,i){let s=r.createContext(i),o=n.length;n=[...n,i];let l=e=>{let{scope:n,children:i,...l}=e,u=n?.[t]?.[o]||s,h=r.useMemo(()=>l,Object.values(l));return(0,a.jsx)(u.Provider,{value:h,children:i})};return l.displayName=e+"Provider",[l,function(n,a){let l=a?.[t]?.[o]||s,u=r.useContext(l);if(u)return u;if(void 0!==i)return i;throw Error(`\`${n}\` must be used within \`${e}\``)}]},function(...t){let e=t[0];if(1===t.length)return e;let n=()=>{let n=t.map(t=>({useScope:t(),scopeName:t.scopeName}));return function(t){let i=n.reduce((e,{useScope:n,scopeName:i})=>{let r=n(t)[`__scope${i}`];return{...e,...r}},{});return r.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}(i,...e)]}function u(t,e,n){if(!e.has(t))throw TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function h(t,e){var n=u(t,e,"get");return n.get?n.get.call(t):n.value}function c(t,e,n){var i=u(t,e,"set");return!function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=n}}(t,i,n),n}var p=n(6101),d=n(99708),f=new WeakMap;function m(t,e){if("at"in Array.prototype)return Array.prototype.at.call(t,e);let n=function(t,e){let n=t.length,i=g(e),r=i>=0?i:n+i;return r<0||r>=n?-1:r}(t,e);return -1===n?void 0:t[n]}function g(t){return t!=t||0===t?0:Math.trunc(t)}i=new WeakMap;var v=globalThis?.document?r.useLayoutEffect:()=>{},y=s[" useId ".trim().toString()]||(()=>void 0),b=0;function w(t){let[e,n]=r.useState(y());return v(()=>{t||n(t=>t??String(b++))},[t]),t||(e?`radix-${e}`:"")}var T=n(63655),x=s[" useInsertionEffect ".trim().toString()]||v;function k({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){let[s,o,a]=function({defaultProp:t,onChange:e}){let[n,i]=r.useState(t),s=r.useRef(n),o=r.useRef(e);return x(()=>{o.current=e},[e]),r.useEffect(()=>{s.current!==n&&(o.current?.(n),s.current=n)},[n,s]),[n,i,o]}({defaultProp:e,onChange:n}),l=void 0!==t,u=l?t:s;{let e=r.useRef(void 0!==t);r.useEffect(()=>{let t=e.current;if(t!==l){let e=l?"controlled":"uncontrolled";console.warn(`${i} is changing from ${t?"controlled":"uncontrolled"} to ${e}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}e.current=l},[l,i])}return[u,r.useCallback(e=>{if(l){let n="function"==typeof e?e(t):e;n!==t&&a.current?.(n)}else o(e)},[l,t,o,a])]}Symbol("RADIX:SYNC_STATE");var C=r.createContext(void 0);function A(t){let e=r.useContext(C);return t||e||"ltr"}var S="rovingFocusGroup.onEntryFocus",O={bubbles:!1,cancelable:!0},I="RovingFocusGroup",[M,E,R]=function(t){let e=t+"CollectionProvider",[n,i]=l(e),[s,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),u=t=>{let{scope:e,children:n}=t,i=r.useRef(null),o=r.useRef(new Map).current;return(0,a.jsx)(s,{scope:e,itemMap:o,collectionRef:i,children:n})};u.displayName=e;let h=t+"CollectionSlot",c=(0,d.TL)(h),f=r.forwardRef((t,e)=>{let{scope:n,children:i}=t,r=o(h,n),s=(0,p.s)(e,r.collectionRef);return(0,a.jsx)(c,{ref:s,children:i})});f.displayName=h;let m=t+"CollectionItemSlot",g="data-radix-collection-item",v=(0,d.TL)(m),y=r.forwardRef((t,e)=>{let{scope:n,children:i,...s}=t,l=r.useRef(null),u=(0,p.s)(e,l),h=o(m,n);return r.useEffect(()=>(h.itemMap.set(l,{ref:l,...s}),()=>void h.itemMap.delete(l))),(0,a.jsx)(v,{[g]:"",ref:u,children:i})});return y.displayName=m,[{Provider:u,Slot:f,ItemSlot:y},function(e){let n=o(t+"CollectionConsumer",e);return r.useCallback(()=>{let t=n.collectionRef.current;if(!t)return[];let e=Array.from(t.querySelectorAll("[".concat(g,"]")));return Array.from(n.itemMap.values()).sort((t,n)=>e.indexOf(t.ref.current)-e.indexOf(n.ref.current))},[n.collectionRef,n.itemMap])},i]}(I),[D,N]=l(I,[R]),[P,V]=D(I),U=r.forwardRef((t,e)=>(0,a.jsx)(M.Provider,{scope:t.__scopeRovingFocusGroup,children:(0,a.jsx)(M.Slot,{scope:t.__scopeRovingFocusGroup,children:(0,a.jsx)(F,{...t,ref:e})})}));U.displayName=I;var F=r.forwardRef((t,e)=>{let{__scopeRovingFocusGroup:n,orientation:i,loop:s=!1,dir:l,currentTabStopId:u,defaultCurrentTabStopId:h,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...m}=t,g=r.useRef(null),v=(0,p.s)(e,g),y=A(l),[b,w]=k({prop:u,defaultProp:null!=h?h:null,onChange:c,caller:I}),[x,C]=r.useState(!1),M=function(t){let e=r.useRef(t);return r.useEffect(()=>{e.current=t}),r.useMemo(()=>(...t)=>e.current?.(...t),[])}(d),R=E(n),D=r.useRef(!1),[N,V]=r.useState(0);return r.useEffect(()=>{let t=g.current;if(t)return t.addEventListener(S,M),()=>t.removeEventListener(S,M)},[M]),(0,a.jsx)(P,{scope:n,orientation:i,dir:y,loop:s,currentTabStopId:b,onItemFocus:r.useCallback(t=>w(t),[w]),onItemShiftTab:r.useCallback(()=>C(!0),[]),onFocusableItemAdd:r.useCallback(()=>V(t=>t+1),[]),onFocusableItemRemove:r.useCallback(()=>V(t=>t-1),[]),children:(0,a.jsx)(T.sG.div,{tabIndex:x||0===N?-1:0,"data-orientation":i,...m,ref:v,style:{outline:"none",...t.style},onMouseDown:o(t.onMouseDown,()=>{D.current=!0}),onFocus:o(t.onFocus,t=>{let e=!D.current;if(t.target===t.currentTarget&&e&&!x){let e=new CustomEvent(S,O);if(t.currentTarget.dispatchEvent(e),!e.defaultPrevented){let t=R().filter(t=>t.focusable);L([t.find(t=>t.active),t.find(t=>t.id===b),...t].filter(Boolean).map(t=>t.ref.current),f)}}D.current=!1}),onBlur:o(t.onBlur,()=>C(!1))})})}),q="RovingFocusGroupItem",B=r.forwardRef((t,e)=>{let{__scopeRovingFocusGroup:n,focusable:i=!0,active:s=!1,tabStopId:l,children:u,...h}=t,c=w(),p=l||c,d=V(q,n),f=d.currentTabStopId===p,m=E(n),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:y}=d;return r.useEffect(()=>{if(i)return g(),()=>v()},[i,g,v]),(0,a.jsx)(M.ItemSlot,{scope:n,id:p,focusable:i,active:s,children:(0,a.jsx)(T.sG.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...h,ref:e,onMouseDown:o(t.onMouseDown,t=>{i?d.onItemFocus(p):t.preventDefault()}),onFocus:o(t.onFocus,()=>d.onItemFocus(p)),onKeyDown:o(t.onKeyDown,t=>{if("Tab"===t.key&&t.shiftKey){d.onItemShiftTab();return}if(t.target!==t.currentTarget)return;let e=function(t,e,n){var i;let r=(i=t.key,"rtl"!==n?i:"ArrowLeft"===i?"ArrowRight":"ArrowRight"===i?"ArrowLeft":i);if(!("vertical"===e&&["ArrowLeft","ArrowRight"].includes(r))&&!("horizontal"===e&&["ArrowUp","ArrowDown"].includes(r)))return j[r]}(t,d.orientation,d.dir);if(void 0!==e){if(t.metaKey||t.ctrlKey||t.altKey||t.shiftKey)return;t.preventDefault();let n=m().filter(t=>t.focusable).map(t=>t.ref.current);if("last"===e)n.reverse();else if("prev"===e||"next"===e){"prev"===e&&n.reverse();let i=n.indexOf(t.currentTarget);n=d.loop?function(t,e){return t.map((n,i)=>t[(e+i)%t.length])}(n,i+1):n.slice(i+1)}setTimeout(()=>L(n))}}),children:"function"==typeof u?u({isCurrentTabStop:f,hasTabStop:null!=y}):u})})});B.displayName=q;var j={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function L(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.activeElement;for(let i of t)if(i===n||(i.focus({preventScroll:e}),document.activeElement!==n))return}var W=t=>{let{present:e,children:n}=t,i=function(t){var e,n;let[i,s]=r.useState(),o=r.useRef(null),a=r.useRef(t),l=r.useRef("none"),[u,h]=(e=t?"mounted":"unmounted",n={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},r.useReducer((t,e)=>{let i=n[t][e];return null!=i?i:t},e));return r.useEffect(()=>{let t=z(o.current);l.current="mounted"===u?t:"none"},[u]),v(()=>{let e=o.current,n=a.current;if(n!==t){let i=l.current,r=z(e);t?h("MOUNT"):"none"===r||(null==e?void 0:e.display)==="none"?h("UNMOUNT"):n&&i!==r?h("ANIMATION_OUT"):h("UNMOUNT"),a.current=t}},[t,h]),v(()=>{if(i){var t;let e;let n=null!==(t=i.ownerDocument.defaultView)&&void 0!==t?t:window,r=t=>{let r=z(o.current).includes(t.animationName);if(t.target===i&&r&&(h("ANIMATION_END"),!a.current)){let t=i.style.animationFillMode;i.style.animationFillMode="forwards",e=n.setTimeout(()=>{"forwards"===i.style.animationFillMode&&(i.style.animationFillMode=t)})}},s=t=>{t.target===i&&(l.current=z(o.current))};return i.addEventListener("animationstart",s),i.addEventListener("animationcancel",r),i.addEventListener("animationend",r),()=>{n.clearTimeout(e),i.removeEventListener("animationstart",s),i.removeEventListener("animationcancel",r),i.removeEventListener("animationend",r)}}h("ANIMATION_END")},[i,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:r.useCallback(t=>{o.current=t?getComputedStyle(t):null,s(t)},[])}}(e),s="function"==typeof n?n({present:i.isPresent}):r.Children.only(n),o=(0,p.s)(i.ref,function(t){var e,n;let i=null===(e=Object.getOwnPropertyDescriptor(t.props,"ref"))||void 0===e?void 0:e.get,r=i&&"isReactWarning"in i&&i.isReactWarning;return r?t.ref:(r=(i=null===(n=Object.getOwnPropertyDescriptor(t,"ref"))||void 0===n?void 0:n.get)&&"isReactWarning"in i&&i.isReactWarning)?t.props.ref:t.props.ref||t.ref}(s));return"function"==typeof n||i.isPresent?r.cloneElement(s,{ref:o}):null};function z(t){return(null==t?void 0:t.animationName)||"none"}W.displayName="Presence";var G="Tabs",[Q,H]=l(G,[N]),$=N(),[Y,X]=Q(G),Z=r.forwardRef((t,e)=>{let{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:l,activationMode:u="automatic",...h}=t,c=A(l),[p,d]=k({prop:i,onChange:r,defaultProp:null!=s?s:"",caller:G});return(0,a.jsx)(Y,{scope:n,baseId:w(),value:p,onValueChange:d,orientation:o,dir:c,activationMode:u,children:(0,a.jsx)(T.sG.div,{dir:c,"data-orientation":o,...h,ref:e})})});Z.displayName=G;var J="TabsList",K=r.forwardRef((t,e)=>{let{__scopeTabs:n,loop:i=!0,...r}=t,s=X(J,n),o=$(n);return(0,a.jsx)(U,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:(0,a.jsx)(T.sG.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:e})})});K.displayName=J;var tt="TabsTrigger",te=r.forwardRef((t,e)=>{let{__scopeTabs:n,value:i,disabled:r=!1,...s}=t,l=X(tt,n),u=$(n),h=tr(l.baseId,i),c=ts(l.baseId,i),p=i===l.value;return(0,a.jsx)(B,{asChild:!0,...u,focusable:!r,active:p,children:(0,a.jsx)(T.sG.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":c,"data-state":p?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:h,...s,ref:e,onMouseDown:o(t.onMouseDown,t=>{r||0!==t.button||!1!==t.ctrlKey?t.preventDefault():l.onValueChange(i)}),onKeyDown:o(t.onKeyDown,t=>{[" ","Enter"].includes(t.key)&&l.onValueChange(i)}),onFocus:o(t.onFocus,()=>{let t="manual"!==l.activationMode;p||r||!t||l.onValueChange(i)})})})});te.displayName=tt;var tn="TabsContent",ti=r.forwardRef((t,e)=>{let{__scopeTabs:n,value:i,forceMount:s,children:o,...l}=t,u=X(tn,n),h=tr(u.baseId,i),c=ts(u.baseId,i),p=i===u.value,d=r.useRef(p);return r.useEffect(()=>{let t=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(t)},[]),(0,a.jsx)(W,{present:s||p,children:n=>{let{present:i}=n;return(0,a.jsx)(T.sG.div,{"data-state":p?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!i,id:c,tabIndex:0,...l,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:i&&o})}})});function tr(t,e){return"".concat(t,"-trigger-").concat(e)}function ts(t,e){return"".concat(t,"-content-").concat(e)}ti.displayName=tn;var to=Z,ta=K,tl=te,tu=ti},16930:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrumKitByPatchID=e.InstrumentFamilyByID=e.instrumentByPatchID=void 0,e.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"],e.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"],e.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"}},17569:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(40157).A)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]])},23597:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PitchBend=void 0;var n=new WeakMap;e.PitchBend=function(){function t(t,e){n.set(this,e),this.ticks=t.absoluteTime,this.value=t.value}return Object.defineProperty(t.prototype,"time",{get:function(){return n.get(this).ticksToSeconds(this.ticks)},set:function(t){var e=n.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},t}()},25965:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ControlChange=e.controlChangeIds=e.controlChangeNames=void 0,e.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},e.controlChangeIds=Object.keys(e.controlChangeNames).reduce(function(t,n){return t[e.controlChangeNames[n]]=n,t},{});var n=new WeakMap,i=new WeakMap,r=function(){function t(t,e){n.set(this,e),i.set(this,t.controllerType),this.ticks=t.absoluteTime,this.value=t.value}return Object.defineProperty(t.prototype,"number",{get:function(){return i.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return e.controlChangeNames[this.number]?e.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return n.get(this).ticksToSeconds(this.ticks)},set:function(t){var e=n.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},t}();e.ControlChange=r},31550:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(40157).A)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},31951:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var i=(0,n(86467).A)("outline","photo","IconPhoto",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-3"}]])},32960:(t,e,n)=>{"use strict";n.d(e,{I:()=>O});var i=n(50920),r=n(7165),s=n(39853),o=n(25910),a=n(73504),l=n(52020),u=class extends o.Q{constructor(t,e){super(),this.options=e,this.#t=t,this.#e=null,this.#n=(0,a.T)(),this.options.experimental_prefetchInRender||this.#n.reject(Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#t;#i=void 0;#r=void 0;#s=void 0;#o;#a;#n;#e;#l;#u;#h;#c;#p;#d;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#i.addObserver(this),h(this.#i,this.options)?this.#m():this.updateResult(),this.#g())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return c(this.#i,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return c(this.#i,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#_(),this.#v(),this.#i.removeObserver(this)}setOptions(t){let e=this.options,n=this.#i;if(this.options=this.#t.defaultQueryOptions(t),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,l.Eh)(this.options.enabled,this.#i))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#y(),this.#i.setOptions(this.options),e._defaulted&&!(0,l.f8)(this.options,e)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#i,observer:this});let i=this.hasListeners();i&&p(this.#i,n,this.options,e)&&this.#m(),this.updateResult(),i&&(this.#i!==n||(0,l.Eh)(this.options.enabled,this.#i)!==(0,l.Eh)(e.enabled,this.#i)||(0,l.d2)(this.options.staleTime,this.#i)!==(0,l.d2)(e.staleTime,this.#i))&&this.#b();let r=this.#w();i&&(this.#i!==n||(0,l.Eh)(this.options.enabled,this.#i)!==(0,l.Eh)(e.enabled,this.#i)||r!==this.#d)&&this.#T(r)}getOptimisticResult(t){var e,n;let i=this.#t.getQueryCache().build(this.#t,t),r=this.createResult(i,t);return e=this,n=r,(0,l.f8)(e.getCurrentResult(),n)||(this.#s=r,this.#a=this.options,this.#o=this.#i.state),r}getCurrentResult(){return this.#s}trackResult(t,e){return new Proxy(t,{get:(t,n)=>(this.trackProp(n),e?.(n),Reflect.get(t,n))})}trackProp(t){this.#f.add(t)}getCurrentQuery(){return this.#i}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){let e=this.#t.defaultQueryOptions(t),n=this.#t.getQueryCache().build(this.#t,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#m({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#m(t){this.#y();let e=this.#i.fetch(this.options,t);return t?.throwOnError||(e=e.catch(l.lQ)),e}#b(){this.#_();let t=(0,l.d2)(this.options.staleTime,this.#i);if(l.S$||this.#s.isStale||!(0,l.gn)(t))return;let e=(0,l.j3)(this.#s.dataUpdatedAt,t);this.#c=setTimeout(()=>{this.#s.isStale||this.updateResult()},e+1)}#w(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#i):this.options.refetchInterval)??!1}#T(t){this.#v(),this.#d=t,!l.S$&&!1!==(0,l.Eh)(this.options.enabled,this.#i)&&(0,l.gn)(this.#d)&&0!==this.#d&&(this.#p=setInterval(()=>{(this.options.refetchIntervalInBackground||i.m.isFocused())&&this.#m()},this.#d))}#g(){this.#b(),this.#T(this.#w())}#_(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#v(){this.#p&&(clearInterval(this.#p),this.#p=void 0)}createResult(t,e){let n;let i=this.#i,r=this.options,o=this.#s,u=this.#o,c=this.#a,f=t!==i?t.state:this.#r,{state:m}=t,g={...m},v=!1;if(e._optimisticResults){let n=this.hasListeners(),o=!n&&h(t,e),a=n&&p(t,i,e,r);(o||a)&&(g={...g,...(0,s.k)(m.data,t.options)}),"isRestoring"===e._optimisticResults&&(g.fetchStatus="idle")}let{error:y,errorUpdatedAt:b,status:w}=g;n=g.data;let T=!1;if(void 0!==e.placeholderData&&void 0===n&&"pending"===w){let t;o?.isPlaceholderData&&e.placeholderData===c?.placeholderData?(t=o.data,T=!0):t="function"==typeof e.placeholderData?e.placeholderData(this.#h?.state.data,this.#h):e.placeholderData,void 0!==t&&(w="success",n=(0,l.pl)(o?.data,t,e),v=!0)}if(e.select&&void 0!==n&&!T){if(o&&n===u?.data&&e.select===this.#l)n=this.#u;else try{this.#l=e.select,n=e.select(n),n=(0,l.pl)(o?.data,n,e),this.#u=n,this.#e=null}catch(t){this.#e=t}}this.#e&&(y=this.#e,n=this.#u,b=Date.now(),w="error");let x="fetching"===g.fetchStatus,k="pending"===w,C="error"===w,A=k&&x,S=void 0!==n,O={status:w,fetchStatus:g.fetchStatus,isPending:k,isSuccess:"success"===w,isError:C,isInitialLoading:A,isLoading:A,data:n,dataUpdatedAt:g.dataUpdatedAt,error:y,errorUpdatedAt:b,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>f.dataUpdateCount||g.errorUpdateCount>f.errorUpdateCount,isFetching:x,isRefetching:x&&!k,isLoadingError:C&&!S,isPaused:"paused"===g.fetchStatus,isPlaceholderData:v,isRefetchError:C&&S,isStale:d(t,e),refetch:this.refetch,promise:this.#n};if(this.options.experimental_prefetchInRender){let e=t=>{"error"===O.status?t.reject(O.error):void 0!==O.data&&t.resolve(O.data)},n=()=>{e(this.#n=O.promise=(0,a.T)())},r=this.#n;switch(r.status){case"pending":t.queryHash===i.queryHash&&e(r);break;case"fulfilled":("error"===O.status||O.data!==r.value)&&n();break;case"rejected":("error"!==O.status||O.error!==r.reason)&&n()}}return O}updateResult(){let t=this.#s,e=this.createResult(this.#i,this.options);this.#o=this.#i.state,this.#a=this.options,void 0!==this.#o.data&&(this.#h=this.#i),!(0,l.f8)(e,t)&&(this.#s=e,this.#x({listeners:(()=>{if(!t)return!0;let{notifyOnChangeProps:e}=this.options,n="function"==typeof e?e():e;if("all"===n||!n&&!this.#f.size)return!0;let i=new Set(n??this.#f);return this.options.throwOnError&&i.add("error"),Object.keys(this.#s).some(e=>this.#s[e]!==t[e]&&i.has(e))})()}))}#y(){let t=this.#t.getQueryCache().build(this.#t,this.options);if(t===this.#i)return;let e=this.#i;this.#i=t,this.#r=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#g()}#x(t){r.jG.batch(()=>{t.listeners&&this.listeners.forEach(t=>{t(this.#s)}),this.#t.getQueryCache().notify({query:this.#i,type:"observerResultsUpdated"})})}};function h(t,e){return!1!==(0,l.Eh)(e.enabled,t)&&void 0===t.state.data&&("error"!==t.state.status||!1!==e.retryOnMount)||void 0!==t.state.data&&c(t,e,e.refetchOnMount)}function c(t,e,n){if(!1!==(0,l.Eh)(e.enabled,t)&&"static"!==(0,l.d2)(e.staleTime,t)){let i="function"==typeof n?n(t):n;return"always"===i||!1!==i&&d(t,e)}return!1}function p(t,e,n,i){return(t!==e||!1===(0,l.Eh)(i.enabled,t))&&(!n.suspense||"error"!==t.state.status)&&d(t,n)}function d(t,e){return!1!==(0,l.Eh)(e.enabled,t)&&t.isStaleByTime((0,l.d2)(e.staleTime,t))}var f=n(12115),m=n(26715);n(95155);var g=f.createContext(function(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}()),v=()=>f.useContext(g),y=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&!e.isReset()&&(t.retryOnMount=!1)},b=t=>{f.useEffect(()=>{t.clearReset()},[t])},w=t=>{let{result:e,errorResetBoundary:n,throwOnError:i,query:r,suspense:s}=t;return e.isError&&!n.isReset()&&!e.isFetching&&r&&(s&&void 0===e.data||(0,l.GU)(i,[e.error,r]))},T=f.createContext(!1),x=()=>f.useContext(T);T.Provider;var k=t=>{if(t.suspense){let e=t=>"static"===t?t:Math.max(t??1e3,1e3),n=t.staleTime;t.staleTime="function"==typeof n?(...t)=>e(n(...t)):e(n),"number"==typeof t.gcTime&&(t.gcTime=Math.max(t.gcTime,1e3))}},C=(t,e)=>t.isLoading&&t.isFetching&&!e,A=(t,e)=>t?.suspense&&e.isPending,S=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function O(t,e){return function(t,e,n){var i,s,o,a,u;let h=x(),c=v(),p=(0,m.jE)(n),d=p.defaultQueryOptions(t);null===(s=p.getDefaultOptions().queries)||void 0===s||null===(i=s._experimental_beforeQuery)||void 0===i||i.call(s,d),d._optimisticResults=h?"isRestoring":"optimistic",k(d),y(d,c),b(c);let g=!p.getQueryCache().get(d.queryHash),[T]=f.useState(()=>new e(p,d)),O=T.getOptimisticResult(d),I=!h&&!1!==t.subscribed;if(f.useSyncExternalStore(f.useCallback(t=>{let e=I?T.subscribe(r.jG.batchCalls(t)):l.lQ;return T.updateResult(),e},[T,I]),()=>T.getCurrentResult(),()=>T.getCurrentResult()),f.useEffect(()=>{T.setOptions(d)},[d,T]),A(d,O))throw S(d,T,c);if(w({result:O,errorResetBoundary:c,throwOnError:d.throwOnError,query:p.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw O.error;if(null===(a=p.getDefaultOptions().queries)||void 0===a||null===(o=a._experimental_afterQuery)||void 0===o||o.call(a,d,O),d.experimental_prefetchInRender&&!l.S$&&C(O,h)){let t=g?S(d,T,c):null===(u=p.getQueryCache().get(d.queryHash))||void 0===u?void 0:u.promise;null==t||t.catch(l.lQ).finally(()=>{T.updateResult()})}return d.notifyOnChangeProps?O:T.trackResult(O)}(t,u,e)}},34108:t=>{t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=s.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){u=!0,r=t}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw r}}return a}},t.exports.__esModule=!0,t.exports.default=t.exports},34514:(t,e,n)=>{var i=n(83539);t.exports=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=({}).toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},37648:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(40157).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},38919:(t,e,n)=>{var i=n(87382).default;t.exports=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},39249:(t,e,n)=>{"use strict";n.d(e,{Cg:()=>s,Cl:()=>i,Tt:()=>r,fX:()=>a,sH:()=>o});var i=function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function r(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function s(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}function o(t,e,n,i){return new(n||(n=Promise))(function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(o,a)}l((i=i.apply(t,e||[])).next())})}Object.create;function a(t,e,n){if(n||2==arguments.length)for(var i,r=0,s=e.length;r<s;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}Object.create,"function"==typeof SuppressedError&&SuppressedError},39853:(t,e,n)=>{"use strict";n.d(e,{X:()=>a,k:()=>l});var i=n(52020),r=n(7165),s=n(6784),o=n(57948),a=class extends o.k{#k;#C;#A;#t;#S;#O;#I;constructor(t){super(),this.#I=!1,this.#O=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#t=t.client,this.#A=this.#t.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#k=function(t){let e="function"==typeof t.initialData?t.initialData():t.initialData,n=void 0!==e,i=n?"function"==typeof t.initialDataUpdatedAt?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}(this.options),this.state=t.state??this.#k,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#S?.promise}setOptions(t){this.options={...this.#O,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#A.remove(this)}setData(t,e){let n=(0,i.pl)(this.state.data,t,this.options);return this.#M({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#M({type:"setState",state:t,setStateOptions:e})}cancel(t){let e=this.#S?.promise;return this.#S?.cancel(t),e?e.then(i.lQ).catch(i.lQ):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#k)}isActive(){return this.observers.some(t=>!1!==(0,i.Eh)(t.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===i.hT||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(t=>"static"===(0,i.d2)(t.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(t=0){return void 0===this.state.data||"static"!==t&&(!!this.state.isInvalidated||!(0,i.j3)(this.state.dataUpdatedAt,t))}onFocus(){let t=this.observers.find(t=>t.shouldFetchOnWindowFocus());t?.refetch({cancelRefetch:!1}),this.#S?.continue()}onOnline(){let t=this.observers.find(t=>t.shouldFetchOnReconnect());t?.refetch({cancelRefetch:!1}),this.#S?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#A.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#S&&(this.#I?this.#S.cancel({revert:!0}):this.#S.cancelRetry()),this.scheduleGc()),this.#A.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#M({type:"invalidate"})}fetch(t,e){if("idle"!==this.state.fetchStatus){if(void 0!==this.state.data&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#S)return this.#S.continueRetry(),this.#S.promise}if(t&&this.setOptions(t),!this.options.queryFn){let t=this.observers.find(t=>t.options.queryFn);t&&this.setOptions(t.options)}let n=new AbortController,r=t=>{Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(this.#I=!0,n.signal)})},o=()=>{let t=(0,i.ZM)(this.options,e),n=(()=>{let t={client:this.#t,queryKey:this.queryKey,meta:this.meta};return r(t),t})();return(this.#I=!1,this.options.persister)?this.options.persister(t,n,this):t(n)},a=(()=>{let t={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#t,state:this.state,fetchFn:o};return r(t),t})();this.options.behavior?.onFetch(a,this),this.#C=this.state,("idle"===this.state.fetchStatus||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#M({type:"fetch",meta:a.fetchOptions?.meta});let l=t=>{(0,s.wm)(t)&&t.silent||this.#M({type:"error",error:t}),(0,s.wm)(t)||(this.#A.config.onError?.(t,this),this.#A.config.onSettled?.(this.state.data,t,this)),this.scheduleGc()};return this.#S=(0,s.II)({initialPromise:e?.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:t=>{if(void 0===t){l(Error(`${this.queryHash} data is undefined`));return}try{this.setData(t)}catch(t){l(t);return}this.#A.config.onSuccess?.(t,this),this.#A.config.onSettled?.(t,this.state.error,this),this.scheduleGc()},onError:l,onFail:(t,e)=>{this.#M({type:"failed",failureCount:t,error:e})},onPause:()=>{this.#M({type:"pause"})},onContinue:()=>{this.#M({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}),this.#S.start()}#M(t){this.state=(e=>{switch(t.type){case"failed":return{...e,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...e,fetchStatus:"paused"};case"continue":return{...e,fetchStatus:"fetching"};case"fetch":return{...e,...l(e.data,this.options),fetchMeta:t.meta??null};case"success":return this.#C=void 0,{...e,data:t.data,dataUpdateCount:e.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":let n=t.error;if((0,s.wm)(n)&&n.revert&&this.#C)return{...this.#C,fetchStatus:"idle"};return{...e,error:n,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...e,isInvalidated:!0};case"setState":return{...e,...t.state}}})(this.state),r.jG.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#A.notify({query:this,type:"updated",action:t})})}};function l(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:(0,s.v_)(e.networkMode)?"fetching":"paused",...void 0===t&&{error:null,status:"pending"}}}},40157:(t,e,n)=>{"use strict";n.d(e,{A:()=>l});var i=n(12115);let r=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter((t,e,n)=>!!t&&""!==t.trim()&&n.indexOf(t)===e).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=(0,i.forwardRef)((t,e)=>{let{color:n="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:u="",children:h,iconNode:c,...p}=t;return(0,i.createElement)("svg",{ref:e,...o,width:r,height:r,stroke:n,strokeWidth:l?24*Number(a)/Number(r):a,className:s("lucide",u),...p},[...c.map(t=>{let[e,n]=t;return(0,i.createElement)(e,n)}),...Array.isArray(h)?h:[h]])}),l=(t,e)=>{let n=(0,i.forwardRef)((n,o)=>{let{className:l,...u}=n;return(0,i.createElement)(a,{ref:o,iconNode:e,className:s("lucide-".concat(r(t)),l),...u})});return n.displayName="".concat(t),n}},41077:function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(o,a)}l((i=i.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Header=e.Track=e.Midi=void 0;var s=n(74276),o=n(95141),a=n(4727),l=n(48250);e.Midi=function(){function t(t){var e=this,n=null;if(t){var i=t instanceof ArrayBuffer?new Uint8Array(t):t;(n=(0,s.parseMidi)(i)).tracks.forEach(function(t){var e=0;t.forEach(function(t){e+=t.deltaTime,t.absoluteTime=e})}),n.tracks=function(t){for(var e=[],n=0;n<t.length;n++)for(var i=e.length,r=new Map,s=Array(16).fill(0),o=0,a=t[n];o<a.length;o++){var l=a[o],u=i,h=l.channel;if(void 0!==h){"programChange"===l.type&&(s[h]=l.programNumber);var c=s[h],p="".concat(c," ").concat(h);r.has(p)?u=r.get(p):(u=i+r.size,r.set(p,u))}e[u]||e.push([]),e[u].push(l)}return e}(n.tracks)}this.header=new o.Header(n),this.tracks=[],t&&(this.tracks=n.tracks.map(function(t){return new a.Track(t,e.header)}),1===n.header.format&&0===this.tracks[0].duration&&this.tracks.shift())}return t.fromUrl=function(e){return i(this,void 0,void 0,function(){var n;return r(this,function(i){switch(i.label){case 0:return[4,fetch(e)];case 1:if(!(n=i.sent()).ok)return[3,3];return[4,n.arrayBuffer()];case 2:return[2,new t(i.sent())];case 3:throw Error("Could not load '".concat(e,"'"))}})})},Object.defineProperty(t.prototype,"name",{get:function(){return this.header.name},set:function(t){this.header.name=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){var t=this.tracks.map(function(t){return t.duration});return Math.max.apply(Math,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"durationTicks",{get:function(){var t=this.tracks.map(function(t){return t.durationTicks});return Math.max.apply(Math,t)},enumerable:!1,configurable:!0}),t.prototype.addTrack=function(){var t=new a.Track(void 0,this.header);return this.tracks.push(t),t},t.prototype.toArray=function(){return(0,l.encode)(this)},t.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(t){return t.toJSON()})}},t.prototype.fromJSON=function(t){var e=this;this.header=new o.Header,this.header.fromJSON(t.header),this.tracks=t.tracks.map(function(t){var n=new a.Track(void 0,e.header);return n.fromJSON(t),n})},t.prototype.clone=function(){var e=new t;return e.fromJSON(this.toJSON()),e},t}();var u=n(4727);Object.defineProperty(e,"Track",{enumerable:!0,get:function(){return u.Track}});var h=n(95141);Object.defineProperty(e,"Header",{enumerable:!0,get:function(){return h.Header}})},44134:(t,e,n)=>{"use strict";var i=n(57719),r=n(7610),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function o(t){if(t>0x7fffffff)throw RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,a.prototype),e}function a(t,e,n){if("number"==typeof t){if("string"==typeof e)throw TypeError('The "string" argument must be of type string. Received type number');return h(t)}return l(t,e,n)}function l(t,e,n){if("string"==typeof t)return function(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!a.isEncoding(e))throw TypeError("Unknown encoding: "+e);var n=0|f(t,e),i=o(n),r=i.write(t,e);return r!==n&&(i=i.slice(0,r)),i}(t,e);if(ArrayBuffer.isView(t))return function(t){if(M(t,Uint8Array)){var e=new Uint8Array(t);return p(e.buffer,e.byteOffset,e.byteLength)}return c(t)}(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(M(t,ArrayBuffer)||t&&M(t.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(M(t,SharedArrayBuffer)||t&&M(t.buffer,SharedArrayBuffer)))return p(t,e,n);if("number"==typeof t)throw TypeError('The "value" argument must not be of type number. Received type number');var i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return a.from(i,e,n);var r=function(t){if(a.isBuffer(t)){var e=0|d(t.length),n=o(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||function(t){return t!=t}(t.length)?o(0):c(t):"Buffer"===t.type&&Array.isArray(t.data)?c(t.data):void 0}(t);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return a.from(t[Symbol.toPrimitive]("string"),e,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw TypeError('"size" argument must be of type number');if(t<0)throw RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return u(t),o(t<0?0:0|d(t))}function c(t){for(var e=t.length<0?0:0|d(t.length),n=o(e),i=0;i<e;i+=1)n[i]=255&t[i];return n}function p(t,e,n){var i;if(e<0||t.byteLength<e)throw RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(i=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),a.prototype),i}function d(t){if(t>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|t}function f(t,e){if(a.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||M(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return S(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return O(t).length;default:if(r)return i?-1:S(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,n){var r,s,o,a=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(e>>>=0)))return"";for(t||(t="utf8");;)switch(t){case"hex":return function(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",s=e;s<n;++s)r+=E[t[s]];return r}(this,e,n);case"utf8":case"utf-8":return b(this,e,n);case"ascii":return function(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}(this,e,n);case"latin1":case"binary":return function(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}(this,e,n);case"base64":return r=this,s=e,o=n,0===s&&o===r.length?i.fromByteArray(r):i.fromByteArray(r.slice(s,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,n){for(var i=t.slice(e,n),r="",s=0;s<i.length-1;s+=2)r+=String.fromCharCode(i[s]+256*i[s+1]);return r}(this,e,n);default:if(a)throw TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),a=!0}}function g(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function v(t,e,n,i,r){var s;if(0===t.length)return -1;if("string"==typeof n?(i=n,n=0):n>0x7fffffff?n=0x7fffffff:n<-0x80000000&&(n=-0x80000000),(s=n*=1)!=s&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return -1;n=t.length-1}else if(n<0){if(!r)return -1;n=0}if("string"==typeof e&&(e=a.from(e,i)),a.isBuffer(e))return 0===e.length?-1:y(t,e,n,i,r);if("number"==typeof e)return(e&=255,"function"==typeof Uint8Array.prototype.indexOf)?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,i,r);throw TypeError("val must be string, number or Buffer")}function y(t,e,n,i,r){var s,o=1,a=t.length,l=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return -1;o=2,a/=2,l/=2,n/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(r){var h=-1;for(s=n;s<a;s++)if(u(t,s)===u(e,-1===h?0:s-h)){if(-1===h&&(h=s),s-h+1===l)return h*o}else -1!==h&&(s-=s-h),h=-1}else for(n+l>a&&(n=a-l),s=n;s>=0;s--){for(var c=!0,p=0;p<l;p++)if(u(t,s+p)!==u(e,p)){c=!1;break}if(c)return s}return -1}function b(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var s,o,a,l,u=t[r],h=null,c=u>239?4:u>223?3:u>191?2:1;if(r+c<=n)switch(c){case 1:u<128&&(h=u);break;case 2:(192&(s=t[r+1]))==128&&(l=(31&u)<<6|63&s)>127&&(h=l);break;case 3:s=t[r+1],o=t[r+2],(192&s)==128&&(192&o)==128&&(l=(15&u)<<12|(63&s)<<6|63&o)>2047&&(l<55296||l>57343)&&(h=l);break;case 4:s=t[r+1],o=t[r+2],a=t[r+3],(192&s)==128&&(192&o)==128&&(192&a)==128&&(l=(15&u)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&l<1114112&&(h=l)}null===h?(h=65533,c=1):h>65535&&(h-=65536,i.push(h>>>10&1023|55296),h=56320|1023&h),i.push(h),r+=c}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=4096));return n}(i)}function w(t,e,n){if(t%1!=0||t<0)throw RangeError("offset is not uint");if(t+e>n)throw RangeError("Trying to access beyond buffer length")}function T(t,e,n,i,r,s){if(!a.isBuffer(t))throw TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<s)throw RangeError('"value" argument is out of bounds');if(n+i>t.length)throw RangeError("Index out of range")}function x(t,e,n,i,r,s){if(n+i>t.length||n<0)throw RangeError("Index out of range")}function k(t,e,n,i,s){return e*=1,n>>>=0,s||x(t,e,n,4,34028234663852886e22,-34028234663852886e22),r.write(t,e,n,i,23,4),n+4}function C(t,e,n,i,s){return e*=1,n>>>=0,s||x(t,e,n,8,17976931348623157e292,-17976931348623157e292),r.write(t,e,n,i,52,8),n+8}e.hp=a,e.IS=50,a.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(t,e,n){return l(t,e,n)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(t,e,n){return(u(t),t<=0)?o(t):void 0!==e?"string"==typeof n?o(t).fill(e,n):o(t).fill(e):o(t)},a.allocUnsafe=function(t){return h(t)},a.allocUnsafeSlow=function(t){return h(t)},a.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==a.prototype},a.compare=function(t,e){if(M(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),M(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(t)||!a.isBuffer(e))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,i=e.length,r=0,s=Math.min(n,i);r<s;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:+(i<n)},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!Array.isArray(t))throw TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);if(void 0===e)for(n=0,e=0;n<t.length;++n)e+=t[n].length;var n,i=a.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var s=t[n];if(M(s,Uint8Array))r+s.length>i.length?a.from(s).copy(i,r):Uint8Array.prototype.set.call(i,s,r);else if(a.isBuffer(s))s.copy(i,r);else throw TypeError('"list" argument must be an Array of Buffers');r+=s.length}return i},a.byteLength=f,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},a.prototype.toString=function(){var t=this.length;return 0===t?"":0==arguments.length?b(this,0,t):m.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(t){if(!a.isBuffer(t))throw TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var t="",n=e.IS;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},s&&(a.prototype[s]=a.prototype.inspect),a.prototype.compare=function(t,e,n,i,r){if(M(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(t))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return -1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,r>>>=0,this===t)return 0;for(var s=r-i,o=n-e,l=Math.min(s,o),u=this.slice(i,r),h=t.slice(e,n),c=0;c<l;++c)if(u[c]!==h[c]){s=u[c],o=h[c];break}return s<o?-1:+(o<s)},a.prototype.includes=function(t,e,n){return -1!==this.indexOf(t,e,n)},a.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},a.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},a.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var r,s,o,a,l,u,h,c,p=this.length-e;if((void 0===n||n>p)&&(n=p),t.length>0&&(n<0||e<0)||e>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var d=!1;;)switch(i){case"hex":return function(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var s=e.length;i>s/2&&(i=s/2);for(var o=0;o<i;++o){var a,l=parseInt(e.substr(2*o,2),16);if((a=l)!=a)break;t[n+o]=l}return o}(this,t,e,n);case"utf8":case"utf-8":return r=e,s=n,I(S(t,this.length-r),this,r,s);case"ascii":case"latin1":case"binary":return o=e,a=n,I(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(t),this,o,a);case"base64":return l=e,u=n,I(O(t),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h=e,c=n,I(function(t,e){for(var n,i,r=[],s=0;s<t.length&&!((e-=2)<0);++s)i=(n=t.charCodeAt(s))>>8,r.push(n%256),r.push(i);return r}(t,this.length-h),this,h,c);default:if(d)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),d=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var i=this.subarray(t,e);return Object.setPrototypeOf(i,a.prototype),i},a.prototype.readUintLE=a.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||w(t,e,this.length);for(var i=this[t],r=1,s=0;++s<e&&(r*=256);)i+=this[t+s]*r;return i},a.prototype.readUintBE=a.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||w(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},a.prototype.readUint8=a.prototype.readUInt8=function(t,e){return t>>>=0,e||w(t,1,this.length),this[t]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(t,e){return t>>>=0,e||w(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(t,e){return t>>>=0,e||w(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(t,e){return t>>>=0,e||w(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+0x1000000*this[t+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(t,e){return t>>>=0,e||w(t,4,this.length),0x1000000*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||w(t,e,this.length);for(var i=this[t],r=1,s=0;++s<e&&(r*=256);)i+=this[t+s]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},a.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||w(t,e,this.length);for(var i=e,r=1,s=this[t+--i];i>0&&(r*=256);)s+=this[t+--i]*r;return s>=(r*=128)&&(s-=Math.pow(2,8*e)),s},a.prototype.readInt8=function(t,e){return(t>>>=0,e||w(t,1,this.length),128&this[t])?-((255-this[t]+1)*1):this[t]},a.prototype.readInt16LE=function(t,e){t>>>=0,e||w(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?0xffff0000|n:n},a.prototype.readInt16BE=function(t,e){t>>>=0,e||w(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?0xffff0000|n:n},a.prototype.readInt32LE=function(t,e){return t>>>=0,e||w(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return t>>>=0,e||w(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,e){return t>>>=0,e||w(t,4,this.length),r.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return t>>>=0,e||w(t,4,this.length),r.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return t>>>=0,e||w(t,8,this.length),r.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return t>>>=0,e||w(t,8,this.length),r.read(this,t,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(t,e,n,i){if(t*=1,e>>>=0,n>>>=0,!i){var r=Math.pow(2,8*n)-1;T(this,t,e,n,r,0)}var s=1,o=0;for(this[e]=255&t;++o<n&&(s*=256);)this[e+o]=t/s&255;return e+n},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(t,e,n,i){if(t*=1,e>>>=0,n>>>=0,!i){var r=Math.pow(2,8*n)-1;T(this,t,e,n,r,0)}var s=n-1,o=1;for(this[e+s]=255&t;--s>=0&&(o*=256);)this[e+s]=t/o&255;return e+n},a.prototype.writeUint8=a.prototype.writeUInt8=function(t,e,n){return t*=1,e>>>=0,n||T(this,t,e,1,255,0),this[e]=255&t,e+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(t,e,n){return t*=1,e>>>=0,n||T(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(t,e,n){return t*=1,e>>>=0,n||T(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(t,e,n){return t*=1,e>>>=0,n||T(this,t,e,4,0xffffffff,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(t,e,n){return t*=1,e>>>=0,n||T(this,t,e,4,0xffffffff,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeIntLE=function(t,e,n,i){if(t*=1,e>>>=0,!i){var r=Math.pow(2,8*n-1);T(this,t,e,n,r-1,-r)}var s=0,o=1,a=0;for(this[e]=255&t;++s<n&&(o*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},a.prototype.writeIntBE=function(t,e,n,i){if(t*=1,e>>>=0,!i){var r=Math.pow(2,8*n-1);T(this,t,e,n,r-1,-r)}var s=n-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},a.prototype.writeInt8=function(t,e,n){return t*=1,e>>>=0,n||T(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,n){return t*=1,e>>>=0,n||T(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeInt16BE=function(t,e,n){return t*=1,e>>>=0,n||T(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeInt32LE=function(t,e,n){return t*=1,e>>>=0,n||T(this,t,e,4,0x7fffffff,-0x80000000),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},a.prototype.writeInt32BE=function(t,e,n){return t*=1,e>>>=0,n||T(this,t,e,4,0x7fffffff,-0x80000000),t<0&&(t=0xffffffff+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeFloatLE=function(t,e,n){return k(this,t,e,!0,n)},a.prototype.writeFloatBE=function(t,e,n){return k(this,t,e,!1,n)},a.prototype.writeDoubleLE=function(t,e,n){return C(this,t,e,!0,n)},a.prototype.writeDoubleBE=function(t,e,n){return C(this,t,e,!1,n)},a.prototype.copy=function(t,e,n,i){if(!a.isBuffer(t))throw TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n||0===t.length||0===this.length)return 0;if(e<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r=i-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,i):Uint8Array.prototype.set.call(t,this.subarray(n,i),e),r},a.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!a.isEncoding(i))throw TypeError("Unknown encoding: "+i);if(1===t.length){var r,s=t.charCodeAt(0);("utf8"===i&&s<128||"latin1"===i)&&(t=s)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw RangeError("Out of range index");if(n<=e)return this;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(r=e;r<n;++r)this[r]=t;else{var o=a.isBuffer(t)?t:a.from(t,i),l=o.length;if(0===l)throw TypeError('The value "'+t+'" is invalid for argument "value"');for(r=0;r<n-e;++r)this[r+e]=o[r%l]}return this};var A=/[^+/0-9A-Za-z-_]/g;function S(t,e){e=e||1/0;for(var n,i=t.length,r=null,s=[],o=0;o<i;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!r){if(n>56319||o+1===i){(e-=3)>-1&&s.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(e-=3)>-1&&s.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return s}function O(t){return i.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(A,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function I(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length)&&!(r>=t.length);++r)e[r+n]=t[r];return r}function M(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}var E=function(){for(var t="0123456789abcdef",e=Array(256),n=0;n<16;++n)for(var i=16*n,r=0;r<16;++r)e[i+r]=t[n]+t[r];return e}()},45554:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(40157).A)("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]])},46045:(t,e,n)=>{var i=n(96346);function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},48250:function(t,e,n){"use strict";var i=this&&this.__spreadArray||function(t,e,n){if(n||2==arguments.length)for(var i,r=0,s=e.length;r<s;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.encode=void 0;var r=n(74276),s=n(95141),o=n(13437);e.encode=function(t){var e={header:{format:1,numTracks:t.tracks.length+1,ticksPerBeat:t.header.ppq},tracks:i([i(i(i(i([{absoluteTime:0,deltaTime:0,meta:!0,text:t.header.name,type:"trackName"}],t.header.keySignatures.map(function(t){var e;return e=s.keySignatureKeys.indexOf(t.key),{absoluteTime:t.ticks,deltaTime:0,key:e+7,meta:!0,scale:+("major"!==t.scale),type:"keySignature"}}),!0),t.header.meta.map(function(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,text:t.text,type:t.type}}),!0),t.header.tempos.map(function(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/t.bpm),type:"setTempo"}}),!0),t.header.timeSignatures.map(function(t){return{absoluteTime:t.ticks,deltaTime:0,denominator:t.timeSignature[1],meta:!0,metronome:24,numerator:t.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}),!0)],t.tracks.map(function(t){var e;return i(i(i([{absoluteTime:0,deltaTime:0,meta:!0,text:t.name,type:"trackName"},{absoluteTime:0,channel:t.channel,deltaTime:0,programNumber:t.instrument.number,type:"programChange"}],(0,o.flatten)(t.notes.map(function(e){var n;return n=t.channel,[{absoluteTime:e.ticks,channel:n,deltaTime:0,noteNumber:e.midi,type:"noteOn",velocity:Math.floor(127*e.velocity)},{absoluteTime:e.ticks+e.durationTicks,channel:n,deltaTime:0,noteNumber:e.midi,type:"noteOff",velocity:Math.floor(127*e.noteOffVelocity)}]})),!0),function(t){for(var e=[],n=0;n<127;n++)t.controlChanges.hasOwnProperty(n)&&t.controlChanges[n].forEach(function(n){var i;e.push((i=t.channel,{absoluteTime:n.ticks,channel:i,controllerType:n.number,deltaTime:0,type:"controller",value:Math.floor(127*n.value)}))});return e}(t),!0),(e=[],t.pitchBends.forEach(function(n){var i;e.push((i=t.channel,{absoluteTime:n.ticks,channel:i,deltaTime:0,type:"pitchBend",value:n.value}))}),e),!0)}),!0)};return e.tracks=e.tracks.map(function(t){t=t.sort(function(t,e){return t.absoluteTime-e.absoluteTime});var e=0;return t.forEach(function(t){t.deltaTime=t.absoluteTime-e,e=t.absoluteTime,delete t.absoluteTime}),t.push({deltaTime:0,meta:!0,type:"endOfTrack"}),t}),new Uint8Array((0,r.writeMidi)(e))}},49059:t=>{function e(t){this.buffer=t,this.bufferLen=this.buffer.length,this.pos=0}e.prototype.eof=function(){return this.pos>=this.bufferLen},e.prototype.readUInt8=function(){var t=this.buffer[this.pos];return this.pos+=1,t},e.prototype.readInt8=function(){var t=this.readUInt8();return 128&t?t-256:t},e.prototype.readUInt16=function(){return(this.readUInt8()<<8)+this.readUInt8()},e.prototype.readInt16=function(){var t=this.readUInt16();return 32768&t?t-65536:t},e.prototype.readUInt24=function(){return(this.readUInt8()<<16)+(this.readUInt8()<<8)+this.readUInt8()},e.prototype.readInt24=function(){var t=this.readUInt24();return 8388608&t?t-0x1000000:t},e.prototype.readUInt32=function(){return(this.readUInt8()<<24)+(this.readUInt8()<<16)+(this.readUInt8()<<8)+this.readUInt8()},e.prototype.readBytes=function(t){var e=this.buffer.slice(this.pos,this.pos+t);return this.pos+=t,e},e.prototype.readString=function(t){var e=this.readBytes(t);return String.fromCharCode.apply(null,e)},e.prototype.readVarInt=function(){for(var t=0;!this.eof();){var e=this.readUInt8();if(!(128&e))return t+e;t+=127&e,t<<=7}return t},e.prototype.readChunk=function(){var t=this.readString(4),e=this.readUInt32(),n=this.readBytes(e);return{id:t,length:e,data:n}},t.exports=function(t){var n,i,r,s=new e(t),o=s.readChunk();if("MThd"!=o.id)throw"Bad MIDI file.  Expected 'MHdr', got: '"+o.id+"'";for(var a=(i={format:(n=new e(o.data)).readUInt16(),numTracks:n.readUInt16()},32768&(r=n.readUInt16())?(i.framesPerSecond=256-(r>>8),i.ticksPerFrame=255&r):i.ticksPerBeat=r,i),l=[],u=0;!s.eof()&&u<a.numTracks;u++){var h=s.readChunk();if("MTrk"!=h.id)throw"Bad MIDI file.  Expected 'MTrk', got: '"+h.id+"'";var c=function(t){for(var n,i=new e(t),r=[];!i.eof();){var s=function(){var t={};t.deltaTime=i.readVarInt();var e=i.readUInt8();if((240&e)==240){if(255===e){t.meta=!0;var r=i.readUInt8(),s=i.readVarInt();switch(r){case 0:if(t.type="sequenceNumber",2!==s)throw"Expected length for sequenceNumber event is 2, got "+s;return t.number=i.readUInt16(),t;case 1:return t.type="text",t.text=i.readString(s),t;case 2:return t.type="copyrightNotice",t.text=i.readString(s),t;case 3:return t.type="trackName",t.text=i.readString(s),t;case 4:return t.type="instrumentName",t.text=i.readString(s),t;case 5:return t.type="lyrics",t.text=i.readString(s),t;case 6:return t.type="marker",t.text=i.readString(s),t;case 7:return t.type="cuePoint",t.text=i.readString(s),t;case 32:if(t.type="channelPrefix",1!=s)throw"Expected length for channelPrefix event is 1, got "+s;return t.channel=i.readUInt8(),t;case 33:if(t.type="portPrefix",1!=s)throw"Expected length for portPrefix event is 1, got "+s;return t.port=i.readUInt8(),t;case 47:if(t.type="endOfTrack",0!=s)throw"Expected length for endOfTrack event is 0, got "+s;return t;case 81:if(t.type="setTempo",3!=s)throw"Expected length for setTempo event is 3, got "+s;return t.microsecondsPerBeat=i.readUInt24(),t;case 84:if(t.type="smpteOffset",5!=s)throw"Expected length for smpteOffset event is 5, got "+s;var o=i.readUInt8();return t.frameRate=({0:24,32:25,64:29,96:30})[96&o],t.hour=31&o,t.min=i.readUInt8(),t.sec=i.readUInt8(),t.frame=i.readUInt8(),t.subFrame=i.readUInt8(),t;case 88:if(t.type="timeSignature",2!=s&&4!=s)throw"Expected length for timeSignature event is 4 or 2, got "+s;return t.numerator=i.readUInt8(),t.denominator=1<<i.readUInt8(),4===s?(t.metronome=i.readUInt8(),t.thirtyseconds=i.readUInt8()):(t.metronome=36,t.thirtyseconds=8),t;case 89:if(t.type="keySignature",2!=s)throw"Expected length for keySignature event is 2, got "+s;return t.key=i.readInt8(),t.scale=i.readUInt8(),t;case 127:return t.type="sequencerSpecific",t.data=i.readBytes(s),t;default:return t.type="unknownMeta",t.data=i.readBytes(s),t.metatypeByte=r,t}}else if(240==e){t.type="sysEx";var s=i.readVarInt();return t.data=i.readBytes(s),t}else if(247==e){t.type="endSysEx";var s=i.readVarInt();return t.data=i.readBytes(s),t}else throw"Unrecognised MIDI event type byte: "+e}else{if((128&e)==0){if(null===n)throw"Running status byte encountered before status byte";a=e,e=n,t.running=!0}else a=i.readUInt8(),n=e;var a,l=e>>4;switch(t.channel=15&e,l){case 8:return t.type="noteOff",t.noteNumber=a,t.velocity=i.readUInt8(),t;case 9:var u=i.readUInt8();return t.type=0===u?"noteOff":"noteOn",t.noteNumber=a,t.velocity=u,0===u&&(t.byte9=!0),t;case 10:return t.type="noteAftertouch",t.noteNumber=a,t.amount=i.readUInt8(),t;case 11:return t.type="controller",t.controllerType=a,t.value=i.readUInt8(),t;case 12:return t.type="programChange",t.programNumber=a,t;case 13:return t.type="channelAftertouch",t.amount=a,t;case 14:return t.type="pitchBend",t.value=a+(i.readUInt8()<<7)-8192,t;default:throw"Unrecognised MIDI event type: "+l}}}();r.push(s)}return r}(h.data);l.push(c)}return{header:a,tracks:l}}},53776:(t,e,n)=>{"use strict";n.d(e,{Divider:()=>f});var i=n(95155);n(12115);var r=n(56204),s=n(68918),o=n(71180),a=n(43664),l=n(53791),u=n(69604),h=n(36960),c={root:"m_3eebeb36",label:"m_9e365f20"};let p={orientation:"horizontal"},d=(0,s.createVarsResolver)((t,e)=>{let{color:n,variant:i,size:s}=e;return{root:{"--divider-color":n?(0,o.getThemeColor)(n,t):void 0,"--divider-border-style":i,"--divider-size":(0,r.getSize)(s,"divider-size")}}}),f=(0,h.factory)((t,e)=>{let n=(0,a.useProps)("Divider",p,t),{classNames:r,className:s,style:o,styles:h,unstyled:f,vars:m,color:g,orientation:v,label:y,labelPosition:b,mod:w,...T}=n,x=(0,l.useStyles)({name:"Divider",classes:c,props:n,className:s,style:o,classNames:r,styles:h,unstyled:f,vars:m,varsResolver:d});return(0,i.jsx)(u.Box,{ref:e,mod:[{orientation:v,"with-label":!!y},w],...x("root"),...T,role:"separator",children:y&&(0,i.jsx)(u.Box,{component:"span",mod:{position:b},...x("label"),children:y})})});f.classes=c,f.displayName="@mantine/core/Divider"},54947:t=>{t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},57719:(t,e)=>{"use strict";e.byteLength=function(t){var e=l(t),n=e[0],i=e[1];return(n+i)*3/4-i},e.toByteArray=function(t){var e,n,s=l(t),o=s[0],a=s[1],u=new r((o+a)*3/4-a),h=0,c=a>0?o-4:o;for(n=0;n<c;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[h++]=e>>16&255,u[h++]=e>>8&255,u[h++]=255&e;return 2===a&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[h++]=255&e),1===a&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[h++]=e>>8&255,u[h++]=255&e),u},e.fromByteArray=function(t){for(var e,i=t.length,r=i%3,s=[],o=0,a=i-r;o<a;o+=16383)s.push(function(t,e,i){for(var r,s=[],o=e;o<i;o+=3)r=(t[o]<<16&0xff0000)+(t[o+1]<<8&65280)+(255&t[o+2]),s.push(n[r>>18&63]+n[r>>12&63]+n[r>>6&63]+n[63&r]);return s.join("")}(t,o,o+16383>a?a:o+16383));return 1===r?s.push(n[(e=t[i-1])>>2]+n[e<<4&63]+"=="):2===r&&s.push(n[(e=(t[i-2]<<8)+t[i-1])>>10]+n[e>>4&63]+n[e<<2&63]+"="),s.join("")};for(var n=[],i=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=s.length;o<a;++o)n[o]=s[o],i[s.charCodeAt(o)]=o;function l(t){var e=t.length;if(e%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var i=n===e?0:4-n%4;return[n,i]}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},65593:(t,e,n)=>{var i=n(54947),r=n(34108),s=n(34514),o=n(87034);t.exports=function(t,e){return i(t)||r(t,e)||s(t,e)||o()},t.exports.__esModule=!0,t.exports.default=t.exports},68718:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(40157).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},71957:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Instrument=void 0;var i=n(16930),r=new WeakMap;e.Instrument=function(){function t(t,e){if(this.number=0,r.set(this,e),this.number=0,t){var n=t.find(function(t){return"programChange"===t.type});n&&(this.number=n.programNumber)}}return Object.defineProperty(t.prototype,"name",{get:function(){return this.percussion?i.DrumKitByPatchID[this.number]:i.instrumentByPatchID[this.number]},set:function(t){var e=i.instrumentByPatchID.indexOf(t);-1!==e&&(this.number=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"family",{get:function(){return this.percussion?"drums":i.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"percussion",{get:function(){return 9===r.get(this).channel},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},t.prototype.fromJSON=function(t){this.number=t.number},t}()},73158:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(40157).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},74250:function(t,e,n){var i,r,s,o,a,l,u,h,c,p,d,f,m,g,v,y,b,w,T,x,k,C,A,S;i=e,r=n(65593),s=n(2419),o=n(46045),a=function(t,e,n){return{endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}},l=function(t,e,n){return{endTime:e,insertTime:n,type:"linearRampToValue",value:t}},u=function(t,e){return{startTime:e,type:"setValue",value:t}},h=function(t,e,n){return{duration:n,startTime:e,type:"setValueCurve",values:t}},c=function(t,e,n){var i=n.startTime,r=n.target;return r+(e-r)*Math.exp((i-t)/n.timeConstant)},p=function(t){return"exponentialRampToValue"===t.type},d=function(t){return"linearRampToValue"===t.type},f=function(t){return p(t)||d(t)},m=function(t){return"setValue"===t.type},g=function(t){return"setValueCurve"===t.type},v=function(t,e,n,i){var r=t[e];return void 0===r?i:f(r)||m(r)?r.value:g(r)?r.values[r.values.length-1]:c(n,v(t,e-1,r.startTime,i),r)},y=function(t,e,n,i,r){return void 0===n?[i.insertTime,r]:f(n)?[n.endTime,n.value]:m(n)?[n.startTime,n.value]:g(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,v(t,e-1,n.startTime,r)]},b=function(t){return"cancelAndHold"===t.type},w=function(t){return"cancelScheduledValues"===t.type},T=function(t){return b(t)||w(t)?t.cancelTime:p(t)||d(t)?t.endTime:t.startTime},x=function(t,e,n,i){var r=i.endTime,s=i.value;return n===s?s:0<n&&0<s||n<0&&s<0?n*Math.pow(s/n,(t-e)/(r-e)):0},k=function(t,e,n,i){return n+(t-e)/(i.endTime-e)*(i.value-n)},C=function(t,e){var n=Math.floor(e),i=Math.ceil(e);return n===i?t[n]:(1-(e-n))*t[n]+(1-(i-e))*t[i]},A=function(t,e){var n=e.duration,i=e.startTime,r=e.values,s=(t-i)/n*(r.length-1);return C(r,s)},S=function(t){return"setTarget"===t.type},i.AutomationEventList=o(function t(e){s(this,t),this._automationEvents=[],this._currenTime=0,this._defaultValue=e},[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(t){var e=T(t);if(b(t)||w(t)){var n=this._automationEvents.findIndex(function(n){return w(t)&&g(n)?n.startTime+n.duration>=e:T(n)>=e}),i=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),b(t)){var r=this._automationEvents[this._automationEvents.length-1];if(void 0!==i&&f(i)){if(void 0!==r&&S(r))throw Error("The internal list is malformed.");var s=void 0===r?i.insertTime:g(r)?r.startTime+r.duration:T(r),o=void 0===r?this._defaultValue:g(r)?r.values[r.values.length-1]:r.value,c=p(i)?x(e,s,o,i):k(e,s,o,i),m=p(i)?a(c,e,this._currenTime):l(c,e,this._currenTime);this._automationEvents.push(m)}if(void 0!==r&&S(r)&&this._automationEvents.push(u(this.getValue(e),e)),void 0!==r&&g(r)&&r.startTime+r.duration>e){var v=e-r.startTime,y=(r.values.length-1)/r.duration,C=Math.max(2,1+Math.ceil(v*y)),A=v/(C-1)*y,O=r.values.slice(0,C);if(A<1)for(var I=1;I<C;I+=1){var M=A*I%1;O[I]=r.values[I-1]*(1-M)+r.values[I]*M}this._automationEvents[this._automationEvents.length-1]=h(O,r.startTime,v)}}}else{var E=this._automationEvents.findIndex(function(t){return T(t)>e}),R=-1===E?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[E-1];if(void 0!==R&&g(R)&&T(R)+R.duration>e)return!1;var D=p(t)?a(t.value,t.endTime,this._currenTime):d(t)?l(t.value,e,this._currenTime):t;if(-1===E)this._automationEvents.push(D);else{if(g(t)&&e+t.duration>T(this._automationEvents[E]))return!1;this._automationEvents.splice(E,0,D)}}return!0}},{key:"flush",value:function(t){var e=this._automationEvents.findIndex(function(e){return T(e)>t});if(e>1){var n=this._automationEvents.slice(e-1),i=n[0];S(i)&&n.unshift(u(v(this._automationEvents,e-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(t){if(0===this._automationEvents.length)return this._defaultValue;var e=this._automationEvents.findIndex(function(e){return T(e)>t}),n=this._automationEvents[e],i=(-1===e?this._automationEvents.length:e)-1,s=this._automationEvents[i];if(void 0!==s&&S(s)&&(void 0===n||!f(n)||n.insertTime>t))return c(t,v(this._automationEvents,i-1,s.startTime,this._defaultValue),s);if(void 0!==s&&m(s)&&(void 0===n||!f(n)))return s.value;if(void 0!==s&&g(s)&&(void 0===n||!f(n)||s.startTime+s.duration>t))return t<s.startTime+s.duration?A(t,s):s.values[s.values.length-1];if(void 0!==s&&f(s)&&(void 0===n||!f(n)))return s.value;if(void 0!==n&&p(n)){var o=r(y(this._automationEvents,i,s,n,this._defaultValue),2);return x(t,o[0],o[1],n)}if(void 0!==n&&d(n)){var a=r(y(this._automationEvents,i,s,n,this._defaultValue),2);return k(t,a[0],a[1],n)}return this._defaultValue}}]),i.createCancelAndHoldAutomationEvent=function(t){return{cancelTime:t,type:"cancelAndHold"}},i.createCancelScheduledValuesAutomationEvent=function(t){return{cancelTime:t,type:"cancelScheduledValues"}},i.createExponentialRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"exponentialRampToValue",value:t}},i.createLinearRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"linearRampToValue",value:t}},i.createSetTargetAutomationEvent=function(t,e,n){return{startTime:e,target:t,timeConstant:n,type:"setTarget"}},i.createSetValueAutomationEvent=u,i.createSetValueCurveAutomationEvent=h},74276:(t,e,n)=>{e.parseMidi=n(49059),e.writeMidi=n(92459)},74601:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(40157).A)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},78506:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createControlChanges=void 0;var i=n(25965);e.createControlChanges=function(){return new Proxy({},{get:function(t,e){return t[e]?t[e]:i.controlChangeIds.hasOwnProperty(e)?t[i.controlChangeIds[e]]:void 0},set:function(t,e,n){return i.controlChangeIds.hasOwnProperty(e)?t[i.controlChangeIds[e]]=n:t[e]=n,!0}})}},83539:t=>{t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i},t.exports.__esModule=!0,t.exports.default=t.exports},87034:t=>{t.exports=function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},87382:t=>{function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},87812:(t,e)=>{"use strict";function n(t){return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][t%12]}Object.defineProperty(e,"__esModule",{value:!0}),e.Note=void 0;var i=function(){var t=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(n){var i=t.exec(n),r=i[1],s=i[2];return e[r.toLowerCase()]+(parseInt(s,10)+1)*12}}(),r=new WeakMap;e.Note=function(){function t(t,e,n){r.set(this,n),this.midi=t.midi,this.velocity=t.velocity,this.noteOffVelocity=e.velocity,this.ticks=t.ticks,this.durationTicks=e.ticks-t.ticks}return Object.defineProperty(t.prototype,"name",{get:function(){var t,e;return e=Math.floor((t=this.midi)/12)-1,n(t)+e.toString()},set:function(t){this.midi=i(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(t){var e=t-this.octave;this.midi+=12*e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pitch",{get:function(){return n(this.midi)},set:function(t){this.midi=12*(this.octave+1)+["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"].indexOf(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){var t=r.get(this);return t.ticksToSeconds(this.ticks+this.durationTicks)-t.ticksToSeconds(this.ticks)},set:function(t){var e=r.get(this).secondsToTicks(this.time+t);this.durationTicks=e-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return r.get(this).ticksToSeconds(this.ticks)},set:function(t){var e=r.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bars",{get:function(){return r.get(this).ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},t}()},90588:(t,e,n)=>{"use strict";let i,r,s,o,a,l,u,h,c,p,d,f,m,g;n.d(e,{Bh:()=>r2,RG:()=>rJ,SD:()=>iX,oD:()=>r7,ni:()=>iZ});let v="15.1.22";var y,b,w,T=n(74250);let x=new WeakSet,k=new WeakMap,C=new WeakMap,A=new WeakMap,S=new WeakMap,O=new WeakMap,I=new WeakMap,M=new WeakMap,E=new WeakMap,R=new WeakMap,D={construct:()=>D},N=t=>{try{new new Proxy(t,D)}catch{return!1}return!0},P=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,V=(t,e)=>{let n=[],i=t.replace(/^[\s]+/,""),r=i.match(P);for(;null!==r;){let t=r[1].slice(1,-1),s=r[0].replace(/([\s]+)?;?$/,"").replace(t,new URL(t,e).toString());n.push(s),r=(i=i.slice(r[0].length).replace(/^[\s]+/,"")).match(P)}return[n.join(";"),i]},U=t=>{if(void 0!==t&&!Array.isArray(t))throw TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},F=t=>{if(!N(t))throw TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!=typeof t.prototype)throw TypeError("The given value for processorCtor should have a prototype.")},q=(t,e)=>{let n=t.get(e);if(void 0===n)throw Error("A value with the given key could not be found.");return n},B=(t,e)=>{let n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");let[i]=n;return t.delete(i),i},j=(t,e,n,i)=>{let r=q(t,e),s=B(r,t=>t[0]===n&&t[1]===i);return 0===r.size&&t.delete(e),s},L=t=>q(I,t),W=t=>{if(x.has(t))throw Error("The AudioNode is already stored.");x.add(t),L(t).forEach(t=>t(!0))},z=t=>"port"in t,G=t=>{if(!x.has(t))throw Error("The AudioNode is not stored.");x.delete(t),L(t).forEach(t=>t(!1))},Q=(t,e)=>{!z(t)&&e.every(t=>0===t.size)&&G(t)},H={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},$=(t,e)=>t.context===e,Y=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},X=()=>new DOMException("","IndexSizeError"),Z=t=>{let e;e=t.getChannelData,t.getChannelData=n=>{try{return e.call(t,n)}catch(t){if(12===t.code)throw X();throw t}}},J={numberOfChannels:1},K=t=>x.has(t),tt={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},te=t=>"playbackRate"in t,tn=t=>"frequency"in t&&"gain"in t,ti=t=>"offset"in t,tr=t=>!("frequency"in t)&&"gain"in t,ts=t=>"detune"in t&&"frequency"in t&&!("gain"in t),to=t=>"pan"in t,ta=t=>q(k,t),tl=t=>q(A,t),tu=(t,e)=>{let{activeInputs:n}=ta(t);for(let i of(n.forEach(n=>n.forEach(([n])=>{e.includes(t)||tu(n,[...e,t])})),te(t)?[t.playbackRate]:z(t)?Array.from(t.parameters.values()):tn(t)?[t.Q,t.detune,t.frequency,t.gain]:ti(t)?[t.offset]:tr(t)?[t.gain]:ts(t)?[t.detune,t.frequency]:to(t)?[t.pan]:[])){let t=tl(i);void 0!==t&&t.activeInputs.forEach(([t])=>tu(t,e))}K(t)&&G(t)},th=t=>{tu(t.destination,[])},tc=t=>void 0===t||"number"==typeof t||"string"==typeof t&&("balanced"===t||"interactive"===t||"playback"===t),tp=t=>"context"in t,td=t=>tp(t[0]),tf=(t,e,n,i)=>{for(let e of t)if(n(e)){if(i)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},tm=(t,e,[n,i],r)=>{tf(t,[e,n,i],t=>t[0]===e&&t[1]===n,r)},tg=(t,[e,n,i],r)=>{let s=t.get(e);void 0===s?t.set(e,new Set([[n,i]])):tf(s,[n,i],t=>t[0]===n,r)},t_=t=>"inputs"in t,tv=(t,e,n,i)=>{if(t_(e)){let r=e.inputs[i];return t.connect(r,n,0),[r,n,0]}return t.connect(e,n,i),[e,n,i]},ty=(t,e,n)=>{for(let i of t)if(i[0]===e&&i[1]===n)return t.delete(i),i;return null},tb=(t,e,n)=>B(t,t=>t[0]===e&&t[1]===n),tw=(t,e)=>{if(!L(t).delete(e))throw Error("Missing the expected event listener.")},tT=(t,e,n)=>{let i=q(t,e),r=B(i,t=>t[0]===n);return 0===i.size&&t.delete(e),r},tx=(t,e,n,i)=>{t_(e)?t.disconnect(e.inputs[i],n,0):t.disconnect(e,n,i)},tk=t=>q(C,t),tC=t=>q(S,t),tA=t=>M.has(t),tS=t=>!x.has(t),tO=(t,e)=>new Promise(n=>{if(null!==e)n(!0);else{let e=t.createScriptProcessor(256,1,1),i=t.createGain(),r=t.createBuffer(1,2,44100),s=r.getChannelData(0);s[0]=1,s[1]=1;let o=t.createBufferSource();o.buffer=r,o.loop=!0,o.connect(e).connect(t.destination),o.connect(i),o.disconnect(i),e.onaudioprocess=i=>{let r=i.inputBuffer.getChannelData(0);Array.prototype.some.call(r,t=>1===t)?n(!0):n(!1),o.stop(),e.onaudioprocess=null,o.disconnect(e),e.disconnect(t.destination)},o.start()}}),tI=(t,e)=>{let n=new Map;for(let e of t)for(let t of e){let e=n.get(t);n.set(t,void 0===e?1:e+1)}n.forEach((t,n)=>e(n,t))},tM=t=>"context"in t,tE=t=>{let e;let n=new Map;t.connect=(t=>(e,i=0,r=0)=>{let s=tM(e)?t(e,i,r):t(e,i),o=n.get(e);return void 0===o?n.set(e,[{input:r,output:i}]):o.every(t=>t.input!==r||t.output!==i)&&o.push({input:r,output:i}),s})(t.connect.bind(t)),e=t.disconnect,t.disconnect=(i,r,s)=>{if(e.apply(t),void 0===i)n.clear();else if("number"==typeof i)for(let[t,e]of n){let r=e.filter(t=>t.output!==i);0===r.length?n.delete(t):n.set(t,r)}else if(n.has(i)){if(void 0===r)n.delete(i);else{let t=n.get(i);if(void 0!==t){let e=t.filter(t=>t.output!==r&&(t.input!==s||void 0===s));0===e.length?n.delete(i):n.set(i,e)}}}for(let[e,i]of n)i.forEach(n=>{tM(e)?t.connect(e,n.output,n.input):t.connect(e,n.output)})}},tR=(t,e,n,i)=>{let{activeInputs:r,passiveInputs:s}=tl(e),{outputs:o}=ta(t),a=L(t),l=o=>{let a=tk(t),l=tC(e);if(o){let e=tT(s,t,n);tm(r,t,e,!1),i||tA(t)||a.connect(l,n)}else tg(s,tb(r,t,n),!1),i||tA(t)||a.disconnect(l,n)};return!!tf(o,[e,n],t=>t[0]===e&&t[1]===n,!0)&&(a.add(l),K(t)?tm(r,t,[n,l],!0):tg(s,[t,n,l],!0),!0)},tD=(t,e,n,i)=>{let{activeInputs:r,passiveInputs:s}=ta(e),o=ty(r[i],t,n);return null===o?[j(s,t,n,i)[2],!1]:[o[2],!0]},tN=(t,e,n)=>{let{activeInputs:i,passiveInputs:r}=tl(e),s=ty(i,t,n);return null===s?[tT(r,t,n)[1],!1]:[s[2],!0]},tP=(t,e,n,i,r)=>{let[s,o]=tD(t,n,i,r);if(null===s||(tw(t,s),!o||e||tA(t)||tx(tk(t),tk(n),i,r)),K(n)){let{activeInputs:t}=ta(n);Q(n,t)}},tV=(t,e,n,i)=>{let[r,s]=tN(t,n,i);null===r||(tw(t,r),!s||e||tA(t)||tk(t).disconnect(tC(n),i))},tU=(t,e)=>{let n=ta(t),i=[];for(let r of n.outputs)td(r)?tP(t,e,...r):tV(t,e,...r),i.push(r[0]);return n.outputs.clear(),i},tF=(t,e,n)=>{let i=ta(t),r=[];for(let s of i.outputs)s[1]===n&&(td(s)?tP(t,e,...s):tV(t,e,...s),r.push(s[0]),i.outputs.delete(s));return r},tq=(t,e,n,i,r)=>{let s=ta(t);return Array.from(s.outputs).filter(t=>t[0]===n&&(void 0===i||t[1]===i)&&(void 0===r||t[2]===r)).map(n=>(td(n)?tP(t,e,...n):tV(t,e,...n),s.outputs.delete(n),n[0]))};class tB{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((n,i)=>t.call(e,n,i,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}let tj={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function tL(t,e,n,i,r){if("function"==typeof t.copyFromChannel)0===e[n].byteLength&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],i,r);else{let s=t.getChannelData(i);if(0===e[n].byteLength)e[n]=s.slice(r,r+128);else{let t=new Float32Array(s.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(t)}}}let tW=(t,e,n,i,r)=>{"function"==typeof t.copyToChannel?0!==e[n].byteLength&&t.copyToChannel(e[n],i,r):0!==e[n].byteLength&&t.getChannelData(i).set(e[n],r)},tz=(t,e)=>{let n=[];for(let i=0;i<t;i+=1){let t=[],r="number"==typeof e?e:e[i];for(let e=0;e<r;e+=1)t.push(new Float32Array(128));n.push(t)}return n},tG=(t,e)=>{let n=q(R,t);return q(n,tk(e))},tQ=async(t,e,n,i,r,s,o)=>{let a=null===e?128*Math.ceil(t.context.length/128):e.length,l=i.channelCount*i.numberOfInputs,u=r.reduce((t,e)=>t+e,0),h=0===u?null:n.createBuffer(u,a,n.sampleRate);if(void 0===s)throw Error("Missing the processor constructor.");let c=ta(t),p=await tG(n,t),d=tz(i.numberOfInputs,i.channelCount),f=tz(i.numberOfOutputs,r),m=Array.from(t.parameters.keys()).reduce((t,e)=>({...t,[e]:new Float32Array(128)}),{});for(let u=0;u<a;u+=128){if(i.numberOfInputs>0&&null!==e)for(let t=0;t<i.numberOfInputs;t+=1)for(let n=0;n<i.channelCount;n+=1)tL(e,d[t],n,n,u);void 0!==s.parameterDescriptors&&null!==e&&s.parameterDescriptors.forEach(({name:t},n)=>{tL(e,m,t,l+n,u)});for(let t=0;t<i.numberOfInputs;t+=1)for(let e=0;e<r[t];e+=1)0===f[t][e].byteLength&&(f[t][e]=new Float32Array(128));try{let t=d.map((t,e)=>0===c.activeInputs[e].size?[]:t),e=o(u/n.sampleRate,n.sampleRate,()=>p.process(t,f,m));if(null!==h)for(let t=0,e=0;t<i.numberOfOutputs;t+=1){for(let n=0;n<r[t];n+=1)tW(h,f[t],n,e+n,u);e+=r[t]}if(!e)break}catch(e){t.dispatchEvent(new ErrorEvent("processorerror",{colno:e.colno,filename:e.filename,lineno:e.lineno,message:e.message}));break}}return h},tH={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},t$={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},tY={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},tX={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},tZ={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},tJ=t=>{let{port1:e,port2:n}=new MessageChannel;return new Promise(i=>{let r=()=>{n.onmessage=null,e.close(),n.close(),i()};n.onmessage=()=>r();try{e.postMessage(t,[t])}catch{}finally{r()}})},tK={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},t0=t=>"delayTime"in t,t1=(t,e,n)=>{let i=e[n];if(void 0===i)throw t();return i},t2={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},t8={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},t3=()=>new DOMException("","InvalidStateError"),t5=()=>new DOMException("","InvalidAccessError"),t6=t=>{let e;e=t.getFrequencyResponse,t.getFrequencyResponse=(n,i,r)=>{if(n.length!==i.length||i.length!==r.length)throw t5();return e.call(t,n,i,r)}},t4={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},t7=(t,e,n,i,r,s,o,a,l,u,h)=>{let c=u.length,p=a;for(let a=0;a<c;a+=1){let c=n[0]*u[a];for(let e=1;e<r;e+=1){let i=p-e&l-1;c+=n[e]*s[i],c-=t[e]*o[i]}for(let t=r;t<i;t+=1)c+=n[t]*s[p-t&l-1];for(let n=r;n<e;n+=1)c-=t[n]*o[p-n&l-1];s[p]=u[a],o[p]=c,p=p+1&l-1,h[a]=c}return p},t9=(t,e,n,i)=>{let r=n instanceof Float64Array?n:new Float64Array(n),s=i instanceof Float64Array?i:new Float64Array(i),o=r.length,a=s.length,l=Math.min(o,a);if(1!==r[0]){for(let t=0;t<o;t+=1)s[t]/=r[0];for(let t=1;t<a;t+=1)r[t]/=r[0]}let u=new Float32Array(32),h=new Float32Array(32),c=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),p=t.numberOfChannels;for(let e=0;e<p;e+=1){let n=t.getChannelData(e),i=c.getChannelData(e);u.fill(0),h.fill(0),t7(r,o,s,a,l,u,h,0,32,n,i)}return c},et={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},ee=t=>{let e=new Uint32Array([0x46464952,40,0x45564157,0x20746d66,16,131073,44100,176400,1048580,0x61746164,4,0]);try{let n=t.decodeAudioData(e.buffer,()=>{});if(void 0===n)return!1;return n.catch(()=>{}),!0}catch{}return!1},en=(t,e,n)=>{let i=e[n];void 0!==i&&i!==t[n]&&(t[n]=i)},ei=(t,e)=>{en(t,e,"channelCount"),en(t,e,"channelCountMode"),en(t,e,"channelInterpretation")},er=t=>"function"==typeof t.getFloatTimeDomainData,es=t=>{t.getFloatTimeDomainData=e=>{let n=new Uint8Array(e.length);t.getByteTimeDomainData(n);let i=Math.max(n.length,t.fftSize);for(let t=0;t<i;t+=1)e[t]=(n[t]-128)*.0078125;return e}},eo=(t,e,n)=>{let i=e[n];void 0!==i&&i!==t[n].value&&(t[n].value=i)},ea=t=>{t.start=(e=>{let n=!1;return(i=0,r=0,s)=>{if(n)throw t3();e.call(t,i,r,s),n=!0}})(t.start)},el=t=>{let e;e=t.start,t.start=(n=0,i=0,r)=>{if("number"==typeof r&&r<0||i<0||n<0)throw RangeError("The parameters can't be negative.");e.call(t,n,i,r)}},eu=t=>{let e;e=t.stop,t.stop=(n=0)=>{if(n<0)throw RangeError("The parameter can't be negative.");e.call(t,n)}},eh=t=>{let{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},ec=(t,e)=>null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),ep=t=>new Promise((e,n)=>{let{port1:i,port2:r}=new MessageChannel;i.onmessage=({data:t})=>{i.close(),r.close(),e(t)},i.onmessageerror=({data:t})=>{i.close(),r.close(),n(t)},r.postMessage(t)}),ed=async(t,e)=>new t(await ep(e)),ef=(t,e,n,i)=>{let r=R.get(t);void 0===r&&(r=new WeakMap,R.set(t,r));let s=ed(n,i);return r.set(e,s),s},em=(t,e)=>{let n=t.createBiquadFilter();return ei(n,e),eo(n,e,"Q"),eo(n,e,"detune"),eo(n,e,"frequency"),eo(n,e,"gain"),en(n,e,"type"),n},eg=t=>{let e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw t3()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:t=>{if("explicit"!==t)throw t3()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:t=>{if("discrete"!==t)throw t3()}})},e_=(t,e)=>{let n=t.createChannelSplitter(e.numberOfOutputs);return ei(n,e),eg(n),n},ev=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),ey=(t,e)=>{let n=t.createDelay(e.maxDelayTime);return ei(n,e),eo(n,e,"delayTime"),n},eb=(t,e)=>{let n=t.createGain();return ei(n,e),eo(n,e,"gain"),n};function ew(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1){var i;n=[(i=n)[0]*e[0]-i[1]*e[1],i[0]*e[1]+i[1]*e[0]],n[0]+=t[r]}return n}let eT=(t,e,n,i)=>t.createScriptProcessor(e,n,i),ex=()=>new DOMException("","NotSupportedError"),ek={numberOfChannels:1},eC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},eA={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},eS={disableNormalization:!1},eO={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},eI=()=>new DOMException("","UnknownError"),eM={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},eE=(t,e,n)=>void 0===t.copyFromChannel?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),eR=t=>{if(null===t)return!1;let e=t.length;return e%2!=0?0!==t[Math.floor(e/2)]:t[e/2-1]+t[e/2]!==0},eD=(t,e,n,i)=>{let r=t;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);let{get:s,set:o}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(t,e,{get:n(s),set:i(o)})},eN=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(i){if(9!==i.code)throw i;eN(t,e,n+1e-7)}},eP=t=>{let e=t.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},eV=t=>{let e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},eU=t=>{let e=t.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},eF=(t,e)=>{let n;let i=e.createGain();t.connect(i);let r=(n=t.disconnect,()=>{n.call(t,i),t.removeEventListener("ended",r)});t.addEventListener("ended",r),ev(t,i),t.stop=(e=>{let n=!1;return (r=0)=>{if(n)try{e.call(t,r)}catch{i.gain.setValueAtTime(0,r)}else e.call(t,r),n=!0}})(t.stop)},eq=(t,e)=>n=>{let i={value:t};return(Object.defineProperties(n,{currentTarget:i,target:i}),"function"==typeof e)?e.call(t,n):e.handleEvent.call(t,n)},eB=new WeakMap,ej=((t,e)=>(n,i)=>{let r=e.get(n);if(void 0!==r)return r;let s=t.get(n);if(void 0!==s)return s;try{let r=i();if(r instanceof Promise)return t.set(n,r),r.catch(()=>!1).then(i=>(t.delete(n),e.set(n,i),i));return e.set(n,r),r}catch{return e.set(n,!1),!1}})(new Map,new WeakMap),eL="undefined"==typeof window?null:window,eW=(t,e)=>{let n=t.createAnalyser();if(ei(n,e),!(e.maxDecibels>e.minDecibels))throw X();return en(n,e,"fftSize"),en(n,e,"maxDecibels"),en(n,e,"minDecibels"),en(n,e,"smoothingTimeConstant"),ej(er,()=>er(n))||es(n),n},ez=t=>{let e=ta(t);if(null===e.renderer)throw Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer},eG=((t,e,n)=>async(i,r,s)=>{let o=t(i);await Promise.all(o.activeInputs.map((t,o)=>Array.from(t).map(async([t,a])=>{let l=e(t),u=await l.render(t,r),h=i.context.destination;n(t)||i===h&&n(i)||u.connect(s,a,o)})).reduce((t,e)=>[...t,...e],[]))})(ta,ez,tA),eQ=t=>{let e=O.get(t);if(void 0===e)throw t3();return e},eH=(t=>null===t?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null)(eL),e$=(t=>e=>null!==t&&e instanceof t)(eH),eY=new WeakMap,eX=class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,e,n){if(null!==e){let i=this._listeners.get(e);void 0===i&&(i=eq(this,e),"function"==typeof e&&this._listeners.set(e,i)),this._nativeEventTarget.addEventListener(t,i,n)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,e,n){let i=null===e?void 0:this._listeners.get(e);this._nativeEventTarget.removeEventListener(t,void 0===i?null:i,n)}},eZ=(t=>null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null)(eL),eJ=(t=>e=>null!==t&&e instanceof t)(eZ),eK=(t=>e=>null!==t&&"function"==typeof t.AudioNode&&e instanceof t.AudioNode)(eL),e0=(t=>e=>null!==t&&"function"==typeof t.AudioParam&&e instanceof t.AudioParam)(eL),e1=(t=>null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null)(eL),e2=((t,e,n,i,r,s,o,a,l,u,h,c,p,d,f,m)=>class extends u{constructor(e,i,r,s){super(r),this._context=e,this._nativeAudioNode=r;let o=h(e);c(o)&&!0!==n(tO,()=>tO(o,m))&&tE(r),C.set(this,r),I.set(this,new Set),"closed"!==e.state&&i&&W(this),t(this,s,r)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(t){this._nativeAudioNode.channelCount=t}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(t){this._nativeAudioNode.channelCountMode=t}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(t){this._nativeAudioNode.channelInterpretation=t}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(t,n=0,a=0){if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw r();let u=f(h(this._context));if(p(t)||d(t))throw s();if(tp(t)){let r=tk(t);try{let e=tv(this._nativeAudioNode,r,n,a),i=tS(this);(u||i)&&this._nativeAudioNode.disconnect(...e),"closed"!==this.context.state&&!i&&tS(t)&&W(t)}catch(t){if(12===t.code)throw s();throw t}return e(this,t,n,a,u)&&tI(l([this],t),i(u)),t}let c=tC(t);if("playbackRate"===c.name&&1024===c.maxValue)throw o();try{this._nativeAudioNode.connect(c,n),(u||tS(this))&&this._nativeAudioNode.disconnect(c,n)}catch(t){if(12===t.code)throw s();throw t}tR(this,t,n,u)&&tI(l([this],t),i(u))}disconnect(t,e,n){let i;let o=f(h(this._context));if(void 0===t)i=tU(this,o);else if("number"==typeof t){if(t<0||t>=this.numberOfOutputs)throw r();i=tF(this,o,t)}else{if(void 0!==e&&(e<0||e>=this.numberOfOutputs)||tp(t)&&void 0!==n&&(n<0||n>=t.numberOfInputs))throw r();if(0===(i=tq(this,o,t,e,n)).length)throw s()}for(let t of i)tI(l([this],t),a)}})((t,e,n)=>{let i=[];for(let t=0;t<n.numberOfInputs;t+=1)i.push(new Set);k.set(t,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:e})},((t,e,n,i,r,s,o,a,l,u,h,c,p)=>{let d=new WeakMap;return(f,m,g,v,y)=>{let{activeInputs:b,passiveInputs:w}=s(m),{outputs:T}=s(f),x=a(f),k=s=>{let a=l(m),u=l(f);if(s){let e=j(w,f,g,v);t(b,f,e,!1),y||c(f)||n(u,a,g,v),p(m)&&W(m)}else{let t=i(b,f,g,v);e(w,v,t,!1),y||c(f)||r(u,a,g,v);let n=o(m);if(0===n)h(m)&&Q(m,b);else{let t=d.get(m);void 0!==t&&clearTimeout(t),d.set(m,setTimeout(()=>{h(m)&&Q(m,b)},1e3*n))}}};return!!u(T,[m,g,v],t=>t[0]===m&&t[1]===g&&t[2]===v,!0)&&(x.add(k),h(f)?t(b,f,[g,v,k],!0):e(w,v,[f,g,k],!0),!0)}})((t,e,[n,i,r],s)=>{tf(t[i],[e,n,r],t=>t[0]===e&&t[1]===n,s)},(t,e,[n,i,r],s)=>{let o=t.get(n);void 0===o?t.set(n,new Set([[i,e,r]])):tf(o,[i,e,r],t=>t[0]===i&&t[1]===e,s)},tv,(t,e,n,i)=>B(t[i],t=>t[0]===e&&t[1]===n),tx,ta,t=>{var e;return null!==(e=eB.get(t))&&void 0!==e?e:0},L,tk,tf,K,tA,tS),ej,((t,e,n,i,r,s)=>o=>(a,l)=>{let u=t.get(a);if(void 0===u){if(!o&&s(a)){let t=i(a),{outputs:s}=n(a);for(let n of s)if(td(n))e(t,i(n[0]),n[1],n[2]);else{let e=r(n[0]);t.disconnect(e,n[1])}}t.set(a,l)}else t.set(a,u+l)})(M,tx,ta,tk,tC,K),X,t5,ex,((t,e,n,i,r,s,o,a)=>(l,u)=>{let h=e.get(l);if(void 0===h)throw Error("Missing the expected cycle count.");let c=a(s(l.context));if(h===u){if(e.delete(l),!c&&o(l)){let e=i(l),{outputs:s}=n(l);for(let n of s)if(td(n))t(e,i(n[0]),n[1],n[2]);else{let t=r(n[0]);e.connect(t,n[1])}}}else e.set(l,h-u)})(tv,M,ta,tk,tC,eQ,K,e$),function t(e,n){let i=tp(n)?n:q(eY,n);if(t0(i))return[];if(e[0]===i)return[e];if(e.includes(i))return[];let{outputs:r}=ta(i);return Array.from(r).map(n=>t([...e,i],n[0])).reduce((t,e)=>t.concat(e),[])},eX,eQ,eJ,eK,e0,e$,e1),e8=((t,e,n,i,r,s)=>class extends t{constructor(t,n){let o=r(t),a=i(o,{...H,...n});super(t,!1,a,s(o)?e():null),this._nativeAnalyserNode=a}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(t){this._nativeAnalyserNode.fftSize=t}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(t){let e=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=e,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(t){let e=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=e,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(t){this._nativeAnalyserNode.smoothingTimeConstant=t}getByteFrequencyData(t){this._nativeAnalyserNode.getByteFrequencyData(t)}getByteTimeDomainData(t){this._nativeAnalyserNode.getByteTimeDomainData(t)}getFloatFrequencyData(t){this._nativeAnalyserNode.getFloatFrequencyData(t)}getFloatTimeDomainData(t){this._nativeAnalyserNode.getFloatTimeDomainData(t)}})(e2,()=>{let t=new WeakMap,e=async(e,n)=>{let i=tk(e);return $(i,n)||(i=eW(n,{channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,fftSize:i.fftSize,maxDecibels:i.maxDecibels,minDecibels:i.minDecibels,smoothingTimeConstant:i.smoothingTimeConstant})),t.set(n,i),await eG(e,n,i),i};return{render(n,i){let r=t.get(i);return void 0!==r?Promise.resolve(r):e(n,i)}}},X,eW,eQ,e$),e3=new WeakSet,e5=(t=>null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null)(eL),e6=(t=>e=>(t[0]=e,t[0]))(new Uint32Array(1)),e4=((t,e)=>n=>{n.copyFromChannel=(i,r,s=0)=>{let o=t(s),a=t(r);if(a>=n.numberOfChannels)throw e();let l=n.length,u=n.getChannelData(a),h=i.length;for(let t=o<0?-o:0;t+o<l&&t<h;t+=1)i[t]=u[t+o]},n.copyToChannel=(i,r,s=0)=>{let o=t(s),a=t(r);if(a>=n.numberOfChannels)throw e();let l=n.length,u=n.getChannelData(a),h=i.length;for(let t=o<0?-o:0;t+o<l&&t<h;t+=1)u[t+o]=i[t]}})(e6,X),e7=(t=>e=>{let n,i;n=e.copyFromChannel,e.copyFromChannel=(i,r,s=0)=>{let o=t(s),a=t(r);if(o<e.length)return n.call(e,i,a,o)},i=e.copyToChannel,e.copyToChannel=(n,r,s=0)=>{let o=t(s),a=t(r);if(o<e.length)return i.call(e,n,a,o)}})(e6),e9=((t,e,n,i,r,s,o,a)=>{let l=null;return class u{constructor(u){if(null===r)throw Error("Missing the native OfflineAudioContext constructor.");let{length:h,numberOfChannels:c,sampleRate:p}={...J,...u};null===l&&(l=new r(1,1,44100));let d=null!==i&&e(s,s)?new i({length:h,numberOfChannels:c,sampleRate:p}):l.createBuffer(c,h,p);if(0===d.numberOfChannels)throw n();return"function"!=typeof d.copyFromChannel?(o(d),Z(d)):e(Y,()=>Y(d))||a(d),t.add(d),d}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===u.prototype||t.has(e)}}})(e3,ej,ex,e5,eH,(t=>()=>{if(null===t)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0})(e5),e4,e7),nt=(t,e)=>{let n=eb(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(n).connect(t.destination);let i=()=>{e.removeEventListener("ended",i),e.disconnect(n),n.disconnect()};e.addEventListener("ended",i)},ne=async(t,e,n)=>{let i=tl(t);await Promise.all(Array.from(i.activeInputs).map(async([t,i])=>{let r=ez(t),s=await r.render(t,e);tA(t)||s.connect(n,i)}))},nn=(t,e,n)=>ne(e,t,n),ni=((t,e,n,i,r,s,o,a,l,u,h)=>(c,p)=>{let d=c.createBufferSource();return ei(d,p),eo(d,p,"playbackRate"),en(d,p,"buffer"),en(d,p,"loop"),en(d,p,"loopEnd"),en(d,p,"loopStart"),e(n,()=>n(c))||ea(d),e(i,()=>i(c))||l(d),e(r,()=>r(c))||u(d,c),e(s,()=>s(c))||el(d),e(o,()=>o(c))||h(d,c),e(a,()=>a(c))||eu(d),t(c,d),d})(nt,ej,t=>{let e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},t=>{let e=t.createBufferSource();e.buffer=t.createBuffer(1,1,44100);try{e.start(0,1)}catch{return!1}return!0},t=>{let e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},eP,eV,eU,t=>{t.start=(e=>(n=0,i=0,r)=>{let s=t.buffer,o=null===s?i:Math.min(s.duration,i);null!==s&&o>s.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,r)})(t.start)},(t,e)=>{let n=e.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=n),eD(t,"buffer",e=>()=>{let i=e.call(t);return i===n?null:i},e=>i=>e.call(t,null===i?n:i))},eF),nr=(i=t=>{let e=tl(t);if(null===e.renderer)throw Error("Missing the renderer of the given AudioParam in the audio graph.");return e.renderer},(t,e,n)=>(i(e).replay(n),ne(e,t,n))),ns=((t,e,n,i,r,s,o,a,l,u,h,c,p)=>(d,f,m,g=null,v=null)=>{let y=m.value,b=new T.AutomationEventList(y),w=f?i(b):null,x={get defaultValue(){return y},get maxValue(){return null===g?m.maxValue:g},get minValue(){return null===v?m.minValue:v},get value(){return m.value},set value(value){m.value=value,x.setValueAtTime(value,d.context.currentTime)},cancelAndHoldAtTime(t){if("function"==typeof m.cancelAndHoldAtTime)null===w&&b.flush(d.context.currentTime),b.add(r(t)),m.cancelAndHoldAtTime(t);else{let e=Array.from(b).pop();null===w&&b.flush(d.context.currentTime),b.add(r(t));let n=Array.from(b).pop();m.cancelScheduledValues(t),e!==n&&void 0!==n&&("exponentialRampToValue"===n.type?m.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?m.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?m.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&m.setValueCurveAtTime(n.values,n.startTime,n.duration))}return x},cancelScheduledValues:t=>(null===w&&b.flush(d.context.currentTime),b.add(s(t)),m.cancelScheduledValues(t),x),exponentialRampToValueAtTime(t,e){if(0===t||!Number.isFinite(e)||e<0)throw RangeError();let n=d.context.currentTime;return null===w&&b.flush(n),0===Array.from(b).length&&(b.add(u(y,n)),m.setValueAtTime(y,n)),b.add(o(t,e)),m.exponentialRampToValueAtTime(t,e),x},linearRampToValueAtTime(t,e){let n=d.context.currentTime;return null===w&&b.flush(n),0===Array.from(b).length&&(b.add(u(y,n)),m.setValueAtTime(y,n)),b.add(a(t,e)),m.linearRampToValueAtTime(t,e),x},setTargetAtTime:(t,e,n)=>(null===w&&b.flush(d.context.currentTime),b.add(l(t,e,n)),m.setTargetAtTime(t,e,n),x),setValueAtTime:(t,e)=>(null===w&&b.flush(d.context.currentTime),b.add(u(t,e)),m.setValueAtTime(t,e),x),setValueCurveAtTime(t,e,n){let i=t instanceof Float32Array?t:new Float32Array(t);if(null!==c&&"webkitAudioContext"===c.name){let t=e+n,r=d.context.sampleRate,s=Math.ceil(e*r),o=Math.floor(t*r),a=o-s,l=new Float32Array(a);for(let t=0;t<a;t+=1){let o=(i.length-1)/n*((s+t)/r-e),a=Math.floor(o),u=Math.ceil(o);l[t]=a===u?i[a]:(1-(o-a))*i[a]+(1-(u-o))*i[u]}null===w&&b.flush(d.context.currentTime),b.add(h(l,e,n)),m.setValueCurveAtTime(l,e,n);let u=o/r;u<t&&p(x,l[l.length-1],u),p(x,i[i.length-1],t)}else null===w&&b.flush(d.context.currentTime),b.add(h(i,e,n)),m.setValueCurveAtTime(i,e,n);return x}};return n.set(x,m),e.set(x,d),t(x,w),x})((t,e)=>{A.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})},eY,S,t=>({replay(e){for(let n of t)if("exponentialRampToValue"===n.type){let{endTime:t,value:i}=n;e.exponentialRampToValueAtTime(i,t)}else if("linearRampToValue"===n.type){let{endTime:t,value:i}=n;e.linearRampToValueAtTime(i,t)}else if("setTarget"===n.type){let{startTime:t,target:i,timeConstant:r}=n;e.setTargetAtTime(i,t,r)}else if("setValue"===n.type){let{startTime:t,value:i}=n;e.setValueAtTime(i,t)}else if("setValueCurve"===n.type){let{duration:t,startTime:i,values:r}=n;e.setValueCurveAtTime(r,i,t)}else throw Error("Can't apply an unknown automation.")}}),T.createCancelAndHoldAutomationEvent,T.createCancelScheduledValuesAutomationEvent,T.createExponentialRampToValueAutomationEvent,T.createLinearRampToValueAutomationEvent,T.createSetTargetAutomationEvent,T.createSetValueAutomationEvent,T.createSetValueCurveAutomationEvent,eZ,eN),no=((t,e,n,i,r,s,o,a)=>class extends t{constructor(t,i){let a=s(t),l={...tt,...i},u=r(a,l),h=o(a),c=h?e():null;super(t,!1,u,c),this._audioBufferSourceNodeRenderer=c,this._isBufferNullified=!1,this._isBufferSet=null!==l.buffer,this._nativeAudioBufferSourceNode=u,this._onended=null,this._playbackRate=n(this,h,u.playbackRate,34028234663852886e22,-34028234663852886e22)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(t){if(this._nativeAudioBufferSourceNode.buffer=t,null!==t){if(this._isBufferSet)throw i();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(t){this._nativeAudioBufferSourceNode.loop=t}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(t){this._nativeAudioBufferSourceNode.loopEnd=t}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(t){this._nativeAudioBufferSourceNode.loopStart=t}get onended(){return this._onended}set onended(t){let e="function"==typeof t?a(this,t):null;this._nativeAudioBufferSourceNode.onended=e;let n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===e?t:n}get playbackRate(){return this._playbackRate}start(t=0,e=0,n){if(this._nativeAudioBufferSourceNode.start(t,e,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[t,e]:[t,e,n]),"closed"!==this.context.state){W(this);let t=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",t),K(this)&&G(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t)}})(e2,()=>{let t=new WeakMap,e=null,n=null,i=async(i,r)=>{let s=tk(i),o=$(s,r);return o||(s=ni(r,{buffer:s.buffer,channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,loop:s.loop,loopEnd:s.loopEnd,loopStart:s.loopStart,playbackRate:s.playbackRate.value}),null!==e&&s.start(...e),null!==n&&s.stop(n)),t.set(r,s),o?await nn(r,i.playbackRate,s.playbackRate):await nr(r,i.playbackRate,s.playbackRate),await eG(i,r,s),s};return{set start(value){e=value},set stop(value){n=value},render(e,n){let r=t.get(n);return void 0!==r?Promise.resolve(r):i(e,n)}}},ns,t3,ni,eQ,e$,eq),na=((t,e,n,i,r,s,o,a)=>class extends t{constructor(t,n){let i=s(t),l=o(i),u=r(i,n,l);super(t,!1,u,l?e(a):null),this._isNodeOfNativeOfflineAudioContext=l,this._nativeAudioDestinationNode=u}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(t){if(this._isNodeOfNativeOfflineAudioContext)throw i();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(t){if(this._isNodeOfNativeOfflineAudioContext)throw i();this._nativeAudioDestinationNode.channelCountMode=t}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(e2,t=>{let e=new WeakMap,n=async(n,i)=>{let r=i.destination;return e.set(i,r),await t(n,i,r),r};return{render(t,i){let r=e.get(i);return void 0!==r?Promise.resolve(r):n(t,i)}}},X,t3,((t,e)=>(n,i,r)=>{let s=n.destination;if(s.channelCount!==i)try{s.channelCount=i}catch{}r&&"explicit"!==s.channelCountMode&&(s.channelCountMode="explicit"),0===s.maxChannelCount&&Object.defineProperty(s,"maxChannelCount",{value:i});let o=t(n,{channelCount:i,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,gain:1});return e(o,"channelCount",t=>()=>t.call(o),t=>e=>{t.call(o,e);try{s.channelCount=e}catch(t){if(e>s.maxChannelCount)throw t}}),e(o,"channelCountMode",t=>()=>t.call(o),t=>e=>{t.call(o,e),s.channelCountMode=e}),e(o,"channelInterpretation",t=>()=>t.call(o),t=>e=>{t.call(o,e),s.channelInterpretation=e}),Object.defineProperty(o,"maxChannelCount",{get:()=>s.maxChannelCount}),o.connect(s),o})(eb,eD),eQ,e$,eG),nl=((t,e,n,i,r)=>()=>{let s=new WeakMap,o=async(o,a)=>{let l=n(o),u=$(l,a);return u||(l=e(a,{Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type})),s.set(a,l),u?(await t(a,o.Q,l.Q),await t(a,o.detune,l.detune),await t(a,o.frequency,l.frequency),await t(a,o.gain,l.gain)):(await i(a,o.Q,l.Q),await i(a,o.detune,l.detune),await i(a,o.frequency,l.frequency),await i(a,o.gain,l.gain)),await r(o,a,l),l};return{render(t,e){let n=s.get(e);return void 0!==n?Promise.resolve(n):o(t,e)}}})(nn,em,tk,nr,eG),nu=(t,e)=>eB.set(t,e),nh=((t,e,n,i,r,s,o,a)=>class extends t{constructor(t,i){let l=s(t),u=r(l,{...tH,...i}),h=o(l);super(t,!1,u,h?n():null),this._Q=e(this,h,u.Q,34028234663852886e22,-34028234663852886e22),this._detune=e(this,h,u.detune,1200*Math.log2(34028234663852886e22),-1200*Math.log2(34028234663852886e22)),this._frequency=e(this,h,u.frequency,t.sampleRate/2,0),this._gain=e(this,h,u.gain,40*Math.log10(34028234663852886e22),-34028234663852886e22),this._nativeBiquadFilterNode=u,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(t){this._nativeBiquadFilterNode.type=t}getFrequencyResponse(t,e,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(t,e,n)}catch(t){if(11===t.code)throw i();throw t}if(t.length!==e.length||e.length!==n.length)throw i()}})(e2,ns,nl,t5,em,eQ,e$,nu),nc=((t,e)=>(n,i,r)=>{let s=new Set;return n.connect=(r=>(o,a=0,l=0)=>{let u=0===s.size;if(e(o))return r.call(n,o,a,l),t(s,[o,a,l],t=>t[0]===o&&t[1]===a&&t[2]===l,!0),u&&i(),o;r.call(n,o,a),t(s,[o,a],t=>t[0]===o&&t[1]===a,!0),u&&i()})(n.connect),n.disconnect=(t=>(i,o,a)=>{let l=s.size>0;if(void 0===i)t.apply(n),s.clear();else if("number"==typeof i)for(let e of(t.call(n,i),s))e[1]===i&&s.delete(e);else for(let r of(e(i)?t.call(n,i,o,a):t.call(n,i,o),s))r[0]===i&&(void 0===o||r[1]===o)&&(void 0===a||r[2]===a)&&s.delete(r);let u=0===s.size;l&&u&&r()})(n.disconnect),n})(tf,eK),np=((t,e)=>(n,i)=>{let r=n.createChannelMerger(i.numberOfInputs);return null!==t&&"webkitAudioContext"===t.name&&e(n,r),ei(r,i),r})(eZ,((t,e)=>(n,i)=>{i.channelCount=1,i.channelCountMode="explicit",Object.defineProperty(i,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});let r=n.createBufferSource();e(i,()=>{let t=i.numberOfInputs;for(let e=0;e<t;e+=1)r.connect(i,0,e)},()=>r.disconnect(i))})(t3,nc)),nd=((t,e,n,i,r)=>class extends t{constructor(t,s){let o=i(t);super(t,!1,n(o,{...t$,...s}),r(o)?e():null)}})(e2,()=>{let t=new WeakMap,e=async(e,n)=>{let i=tk(e);return $(i,n)||(i=np(n,{channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,numberOfInputs:i.numberOfInputs})),t.set(n,i),await eG(e,n,i),i};return{render(n,i){let r=t.get(i);return void 0!==r?Promise.resolve(r):e(n,i)}}},np,eQ,e$),nf=((t,e,n,i,r,s)=>class extends t{constructor(t,o){let a=i(t);super(t,!1,n(a,s({...tY,...o})),r(a)?e():null)}})(e2,()=>{let t=new WeakMap,e=async(e,n)=>{let i=tk(e);return $(i,n)||(i=e_(n,{channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,numberOfOutputs:i.numberOfOutputs})),t.set(n,i),await eG(e,n,i),i};return{render(n,i){let r=t.get(i);return void 0!==r?Promise.resolve(r):e(n,i)}}},e_,eQ,e$,t=>({...t,channelCount:t.numberOfOutputs})),nm=((t,e,n,i,r)=>(s,o)=>{if(void 0===s.createConstantSource)return n(s,o);let a=s.createConstantSource();return ei(a,o),eo(a,o,"offset"),e(i,()=>i(s))||el(a),e(r,()=>r(s))||eu(a),t(s,a),a})(nt,ej,(t,{offset:e,...n})=>{let i=t.createBuffer(1,2,44100),r=ni(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=eb(t,{...n,gain:e}),o=i.getChannelData(0);return o[0]=1,o[1]=1,r.buffer=i,r.loop=!0,nt(t,r),nc(ev({get bufferSize(){return},get channelCount(){return s.channelCount},set channelCount(value){s.channelCount=value},get channelCountMode(){return s.channelCountMode},set channelCountMode(value){s.channelCountMode=value},get channelInterpretation(){return s.channelInterpretation},set channelInterpretation(value){s.channelInterpretation=value},get context(){return s.context},get inputs(){return[]},get numberOfInputs(){return r.numberOfInputs},get numberOfOutputs(){return s.numberOfOutputs},get offset(){return s.gain},get onended(){return r.onended},set onended(value){r.onended=value},addEventListener:(...t)=>r.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>r.dispatchEvent(t[0]),removeEventListener:(...t)=>r.removeEventListener(t[0],t[1],t[2]),start(t=0){r.start.call(r,t)},stop(t=0){r.stop.call(r,t)}},s),()=>r.connect(s),()=>r.disconnect(s))},eP,eU),ng=((t,e,n,i,r,s,o)=>class extends t{constructor(t,o){let a=r(t),l=i(a,{...tX,...o}),u=s(a),h=u?n():null;super(t,!1,l,h),this._constantSourceNodeRenderer=h,this._nativeConstantSourceNode=l,this._offset=e(this,u,l.offset,34028234663852886e22,-34028234663852886e22),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(t){let e="function"==typeof t?o(this,t):null;this._nativeConstantSourceNode.onended=e;let n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===e?t:n}start(t=0){if(this._nativeConstantSourceNode.start(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=t),"closed"!==this.context.state){W(this);let t=()=>{this._nativeConstantSourceNode.removeEventListener("ended",t),K(this)&&G(this)};this._nativeConstantSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t)}})(e2,ns,()=>{let t=new WeakMap,e=null,n=null,i=async(i,r)=>{let s=tk(i),o=$(s,r);return o||(s=nm(r,{channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,offset:s.offset.value}),null!==e&&s.start(e),null!==n&&s.stop(n)),t.set(r,s),o?await nn(r,i.offset,s.offset):await nr(r,i.offset,s.offset),await eG(i,r,s),s};return{set start(value){e=value},set stop(value){n=value},render(e,n){let r=t.get(n);return void 0!==r?Promise.resolve(r):i(e,n)}}},nm,eQ,e$,eq),n_=((t,e)=>(n,i)=>{let r=n.createConvolver();if(ei(r,i),i.disableNormalization===r.normalize&&(r.normalize=!i.disableNormalization),en(r,i,"buffer"),i.channelCount>2||(e(r,"channelCount",t=>()=>t.call(r),e=>n=>{if(n>2)throw t();return e.call(r,n)}),"max"===i.channelCountMode))throw t();return e(r,"channelCountMode",t=>()=>t.call(r),e=>n=>{if("max"===n)throw t();return e.call(r,n)}),r})(ex,eD),nv=((t,e,n,i,r,s)=>class extends t{constructor(t,o){let a=i(t),l={...tZ,...o},u=n(a,l);super(t,!1,u,r(a)?e():null),this._isBufferNullified=!1,this._nativeConvolverNode=u,null!==l.buffer&&s(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(t){if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){let t=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=t.createBuffer(1,1,t.sampleRate),this._isBufferNullified=!0,s(this,0)}else this._isBufferNullified=!1,s(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(t){this._nativeConvolverNode.normalize=t}})(e2,((t,e,n)=>()=>{let i=new WeakMap,r=async(r,s)=>{let o=e(r);return $(o,s)||(o=t(s,{buffer:o.buffer,channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,disableNormalization:!o.normalize})),i.set(s,o),t_(o)?await n(r,s,o.inputs[0]):await n(r,s,o),o};return{render(t,e){let n=i.get(e);return void 0!==n?Promise.resolve(n):r(t,e)}}})(n_,tk,eG),n_,eQ,e$,nu),ny=((t,e,n,i,r,s,o)=>class extends t{constructor(t,a){let l=r(t),u={...tK,...a},h=i(l,u),c=s(l);super(t,!1,h,c?n(u.maxDelayTime):null),this._delayTime=e(this,c,h.delayTime),o(this,u.maxDelayTime)}get delayTime(){return this._delayTime}})(e2,ns,t=>{let e=new WeakMap,n=async(n,i)=>{let r=tk(n),s=$(r,i);return s||(r=ey(i,{channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,delayTime:r.delayTime.value,maxDelayTime:t})),e.set(i,r),s?await nn(i,n.delayTime,r.delayTime):await nr(i,n.delayTime,r.delayTime),await eG(n,i,r),r};return{render(t,i){let r=e.get(i);return void 0!==r?Promise.resolve(r):n(t,i)}}},ey,eQ,e$,nu),nb=(o=ex,(t,e)=>{let n=t.createDynamicsCompressor();if(ei(n,e),e.channelCount>2||"max"===e.channelCountMode)throw o();return eo(n,e,"attack"),eo(n,e,"knee"),eo(n,e,"ratio"),eo(n,e,"release"),eo(n,e,"threshold"),n}),nw=((t,e,n,i,r,s,o,a)=>class extends t{constructor(t,r){let l=s(t),u=i(l,{...t2,...r}),h=o(l);super(t,!1,u,h?n():null),this._attack=e(this,h,u.attack),this._knee=e(this,h,u.knee),this._nativeDynamicsCompressorNode=u,this._ratio=e(this,h,u.ratio),this._release=e(this,h,u.release),this._threshold=e(this,h,u.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(t){let e=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=e,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(t){let e=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=e,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(e2,ns,((t,e,n,i,r)=>()=>{let s=new WeakMap,o=async(o,a)=>{let l=n(o),u=$(l,a);return u||(l=e(a,{attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value})),s.set(a,l),u?(await t(a,o.attack,l.attack),await t(a,o.knee,l.knee),await t(a,o.ratio,l.ratio),await t(a,o.release,l.release),await t(a,o.threshold,l.threshold)):(await i(a,o.attack,l.attack),await i(a,o.knee,l.knee),await i(a,o.ratio,l.ratio),await i(a,o.release,l.release),await i(a,o.threshold,l.threshold)),await r(o,a,l),l};return{render(t,e){let n=s.get(e);return void 0!==n?Promise.resolve(n):o(t,e)}}})(nn,nb,tk,nr,eG),nb,ex,eQ,e$,nu),nT=((t,e,n,i,r,s)=>class extends t{constructor(t,o){let a=r(t),l=i(a,{...t8,...o}),u=s(a);super(t,!1,l,u?n():null),this._gain=e(this,u,l.gain,34028234663852886e22,-34028234663852886e22)}get gain(){return this._gain}})(e2,ns,()=>{let t=new WeakMap,e=async(e,n)=>{let i=tk(e),r=$(i,n);return r||(i=eb(n,{channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:i.gain.value})),t.set(n,i),r?await nn(n,e.gain,i.gain):await nr(n,e.gain,i.gain),await eG(e,n,i),i};return{render(n,i){let r=t.get(i);return void 0!==r?Promise.resolve(r):e(n,i)}}},eb,eQ,e$),nx=((t,e,n,i)=>(r,s,{channelCount:o,channelCountMode:a,channelInterpretation:l,feedback:u,feedforward:h})=>{let c=ec(s,r.sampleRate),p=u instanceof Float64Array?u:new Float64Array(u),d=h instanceof Float64Array?h:new Float64Array(h),f=p.length,m=d.length,g=Math.min(f,m);if(0===f||f>20)throw i();if(0===p[0])throw e();if(0===m||m>20)throw i();if(0===d[0])throw e();if(1!==p[0]){for(let t=0;t<m;t+=1)d[t]/=p[0];for(let t=1;t<f;t+=1)p[t]/=p[0]}let v=n(r,c,o,o);v.channelCount=o,v.channelCountMode=a,v.channelInterpretation=l;let y=[],b=[],w=[];for(let t=0;t<o;t+=1){y.push(0);let t=new Float32Array(32),e=new Float32Array(32);t.fill(0),e.fill(0),b.push(t),w.push(e)}v.onaudioprocess=t=>{let e=t.inputBuffer,n=t.outputBuffer,i=e.numberOfChannels;for(let t=0;t<i;t+=1){let i=e.getChannelData(t),r=n.getChannelData(t);y[t]=t7(p,f,d,m,g,b[t],w[t],y[t],32,i,r)}};let T=r.sampleRate/2;return ev({get bufferSize(){return c},get channelCount(){return v.channelCount},set channelCount(value){v.channelCount=value},get channelCountMode(){return v.channelCountMode},set channelCountMode(value){v.channelCountMode=value},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(value){v.channelInterpretation=value},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener:(...t)=>v.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>v.dispatchEvent(t[0]),getFrequencyResponse(e,n,i){if(e.length!==n.length||n.length!==i.length)throw t();let r=e.length;for(let t=0;t<r;t+=1){let r=-Math.PI*(e[t]/T),s=[Math.cos(r),Math.sin(r)],o=function(t,e){let n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}(ew(d,s),ew(p,s));n[t]=Math.sqrt(o[0]*o[0]+o[1]*o[1]),i[t]=Math.atan2(o[1],o[0])}},removeEventListener:(...t)=>v.removeEventListener(t[0],t[1],t[2])},v)})(t5,t3,eT,ex),nk=((t,e,n,i)=>r=>t(ee,()=>ee(r))?Promise.resolve(t(i,i)).then(t=>{if(!t){let t=n(r,512,0,1);r.oncomplete=()=>{t.onaudioprocess=null,t.disconnect()},t.onaudioprocess=()=>r.currentTime,t.connect(r.destination)}return r.startRendering()}):new Promise(t=>{let n=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=e=>{n.disconnect(),t(e.renderedBuffer)},n.connect(r.destination),r.startRendering()}))(ej,eb,eT,((t,e)=>()=>{if(null===e)return Promise.resolve(!1);let n=new e(1,1,44100),i=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(t=>{n.oncomplete=()=>{i.disconnect(),t(0!==n.currentTime)},n.startRendering()})})(eb,eH)),nC=((t,e,n,i,r,s)=>class extends t{constructor(t,o){let a=i(t),l=r(a),u={...t4,...o},h=e(a,l?null:t.baseLatency,u);super(t,!1,h,l?n(u.feedback,u.feedforward):null),t6(h),this._nativeIIRFilterNode=h,s(this,1)}getFrequencyResponse(t,e,n){return this._nativeIIRFilterNode.getFrequencyResponse(t,e,n)}})(e2,(t,e,n)=>{if(void 0===t.createIIRFilter)return nx(t,e,n);let i=t.createIIRFilter(n.feedforward,n.feedback);return ei(i,n),i},((t,e,n,i,r)=>(s,o)=>{let a=new WeakMap,l=null,u=async(u,h)=>{let c=null,p=e(u),d=$(p,h);if(void 0===h.createIIRFilter?c=t(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):d||(p=h.createIIRFilter(o,s)),a.set(h,null===c?p:c),null!==c){if(null===l){if(null===n)throw Error("Missing the native OfflineAudioContext constructor.");let t=new n(u.context.destination.channelCount,u.context.length,h.sampleRate);l=(async()=>(await i(u,t,t.destination),t9(await r(t),h,s,o)))()}let t=await l;return c.buffer=t,c.start(0),c}return await i(u,h,p),p};return{render(t,e){let n=a.get(e);return void 0!==n?Promise.resolve(n):u(t,e)}}})(ni,tk,eH,eG,nk),eQ,e$,nu),nA=((t,e,n,i,r,s,o,a)=>(l,u)=>{let h=u.listener,{forwardX:c,forwardY:p,forwardZ:d,positionX:f,positionY:m,positionZ:g,upX:v,upY:y,upZ:b}=void 0===h.forwardX?(()=>{let c=new Float32Array(1),p=e(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),d=o(u),f=!1,m=[0,0,-1,0,1,0],g=[0,0,0],v=()=>{if(f)return;f=!0;let t=i(u,256,9,0);t.onaudioprocess=({inputBuffer:t})=>{let e=[s(t,c,0),s(t,c,1),s(t,c,2),s(t,c,3),s(t,c,4),s(t,c,5)];e.some((t,e)=>t!==m[e])&&(h.setOrientation(...e),m=e);let n=[s(t,c,6),s(t,c,7),s(t,c,8)];n.some((t,e)=>t!==g[e])&&(h.setPosition(...n),g=n)},p.connect(t)},y=t=>e=>{e!==m[t]&&(m[t]=e,h.setOrientation(...m))},b=t=>e=>{e!==g[t]&&(g[t]=e,h.setPosition(...g))},w=(e,i,s)=>{var o,h,c,f,m,g,y;let b=n(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:i});b.connect(p,0,e),b.start(),Object.defineProperty(b.offset,"defaultValue",{get:()=>i});let w=t({context:l},d,b.offset,34028234663852886e22,-34028234663852886e22);return a(w,"value",t=>()=>t.call(w),t=>e=>{try{t.call(w,e)}catch(t){if(9!==t.code)throw t}v(),d&&s(e)}),o=w.cancelAndHoldAtTime,w.cancelAndHoldAtTime=d?()=>{throw r()}:(...t)=>{let e=o.apply(w,t);return v(),e},h=w.cancelScheduledValues,w.cancelScheduledValues=d?()=>{throw r()}:(...t)=>{let e=h.apply(w,t);return v(),e},c=w.exponentialRampToValueAtTime,w.exponentialRampToValueAtTime=d?()=>{throw r()}:(...t)=>{let e=c.apply(w,t);return v(),e},f=w.linearRampToValueAtTime,w.linearRampToValueAtTime=d?()=>{throw r()}:(...t)=>{let e=f.apply(w,t);return v(),e},m=w.setTargetAtTime,w.setTargetAtTime=d?()=>{throw r()}:(...t)=>{let e=m.apply(w,t);return v(),e},g=w.setValueAtTime,w.setValueAtTime=d?()=>{throw r()}:(...t)=>{let e=g.apply(w,t);return v(),e},y=w.setValueCurveAtTime,w.setValueCurveAtTime=d?()=>{throw r()}:(...t)=>{let e=y.apply(w,t);return v(),e},w};return{forwardX:w(0,0,y(0)),forwardY:w(1,0,y(1)),forwardZ:w(2,-1,y(2)),positionX:w(6,0,b(0)),positionY:w(7,0,b(1)),positionZ:w(8,0,b(2)),upX:w(3,0,y(3)),upY:w(4,1,y(4)),upZ:w(5,0,y(5))}})():h;return{get forwardX(){return c},get forwardY(){return p},get forwardZ(){return d},get positionX(){return f},get positionY(){return m},get positionZ(){return g},get upX(){return v},get upY(){return y},get upZ(){return b}}})(ns,np,nm,eT,ex,eE,e$,eD),nS=new WeakMap,nO=((t,e,n,i,r,s)=>class extends n{constructor(n,s){super(n),this._nativeContext=n,O.set(this,n),i(n)&&r.set(n,new Set),this._destination=new t(this,s),this._listener=e(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(t){let e="function"==typeof t?s(this,t):null;this._nativeContext.onstatechange=e;let n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===e?t:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(na,nA,eX,e$,nS,eq),nI=((t,e,n,i,r,s)=>(o,a)=>{let l=o.createOscillator();return ei(l,a),eo(l,a,"detune"),eo(l,a,"frequency"),void 0!==a.periodicWave?l.setPeriodicWave(a.periodicWave):en(l,a,"type"),e(n,()=>n(o))||el(l),e(i,()=>i(o))||s(l,o),e(r,()=>r(o))||eu(l),t(o,l),l})(nt,ej,eP,eV,eU,eF),nM=((t,e,n,i,r)=>()=>{let s=new WeakMap,o=null,a=null,l=null,u=async(u,h)=>{let c=n(u),p=$(c,h);return p||(c=e(h,{channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,periodicWave:null===o?void 0:o,type:c.type}),null!==a&&c.start(a),null!==l&&c.stop(l)),s.set(h,c),p?(await t(h,u.detune,c.detune),await t(h,u.frequency,c.frequency)):(await i(h,u.detune,c.detune),await i(h,u.frequency,c.frequency)),await r(u,h,c),c};return{set periodicWave(value){o=value},set start(value){a=value},set stop(value){l=value},render(t,e){let n=s.get(e);return void 0!==n?Promise.resolve(n):u(t,e)}}})(nn,nI,tk,nr,eG),nE=((t,e,n,i,r,s,o)=>class extends t{constructor(t,o){let a=r(t),l={...eC,...o},u=n(a,l),h=s(a),c=h?i():null,p=t.sampleRate/2;super(t,!1,u,c),this._detune=e(this,h,u.detune,153600,-153600),this._frequency=e(this,h,u.frequency,p,-p),this._nativeOscillatorNode=u,this._onended=null,this._oscillatorNodeRenderer=c,null!==this._oscillatorNodeRenderer&&void 0!==l.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=l.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(t){let e="function"==typeof t?o(this,t):null;this._nativeOscillatorNode.onended=e;let n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===e?t:n}get type(){return this._nativeOscillatorNode.type}set type(t){this._nativeOscillatorNode.type=t,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t)}start(t=0){if(this._nativeOscillatorNode.start(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=t),"closed"!==this.context.state){W(this);let t=()=>{this._nativeOscillatorNode.removeEventListener("ended",t),K(this)&&G(this)};this._nativeOscillatorNode.addEventListener("ended",t)}}stop(t=0){this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t)}})(e2,ns,nI,nM,eQ,e$,eq),nR=(t,e)=>{let n=ni(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1});return n.buffer=t.createBuffer(1,2,44100),n.loop=!0,n.connect(e),n.start(),()=>{n.stop(),n.disconnect(e)}},nD=((t,e,n,i,r)=>(s,{curve:o,oversample:a,...l})=>{let u=s.createWaveShaper(),h=s.createWaveShaper();ei(u,l),ei(h,l);let c=n(s,{...l,gain:1}),p=n(s,{...l,gain:-1}),d=n(s,{...l,gain:1}),f=n(s,{...l,gain:-1}),m=null,g=!1,v=null,y={get bufferSize(){return},get channelCount(){return u.channelCount},set channelCount(value){c.channelCount=value,p.channelCount=value,u.channelCount=value,d.channelCount=value,h.channelCount=value,f.channelCount=value},get channelCountMode(){return u.channelCountMode},set channelCountMode(value){c.channelCountMode=value,p.channelCountMode=value,u.channelCountMode=value,d.channelCountMode=value,h.channelCountMode=value,f.channelCountMode=value},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(value){c.channelInterpretation=value,p.channelInterpretation=value,u.channelInterpretation=value,d.channelInterpretation=value,h.channelInterpretation=value,f.channelInterpretation=value},get context(){return u.context},get curve(){return v},set curve(value){if(null!==value&&value.length<2)throw e();if(null===value)u.curve=value,h.curve=value;else{let t=value.length,e=new Float32Array(t+2-t%2),n=new Float32Array(t+2-t%2);e[0]=value[0],n[0]=-value[t-1];let i=Math.ceil((t+1)/2),r=(t+1)/2-1;for(let s=1;s<i;s+=1){let o=s/i*r,a=Math.floor(o),l=Math.ceil(o);e[s]=a===l?value[a]:(1-(o-a))*value[a]+(1-(l-o))*value[l],n[s]=a===l?-value[t-1-a]:-((1-(o-a))*value[t-1-a])-(1-(l-o))*value[t-1-l]}e[i]=t%2==1?value[i-1]:(value[i-2]+value[i-1])/2,u.curve=e,h.curve=n}v=value,g&&(i(v)&&null===m?m=t(s,c):null!==m&&(m(),m=null))},get inputs(){return[c]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get oversample(){return u.oversample},set oversample(value){u.oversample=value,h.oversample=value},addEventListener:(...t)=>c.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>c.dispatchEvent(t[0]),removeEventListener:(...t)=>c.removeEventListener(t[0],t[1],t[2])};return null!==o&&(y.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==y.oversample&&(y.oversample=a),r(ev(y,d),()=>{c.connect(u).connect(d),c.connect(p).connect(h).connect(f).connect(d),g=!0,i(v)&&(m=t(s,c))},()=>{c.disconnect(u),u.disconnect(d),c.disconnect(p),p.disconnect(h),h.disconnect(f),f.disconnect(d),g=!1,null!==m&&(m(),m=null)})})(nR,t3,eb,eR,nc),nN=((t,e,n,i,r,s,o)=>(a,l)=>{let u=a.createWaveShaper();if(null!==s&&"webkitAudioContext"===s.name&&void 0===a.createGain().gain.automationRate)return n(a,l);ei(u,l);let h=null===l.curve||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(null!==h&&h.length<2)throw e();en(u,{curve:h},"curve"),en(u,l,"oversample");let c=null,p=!1;return o(u,"curve",t=>()=>t.call(u),e=>n=>(e.call(u,n),p&&(i(n)&&null===c?c=t(a,u):i(n)||null===c||(c(),c=null)),n)),r(u,()=>{p=!0,i(u.curve)&&(c=t(a,u))},()=>{p=!1,null!==c&&(c(),c=null)})})(nR,t3,nD,eR,nc,eZ,eD),nP=(r=((t,e,n,i,r,s,o,a,l,u)=>(h,{coneInnerAngle:c,coneOuterAngle:p,coneOuterGain:d,distanceModel:f,maxDistance:m,orientationX:g,orientationY:v,orientationZ:y,panningModel:b,positionX:w,positionY:T,positionZ:x,refDistance:k,rolloffFactor:C,...A})=>{let S=h.createPanner();if(A.channelCount>2||"max"===A.channelCountMode)throw o();ei(S,A);let O={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},I=n(h,{...O,channelInterpretation:"speakers",numberOfInputs:6}),M=i(h,{...A,gain:1}),E=i(h,{...O,gain:1}),R=i(h,{...O,gain:0}),D=i(h,{...O,gain:0}),N=i(h,{...O,gain:0}),P=i(h,{...O,gain:0}),V=i(h,{...O,gain:0}),U=r(h,256,6,1),F=s(h,{...O,curve:new Float32Array([1,1]),oversample:"none"}),q=[g,v,y],B=[w,T,x],j=new Float32Array(1);U.onaudioprocess=({inputBuffer:t})=>{let e=[l(t,j,0),l(t,j,1),l(t,j,2)];e.some((t,e)=>t!==q[e])&&(S.setOrientation(...e),q=e);let n=[l(t,j,3),l(t,j,4),l(t,j,5)];n.some((t,e)=>t!==B[e])&&(S.setPosition(...n),B=n)},Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(V.gain,"defaultValue",{get:()=>0});let L={get bufferSize(){return},get channelCount(){return S.channelCount},set channelCount(value){if(value>2)throw o();M.channelCount=value,S.channelCount=value},get channelCountMode(){return S.channelCountMode},set channelCountMode(value){if("max"===value)throw o();M.channelCountMode=value,S.channelCountMode=value},get channelInterpretation(){return S.channelInterpretation},set channelInterpretation(value){M.channelInterpretation=value,S.channelInterpretation=value},get coneInnerAngle(){return S.coneInnerAngle},set coneInnerAngle(value){S.coneInnerAngle=value},get coneOuterAngle(){return S.coneOuterAngle},set coneOuterAngle(value){S.coneOuterAngle=value},get coneOuterGain(){return S.coneOuterGain},set coneOuterGain(value){if(value<0||value>1)throw e();S.coneOuterGain=value},get context(){return S.context},get distanceModel(){return S.distanceModel},set distanceModel(value){S.distanceModel=value},get inputs(){return[M]},get maxDistance(){return S.maxDistance},set maxDistance(value){if(value<0)throw RangeError();S.maxDistance=value},get numberOfInputs(){return S.numberOfInputs},get numberOfOutputs(){return S.numberOfOutputs},get orientationX(){return E.gain},get orientationY(){return R.gain},get orientationZ(){return D.gain},get panningModel(){return S.panningModel},set panningModel(value){S.panningModel=value},get positionX(){return N.gain},get positionY(){return P.gain},get positionZ(){return V.gain},get refDistance(){return S.refDistance},set refDistance(value){if(value<0)throw RangeError();S.refDistance=value},get rolloffFactor(){return S.rolloffFactor},set rolloffFactor(value){if(value<0)throw RangeError();S.rolloffFactor=value},addEventListener:(...t)=>M.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>M.dispatchEvent(t[0]),removeEventListener:(...t)=>M.removeEventListener(t[0],t[1],t[2])};return c!==L.coneInnerAngle&&(L.coneInnerAngle=c),p!==L.coneOuterAngle&&(L.coneOuterAngle=p),d!==L.coneOuterGain&&(L.coneOuterGain=d),f!==L.distanceModel&&(L.distanceModel=f),m!==L.maxDistance&&(L.maxDistance=m),g!==L.orientationX.value&&(L.orientationX.value=g),v!==L.orientationY.value&&(L.orientationY.value=v),y!==L.orientationZ.value&&(L.orientationZ.value=y),b!==L.panningModel&&(L.panningModel=b),w!==L.positionX.value&&(L.positionX.value=w),T!==L.positionY.value&&(L.positionY.value=T),x!==L.positionZ.value&&(L.positionZ.value=x),k!==L.refDistance&&(L.refDistance=k),C!==L.rolloffFactor&&(L.rolloffFactor=C),(1!==q[0]||0!==q[1]||0!==q[2])&&S.setOrientation(...q),(0!==B[0]||0!==B[1]||0!==B[2])&&S.setPosition(...B),u(ev(L,S),()=>{M.connect(S),t(M,F,0,0),F.connect(E).connect(I,0,0),F.connect(R).connect(I,0,1),F.connect(D).connect(I,0,2),F.connect(N).connect(I,0,3),F.connect(P).connect(I,0,4),F.connect(V).connect(I,0,5),I.connect(U).connect(h.destination)},()=>{M.disconnect(S),a(M,F,0,0),F.disconnect(E),E.disconnect(I),F.disconnect(R),R.disconnect(I),F.disconnect(D),D.disconnect(I),F.disconnect(N),N.disconnect(I),F.disconnect(P),P.disconnect(I),F.disconnect(V),V.disconnect(I),I.disconnect(U),U.disconnect(h.destination)})})(tv,t3,np,eb,eT,nN,ex,tx,eE,nc),(t,e)=>{let n=t.createPanner();return void 0===n.orientationX?r(t,e):(ei(n,e),eo(n,e,"orientationX"),eo(n,e,"orientationY"),eo(n,e,"orientationZ"),eo(n,e,"positionX"),eo(n,e,"positionY"),eo(n,e,"positionZ"),en(n,e,"coneInnerAngle"),en(n,e,"coneOuterAngle"),en(n,e,"coneOuterGain"),en(n,e,"distanceModel"),en(n,e,"maxDistance"),en(n,e,"panningModel"),en(n,e,"refDistance"),en(n,e,"rolloffFactor"),n)}),nV=((t,e,n,i,r,s,o,a,l,u)=>()=>{let h=new WeakMap,c=null,p=async(p,d)=>{let f=null,m=s(p),g={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation},v={...g,coneInnerAngle:m.coneInnerAngle,coneOuterAngle:m.coneOuterAngle,coneOuterGain:m.coneOuterGain,distanceModel:m.distanceModel,maxDistance:m.maxDistance,panningModel:m.panningModel,refDistance:m.refDistance,rolloffFactor:m.rolloffFactor},y=$(m,d);if("bufferSize"in m?f=i(d,{...g,gain:1}):y||(m=r(d,{...v,orientationX:m.orientationX.value,orientationY:m.orientationY.value,orientationZ:m.orientationZ.value,positionX:m.positionX.value,positionY:m.positionY.value,positionZ:m.positionZ.value})),h.set(d,null===f?m:f),null!==f){if(null===c){if(null===o)throw Error("Missing the native OfflineAudioContext constructor.");let t=new o(6,p.context.length,d.sampleRate),i=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});i.connect(t.destination),c=(async()=>{let e=await Promise.all([p.orientationX,p.orientationY,p.orientationZ,p.positionX,p.positionY,p.positionZ].map(async(e,i)=>{let r=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:+(0===i)});return await a(t,e,r.offset),r}));for(let t=0;t<6;t+=1)e[t].connect(i,0,t),e[t].start(0);return u(t)})()}let t=await c,s=i(d,{...g,gain:1});await l(p,d,s);let h=[];for(let e=0;e<t.numberOfChannels;e+=1)h.push(t.getChannelData(e));let m=[h[0][0],h[1][0],h[2][0]],y=[h[3][0],h[4][0],h[5][0]],b=i(d,{...g,gain:1}),w=r(d,{...v,orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:y[0],positionY:y[1],positionZ:y[2]});s.connect(b).connect(w.inputs[0]),w.connect(f);for(let e=128;e<t.length;e+=128){let t=[h[0][e],h[1][e],h[2][e]],n=[h[3][e],h[4][e],h[5][e]];if(t.some((t,e)=>t!==m[e])||n.some((t,e)=>t!==y[e])){m=t,y=n;let o=e/d.sampleRate;b.gain.setValueAtTime(0,o),b=i(d,{...g,gain:0}),w=r(d,{...v,orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:y[0],positionY:y[1],positionZ:y[2]}),b.gain.setValueAtTime(1,o),s.connect(b).connect(w.inputs[0]),w.connect(f)}}return f}return y?(await t(d,p.orientationX,m.orientationX),await t(d,p.orientationY,m.orientationY),await t(d,p.orientationZ,m.orientationZ),await t(d,p.positionX,m.positionX),await t(d,p.positionY,m.positionY),await t(d,p.positionZ,m.positionZ)):(await a(d,p.orientationX,m.orientationX),await a(d,p.orientationY,m.orientationY),await a(d,p.orientationZ,m.orientationZ),await a(d,p.positionX,m.positionX),await a(d,p.positionY,m.positionY),await a(d,p.positionZ,m.positionZ)),t_(m)?await l(p,d,m.inputs[0]):await l(p,d,m),m};return{render(t,e){let n=h.get(e);return void 0!==n?Promise.resolve(n):p(t,e)}}})(nn,np,nm,eb,nP,tk,eH,nr,eG,nk),nU=((t,e,n,i,r,s,o)=>class extends t{constructor(t,a){let l=r(t),u=n(l,{...eA,...a}),h=s(l);super(t,!1,u,h?i():null),this._nativePannerNode=u,this._orientationX=e(this,h,u.orientationX,34028234663852886e22,-34028234663852886e22),this._orientationY=e(this,h,u.orientationY,34028234663852886e22,-34028234663852886e22),this._orientationZ=e(this,h,u.orientationZ,34028234663852886e22,-34028234663852886e22),this._positionX=e(this,h,u.positionX,34028234663852886e22,-34028234663852886e22),this._positionY=e(this,h,u.positionY,34028234663852886e22,-34028234663852886e22),this._positionZ=e(this,h,u.positionZ,34028234663852886e22,-34028234663852886e22),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(t){this._nativePannerNode.coneInnerAngle=t}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(t){this._nativePannerNode.coneOuterAngle=t}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(t){this._nativePannerNode.coneOuterGain=t}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(t){this._nativePannerNode.distanceModel=t}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(t){this._nativePannerNode.maxDistance=t}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(t){this._nativePannerNode.panningModel=t}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(t){this._nativePannerNode.refDistance=t}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(t){this._nativePannerNode.rolloffFactor=t}})(e2,ns,nP,nV,eQ,e$,nu),nF=((t,e,n,i)=>class r{constructor(r,s){let o=t(e(r),i({...eS,...s}));return n.add(o),o}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===r.prototype||n.has(t)}})((t,{disableNormalization:e,imag:n,real:i})=>{let r=n instanceof Float32Array?n:new Float32Array(n),s=i instanceof Float32Array?i:new Float32Array(i),o=t.createPeriodicWave(s,r,{disableNormalization:e});if(Array.from(n).length<2)throw X();return o},eQ,new WeakSet,t=>{let{imag:e,real:n}=t;return void 0===e?void 0===n?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:void 0===n?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}}),nq=((t,e)=>(n,i)=>{let r=i.channelCountMode;if("clamped-max"===r)throw e();if(void 0===n.createStereoPanner)return t(n,i);let s=n.createStereoPanner();return ei(s,i),eo(s,i,"pan"),Object.defineProperty(s,"channelCountMode",{get:()=>r,set:t=>{if(t!==r)throw e()}}),s})(((t,e,n,i,r,s)=>{let o=new Float32Array([1,1]),a=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},h=(t,e,r,s)=>{let h=new Float32Array(16385),c=new Float32Array(16385);for(let t=0;t<16385;t+=1){let e=t/16384*a;h[t]=Math.cos(e),c[t]=Math.sin(e)}let p=n(t,{...l,gain:0}),d=i(t,{...u,curve:h}),f=i(t,{...u,curve:o}),m=n(t,{...l,gain:0}),g=i(t,{...u,curve:c});return{connectGraph(){e.connect(p),e.connect(void 0===f.inputs?f:f.inputs[0]),e.connect(m),f.connect(r),r.connect(void 0===d.inputs?d:d.inputs[0]),r.connect(void 0===g.inputs?g:g.inputs[0]),d.connect(p.gain),g.connect(m.gain),p.connect(s,0,0),m.connect(s,0,1)},disconnectGraph(){e.disconnect(p),e.disconnect(void 0===f.inputs?f:f.inputs[0]),e.disconnect(m),f.disconnect(r),r.disconnect(void 0===d.inputs?d:d.inputs[0]),r.disconnect(void 0===g.inputs?g:g.inputs[0]),d.disconnect(p.gain),g.disconnect(m.gain),p.disconnect(s,0,0),m.disconnect(s,0,1)}}},c=(t,r,s,h)=>{let c=new Float32Array(16385),p=new Float32Array(16385),d=new Float32Array(16385),f=new Float32Array(16385),m=Math.floor(8192.5);for(let t=0;t<16385;t+=1)if(t>m){let e=(t-m)/(16384-m)*a;c[t]=Math.cos(e),p[t]=Math.sin(e),d[t]=0,f[t]=1}else{let e=t/(16384-m)*a;c[t]=1,p[t]=0,d[t]=Math.cos(e),f[t]=Math.sin(e)}let g=e(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),v=n(t,{...l,gain:0}),y=i(t,{...u,curve:c}),b=n(t,{...l,gain:0}),w=i(t,{...u,curve:p}),T=i(t,{...u,curve:o}),x=n(t,{...l,gain:0}),k=i(t,{...u,curve:d}),C=n(t,{...l,gain:0}),A=i(t,{...u,curve:f});return{connectGraph(){r.connect(g),r.connect(void 0===T.inputs?T:T.inputs[0]),g.connect(v,0),g.connect(b,0),g.connect(x,1),g.connect(C,1),T.connect(s),s.connect(void 0===y.inputs?y:y.inputs[0]),s.connect(void 0===w.inputs?w:w.inputs[0]),s.connect(void 0===k.inputs?k:k.inputs[0]),s.connect(void 0===A.inputs?A:A.inputs[0]),y.connect(v.gain),w.connect(b.gain),k.connect(x.gain),A.connect(C.gain),v.connect(h,0,0),x.connect(h,0,0),b.connect(h,0,1),C.connect(h,0,1)},disconnectGraph(){r.disconnect(g),r.disconnect(void 0===T.inputs?T:T.inputs[0]),g.disconnect(v,0),g.disconnect(b,0),g.disconnect(x,1),g.disconnect(C,1),T.disconnect(s),s.disconnect(void 0===y.inputs?y:y.inputs[0]),s.disconnect(void 0===w.inputs?w:w.inputs[0]),s.disconnect(void 0===k.inputs?k:k.inputs[0]),s.disconnect(void 0===A.inputs?A:A.inputs[0]),y.disconnect(v.gain),w.disconnect(b.gain),k.disconnect(x.gain),A.disconnect(C.gain),v.disconnect(h,0,0),x.disconnect(h,0,0),b.disconnect(h,0,1),C.disconnect(h,0,1)}}},p=(t,e,n,i,s)=>{if(1===e)return h(t,n,i,s);if(2===e)return c(t,n,i,s);throw r()};return(e,{channelCount:i,channelCountMode:o,pan:a,...l})=>{if("max"===o)throw r();let u=t(e,{...l,channelCount:1,channelCountMode:o,numberOfInputs:2}),h=n(e,{...l,channelCount:i,channelCountMode:o,gain:1}),c=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:a}),{connectGraph:d,disconnectGraph:f}=p(e,i,h,c,u);Object.defineProperty(c.gain,"defaultValue",{get:()=>0}),Object.defineProperty(c.gain,"maxValue",{get:()=>1}),Object.defineProperty(c.gain,"minValue",{get:()=>-1});let m=!1;return s(ev({get bufferSize(){return},get channelCount(){return h.channelCount},set channelCount(value){h.channelCount!==value&&(m&&f(),{connectGraph:d,disconnectGraph:f}=p(e,value,h,c,u),m&&d()),h.channelCount=value},get channelCountMode(){return h.channelCountMode},set channelCountMode(value){if("clamped-max"===value||"max"===value)throw r();h.channelCountMode=value},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(value){h.channelInterpretation=value},get context(){return h.context},get inputs(){return[h]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get pan(){return c.gain},addEventListener:(...t)=>h.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>h.dispatchEvent(t[0]),removeEventListener:(...t)=>h.removeEventListener(t[0],t[1],t[2])},u),()=>{d(),m=!0},()=>{f(),m=!1})}})(np,e_,eb,nN,ex,nc),ex),nB=((t,e,n,i,r)=>()=>{let s=new WeakMap,o=async(o,a)=>{let l=n(o),u=$(l,a);return u||(l=e(a,{channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value})),s.set(a,l),u?await t(a,o.pan,l.pan):await i(a,o.pan,l.pan),t_(l)?await r(o,a,l.inputs[0]):await r(o,a,l),l};return{render(t,e){let n=s.get(e);return void 0!==n?Promise.resolve(n):o(t,e)}}})(nn,nq,tk,nr,eG),nj=((t,e,n,i,r,s)=>class extends t{constructor(t,o){let a=r(t),l=n(a,{...eO,...o}),u=s(a);super(t,!1,l,u?i():null),this._pan=e(this,u,l.pan)}get pan(){return this._pan}})(e2,ns,nq,nB,eQ,e$),nL=((t,e,n)=>()=>{let i=new WeakMap,r=async(r,s)=>{let o=e(r);return $(o,s)||(o=t(s,{channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,curve:o.curve,oversample:o.oversample})),i.set(s,o),t_(o)?await n(r,s,o.inputs[0]):await n(r,s,o),o};return{render(t,e){let n=i.get(e);return void 0!==n?Promise.resolve(n):r(t,e)}}})(nN,tk,eG),nW=((t,e,n,i,r,s,o)=>class extends t{constructor(t,e){let a=r(t),l=n(a,{...eM,...e});super(t,!0,l,s(a)?i():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=l,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(t){if(null===t)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(t.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=t}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(t){this._nativeWaveShaperNode.oversample=t}})(e2,t3,nN,nL,eQ,e$,nu),nz=(t=>null!==t&&t.isSecureContext)(eL),nG=(t=>(e,n,i)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get:()=>Math.round(e*n)},currentTime:{configurable:!0,get:()=>e}});try{return i()}finally{null!==t&&(delete t.currentFrame,delete t.currentTime)}})(eL),nQ=new WeakMap,nH=((t,e)=>n=>{let i=t.get(n);if(void 0!==i)return i;if(null===e)throw Error("Missing the native OfflineAudioContext constructor.");return i=new e(1,1,44100),t.set(n,i),i})(nQ,eH),n$=((t,e,n,i,r,s,o,a,l,u,h,c,p,d,f,m,g,v,y,b)=>class extends f{constructor(e,n){super(e,n),this._nativeContext=e,this._audioWorklet=void 0===t?void 0:{addModule:(e,n)=>t(this,e,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(t,e,i){return new n({length:e,numberOfChannels:t,sampleRate:i})}createBufferSource(){return new i(this)}createChannelMerger(t=6){return new s(this,{numberOfInputs:t})}createChannelSplitter(t=6){return new o(this,{numberOfOutputs:t})}createConstantSource(){return new a(this)}createConvolver(){return new l(this)}createDelay(t=1){return new h(this,{maxDelayTime:t})}createDynamicsCompressor(){return new c(this)}createGain(){return new p(this)}createIIRFilter(t,e){return new d(this,{feedback:e,feedforward:t})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(t,e,n={disableNormalization:!1}){return new v(this,{...n,imag:e,real:t})}createStereoPanner(){return new y(this)}createWaveShaper(){return new b(this)}decodeAudioData(t,e,n){return u(this._nativeContext,t).then(t=>("function"==typeof e&&e(t),t),t=>{throw"function"==typeof n&&n(t),t})}})(nz?((t,e,n,i,r,s,o,a,l,u,h,c,p)=>{let d=0;return(f,m,g={credentials:"omit"})=>{let v=h.get(f);if(void 0!==v&&v.has(m))return Promise.resolve();let y=u.get(f);if(void 0!==y){let t=y.get(m);if(void 0!==t)return t}let b=s(f),w=void 0===b.audioWorklet?r(m).then(([t,e])=>{let[i,r]=V(t,e);return n(`${i};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${r}
})})(window,'_AWGS')`)}).then(()=>{let t=p._AWGS.pop();if(void 0===t)throw SyntaxError();i(b.currentTime,b.sampleRate,()=>t(class{},void 0,(t,n)=>{if(""===t.trim())throw e();let i=E.get(b);if(void 0!==i){if(i.has(t))throw e();F(n),U(n.parameterDescriptors),i.set(t,n)}else F(n),U(n.parameterDescriptors),E.set(b,new Map([[t,n]]))},b.sampleRate,void 0,void 0))}):Promise.all([r(m),Promise.resolve(t(c,c))]).then(([[t,e],n])=>{let i=d+1;d=i;let[r,s]=V(t,e),u=new Blob([`${r};((AudioWorkletProcessor,registerProcessor)=>{${s}
})(${n?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${n?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${n?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${i}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),h=URL.createObjectURL(u);return b.audioWorklet.addModule(h,g).then(()=>{if(a(b))return b;let t=o(b);return t.audioWorklet.addModule(h,g).then(()=>t)}).then(t=>{if(null===l)throw SyntaxError();try{new l(t,`__sac${i}`)}catch{throw SyntaxError()}}).finally(()=>URL.revokeObjectURL(h))});return void 0===y?u.set(f,new Map([[m,w]])):y.set(m,w),w.then(()=>{let t=h.get(f);void 0===t?h.set(f,new Set([m])):t.add(m)}).finally(()=>{let t=u.get(f);void 0!==t&&t.delete(m)}),w}})(ej,ex,(t=>e=>new Promise((n,i)=>{if(null===t){i(SyntaxError());return}let r=t.document.head;if(null===r)i(SyntaxError());else{let s=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),l=t.onerror,u=()=>{t.onerror=l,URL.revokeObjectURL(a)};t.onerror=(e,n,r,s,o)=>n===a||n===t.location.href&&1===r&&1===s?(u(),i(o),!1):null!==l?l(e,n,r,s,o):void 0,s.onerror=()=>{u(),i(SyntaxError())},s.onload=()=>{u(),n()},s.src=a,s.type="module",r.appendChild(s)}}))(eL),nG,(s=()=>new DOMException("","AbortError"),async t=>{try{let e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw s()}),eQ,nH,e$,e1,new WeakMap,new WeakMap,((t,e)=>async()=>{if(null===t)return!0;if(null===e)return!1;let n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),i=new e(1,128,44100),r=URL.createObjectURL(n),s=!1,o=!1;try{await i.audioWorklet.addModule(r);let e=new t(i,"a",{numberOfOutputs:0}),n=i.createOscillator();e.port.onmessage=()=>s=!0,e.onprocessorerror=()=>o=!0,n.connect(e),n.start(0),await i.startRendering(),await new Promise(t=>setTimeout(t))}catch{}finally{URL.revokeObjectURL(r)}return s&&!o})(e1,eH),eL):void 0,e8,e9,no,nh,nd,nf,ng,nv,((t,e,n,i,r,s,o,a,l,u,h)=>(c,p)=>{let d=o(c)?c:s(c);if(r.has(p))return Promise.reject(n());try{r.add(p)}catch{}return e(l,()=>l(d))?d.decodeAudioData(p).then(n=>(tJ(p).catch(()=>{}),e(a,()=>a(n))||h(n),t.add(n),n)):new Promise((e,n)=>{let r=async()=>{try{await tJ(p)}catch{}},s=t=>{n(t),r()};try{d.decodeAudioData(p,n=>{"function"!=typeof n.copyFromChannel&&(u(n),Z(n)),t.add(n),r().then(()=>e(n))},t=>{null===t?s(i()):s(t)})}catch(t){s(t)}})})(e3,ej,()=>new DOMException("","DataCloneError"),()=>new DOMException("","EncodingError"),new WeakSet,eQ,t=>eJ(t)||e$(t),Y,ee,e4,e7),ny,nw,nT,nC,nO,nE,nU,nF,nj,nW),nY=((t,e,n,i)=>class extends t{constructor(t,r){let s=n(t),o=e(s,r);if(i(s))throw TypeError();super(t,!0,o,null),this._nativeMediaElementAudioSourceNode=o}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(e2,(t,e)=>t.createMediaElementSource(e.mediaElement),eQ,e$),nX=((t,e,n,i)=>class extends t{constructor(t,r){let s=n(t);if(i(s))throw TypeError();let o=e(s,{...et,...r});super(t,!1,o,null),this._nativeMediaStreamAudioDestinationNode=o}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(e2,(t,e)=>{let n=t.createMediaStreamDestination();return ei(n,e),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},eQ,e$),nZ=((t,e,n,i)=>class extends t{constructor(t,r){let s=n(t),o=e(s,r);if(i(s))throw TypeError();super(t,!0,o,null),this._nativeMediaStreamAudioSourceNode=o}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(e2,(t,{mediaStream:e})=>{let n=e.getAudioTracks();n.sort((t,e)=>t.id<e.id?-1:+(t.id>e.id));let i=n.slice(0,1),r=t.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(r,"mediaStream",{value:e}),r},eQ,e$),nJ=((t,e,n)=>class extends t{constructor(t,i){super(t,!0,e(n(t),i),null)}})(e2,(t,{mediaStreamTrack:e})=>{if("function"==typeof t.createMediaStreamTrackSource)return t.createMediaStreamTrackSource(e);let n=new MediaStream([e]),i=t.createMediaStreamSource(n);if("audio"!==e.kind)throw t3();if(e$(t))throw TypeError();return i},eQ),nK=((t,e,n,i,r,s,o,a,l)=>class extends t{constructor(t={}){let e;if(null===l)throw Error("Missing the native AudioContext constructor.");try{e=new l(t)}catch(t){if(12===t.code&&"sampleRate is not in range"===t.message)throw n();throw t}if(null===e)throw i();if(!tc(t.latencyHint))throw TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==t.sampleRate&&e.sampleRate!==t.sampleRate)throw n();super(e,2);let{latencyHint:r}=t,{sampleRate:s}=e;if(this._baseLatency="number"==typeof e.baseLatency?e.baseLatency:"balanced"===r?512/s:"interactive"===r||void 0===r?256/s:"playback"===r?1024/s:128*Math.max(2,Math.min(128,Math.round(r*s/128)))/s,this._nativeAudioContext=e,"webkitAudioContext"===l.name?(this._nativeGainNode=e.createGain(),this._nativeOscillatorNode=e.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(e.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===e.state){this._state="suspended";let t=()=>{"suspended"===this._state&&(this._state=null),e.removeEventListener("statechange",t)};e.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw e()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),th(this)}))}createMediaElementSource(t){return new r(this,{mediaElement:t})}createMediaStreamDestination(){return new s(this)}createMediaStreamSource(t){return new o(this,{mediaStream:t})}createMediaStreamTrackSource(t){return new a(this,{mediaStreamTrack:t})}resume(){return"suspended"===this._state?new Promise((t,e)=>{let n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",n)}):this._nativeAudioContext.resume().catch(t=>{if(void 0===t||15===t.code)throw e();throw t})}suspend(){return this._nativeAudioContext.suspend().catch(t=>{if(void 0===t)throw e();throw t})}})(n$,t3,ex,eI,nY,nX,nZ,nJ,eZ),n0=t=>{let e=nS.get(t);if(void 0===e)throw Error("The context has no set of AudioWorkletNodes.");return e},n1=(t,e,n=0,i=0)=>{let r=t[n];if(void 0===r)throw X();return tM(e)?r.connect(e,0,i):r.connect(e,0)},n2=(t=>(e,n,i,r=0)=>void 0===n?e.forEach(t=>t.disconnect()):"number"==typeof n?t1(t,e,n).disconnect():tM(n)?void 0===i?e.forEach(t=>t.disconnect(n)):void 0===r?t1(t,e,i).disconnect(n,0):t1(t,e,i).disconnect(n,0,r):void 0===i?e.forEach(t=>t.disconnect(n)):t1(t,e,i).disconnect(n,0))(X),n8=new WeakMap,n3=((t,e,n,i,r,s,o,a,l,u,h,c,p)=>(d,f,m,g)=>{let v,y;if(0===g.numberOfInputs&&0===g.numberOfOutputs)throw l();let b=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(b.some(t=>t<1))throw l();if(b.length!==g.numberOfOutputs)throw e();if("explicit"!==g.channelCountMode)throw l();let w=g.channelCount*g.numberOfInputs,T=b.reduce((t,e)=>t+e,0),x=void 0===m.parameterDescriptors?0:m.parameterDescriptors.length;if(w+x>6||T>6)throw l();let k=new MessageChannel,C=[],A=[];for(let t=0;t<g.numberOfInputs;t+=1)C.push(o(d,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),A.push(r(d,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));let S=[];if(void 0!==m.parameterDescriptors)for(let{defaultValue:t,maxValue:e,minValue:n,name:i}of m.parameterDescriptors){let r=s(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==g.parameterData[i]?g.parameterData[i]:void 0===t?0:t});Object.defineProperties(r.offset,{defaultValue:{get:()=>void 0===t?0:t},maxValue:{get:()=>void 0===e?34028234663852886e22:e},minValue:{get:()=>void 0===n?-34028234663852886e22:n}}),S.push(r)}let O=i(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,w+x)}),I=ec(f,d.sampleRate),M=a(d,I,w+x,Math.max(1,T)),E=r(d,{channelCount:Math.max(1,T),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,T)}),R=[];for(let t=0;t<g.numberOfOutputs;t+=1)R.push(i(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:b[t]}));for(let t=0;t<g.numberOfInputs;t+=1){C[t].connect(A[t]);for(let e=0;e<g.channelCount;e+=1)A[t].connect(O,e,t*g.channelCount+e)}let D=new tB(void 0===m.parameterDescriptors?[]:m.parameterDescriptors.map(({name:t},e)=>{let n=S[e];return n.connect(O,0,w+e),n.start(0),[t,n.offset]}));O.connect(M);let N=g.channelInterpretation,P=null,V=0===g.numberOfOutputs?[M]:R,U={get bufferSize(){return I},get channelCount(){return g.channelCount},set channelCount(_){throw n()},get channelCountMode(){return g.channelCountMode},set channelCountMode(_){throw n()},get channelInterpretation(){return N},set channelInterpretation(value){for(let t of C)t.channelInterpretation=value;N=value},get context(){return M.context},get inputs(){return C},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return P},set onprocessorerror(value){"function"==typeof P&&U.removeEventListener("processorerror",P),"function"==typeof(P="function"==typeof value?value:null)&&U.addEventListener("processorerror",P)},get parameters(){return D},get port(){return k.port2},addEventListener:(...t)=>M.addEventListener(t[0],t[1],t[2]),connect:t.bind(null,V),disconnect:u.bind(null,V),dispatchEvent:(...t)=>M.dispatchEvent(t[0]),removeEventListener:(...t)=>M.removeEventListener(t[0],t[1],t[2])},F=new Map;k.port1.addEventListener=(v=k.port1.addEventListener,(...t)=>{if("message"===t[0]){let e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){let n=F.get(t[1]);void 0!==n?t[1]=n:(t[1]=t=>{h(d.currentTime,d.sampleRate,()=>e(t))},F.set(e,t[1]))}}return v.call(k.port1,t[0],t[1],t[2])}),k.port1.removeEventListener=(y=k.port1.removeEventListener,(...t)=>{if("message"===t[0]){let e=F.get(t[1]);void 0!==e&&(F.delete(t[1]),t[1]=e)}return y.call(k.port1,t[0],t[1],t[2])});let q=null;Object.defineProperty(k.port1,"onmessage",{get:()=>q,set:t=>{"function"==typeof q&&k.port1.removeEventListener("message",q),"function"==typeof(q="function"==typeof t?t:null)&&(k.port1.addEventListener("message",q),k.port1.start())}}),m.prototype.port=k.port1;let B=null;ef(d,U,m,g).then(t=>B=t);let j=tz(g.numberOfInputs,g.channelCount),L=tz(g.numberOfOutputs,b),W=void 0===m.parameterDescriptors?[]:m.parameterDescriptors.reduce((t,{name:e})=>({...t,[e]:new Float32Array(128)}),{}),z=!0,G=()=>{g.numberOfOutputs>0&&M.disconnect(E);for(let t=0,e=0;t<g.numberOfOutputs;t+=1){let n=R[t];for(let i=0;i<b[t];i+=1)E.disconnect(n,e+i,i);e+=b[t]}},Q=new Map;M.onaudioprocess=({inputBuffer:t,outputBuffer:e})=>{if(null!==B){let n=c(U);for(let i=0;i<I;i+=128){for(let e=0;e<g.numberOfInputs;e+=1)for(let n=0;n<g.channelCount;n+=1)tL(t,j[e],n,n,i);void 0!==m.parameterDescriptors&&m.parameterDescriptors.forEach(({name:e},n)=>{tL(t,W,e,w+n,i)});for(let t=0;t<g.numberOfInputs;t+=1)for(let e=0;e<b[t];e+=1)0===L[t][e].byteLength&&(L[t][e]=new Float32Array(128));try{let t=j.map((t,e)=>{if(n[e].size>0)return Q.set(e,I/128),t;let i=Q.get(e);return void 0===i?[]:(t.every(t=>t.every(t=>0===t))&&(1===i?Q.delete(e):Q.set(e,i-1)),t)});z=h(d.currentTime+i/d.sampleRate,d.sampleRate,()=>B.process(t,L,W));for(let t=0,n=0;t<g.numberOfOutputs;t+=1){for(let r=0;r<b[t];r+=1)tW(e,L[t],r,n+r,i);n+=b[t]}}catch(t){z=!1,U.dispatchEvent(new ErrorEvent("processorerror",{colno:t.colno,filename:t.filename,lineno:t.lineno,message:t.message}))}if(!z){for(let t=0;t<g.numberOfInputs;t+=1){C[t].disconnect(A[t]);for(let e=0;e<g.channelCount;e+=1)A[i].disconnect(O,e,t*g.channelCount+e)}if(void 0!==m.parameterDescriptors){let t=m.parameterDescriptors.length;for(let e=0;e<t;e+=1){let t=S[e];t.disconnect(O,0,w+e),t.stop()}}O.disconnect(M),M.onaudioprocess=null,H?G():X();break}}}};let H=!1,$=o(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Y=()=>M.connect($).connect(d.destination),X=()=>{M.disconnect($),$.disconnect()};return Y(),p(U,()=>{if(z){X(),g.numberOfOutputs>0&&M.connect(E);for(let t=0,e=0;t<g.numberOfOutputs;t+=1){let n=R[t];for(let i=0;i<b[t];i+=1)E.connect(n,e+i,i);e+=b[t]}}H=!0},()=>{z&&(Y(),G()),H=!1})})(n1,X,t3,np,e_,nm,eb,eT,ex,n2,nG,t=>q(n8,t),nc),n5=((t,e,n,i,r)=>(s,o,a,l,u,h)=>{if(null!==a)try{let e=new a(s,l,h),i=new Map,o=null;if(Object.defineProperties(e,{channelCount:{get:()=>h.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>o,set:t=>{"function"==typeof o&&e.removeEventListener("processorerror",o),o="function"==typeof t?t:null,"function"==typeof o&&e.addEventListener("processorerror",o)}}}),e.addEventListener=(t=>(...n)=>{if("processorerror"===n[0]){let t="function"==typeof n[1]?n[1]:"object"==typeof n[1]&&null!==n[1]&&"function"==typeof n[1].handleEvent?n[1].handleEvent:null;if(null!==t){let e=i.get(n[1]);void 0!==e?n[1]=e:(n[1]=e=>{"error"===e.type?(Object.defineProperties(e,{type:{value:"processorerror"}}),t(e)):t(new ErrorEvent(n[0],{...e}))},i.set(t,n[1]))}}return t.call(e,"error",n[1],n[2]),t.call(e,...n)})(e.addEventListener),e.removeEventListener=(t=>(...n)=>{if("processorerror"===n[0]){let t=i.get(n[1]);void 0!==t&&(i.delete(n[1]),n[1]=t)}return t.call(e,"error",n[1],n[2]),t.call(e,n[0],n[1],n[2])})(e.removeEventListener),0!==h.numberOfOutputs){let t=n(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return e.connect(t).connect(s.destination),r(e,()=>t.disconnect(),()=>t.connect(s.destination))}return e}catch(t){if(11===t.code)throw i();throw t}if(void 0===u)throw i();return eh(h),e(s,o,u,h)})(t3,n3,eb,ex,nc),n6=((t,e,n,i,r,s,o,a,l,u,h,c,p,d,f,m)=>(g,v,y)=>{let b=new WeakMap,w=null,T=async(a,T)=>{let x=h(a),k=null,C=$(x,T),A=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(null===c){let t=A.reduce((t,e)=>t+e,0),n=r(T,{channelCount:Math.max(1,t),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,t)}),s=[];for(let t=0;t<a.numberOfOutputs;t+=1)s.push(i(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:A[t]}));let u=o(T,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});u.connect=e.bind(null,s),u.disconnect=l.bind(null,s),k=[n,s,u]}else C||(x=new c(T,g));if(b.set(T,null===k?x:k[2]),null!==k){if(null===w){if(void 0===y)throw Error("Missing the processor constructor.");if(null===p)throw Error("Missing the native OfflineAudioContext constructor.");let t=a.channelCount*a.numberOfInputs,e=void 0===y.parameterDescriptors?0:y.parameterDescriptors.length,n=t+e,l=async()=>{let l=new p(n,128*Math.ceil(a.context.length/128),T.sampleRate),u=[],h=[];for(let t=0;t<v.numberOfInputs;t+=1)u.push(o(l,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),h.push(r(l,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));let c=await Promise.all(Array.from(a.parameters.values()).map(async t=>{let e=s(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:t.value});return await d(l,t,e.offset),e})),g=i(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,t+e)});for(let t=0;t<v.numberOfInputs;t+=1){u[t].connect(h[t]);for(let e=0;e<v.channelCount;e+=1)h[t].connect(g,e,t*v.channelCount+e)}for(let[e,n]of c.entries())n.connect(g,0,t+e),n.start(0);return g.connect(l.destination),await Promise.all(u.map(t=>f(a,l,t))),m(l)};w=tQ(a,0===n?null:await l(),T,v,A,y,u)}let t=await w,e=n(T,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[l,h,c]=k;null!==t&&(e.buffer=t,e.start(0)),e.connect(l);for(let t=0,e=0;t<a.numberOfOutputs;t+=1){let n=h[t];for(let i=0;i<A[t];i+=1)l.connect(n,e+i,i);e+=A[t]}return c}if(C)for(let[e,n]of a.parameters.entries())await t(T,n,x.parameters.get(e));else for(let[t,e]of a.parameters.entries())await d(T,e,x.parameters.get(t));return await f(a,T,x),x};return{render(t,e){a(e,t);let n=b.get(e);return void 0!==n?Promise.resolve(n):T(t,e)}}})(nn,n1,ni,np,e_,nm,eb,(t,e)=>{n0(t).delete(e)},n2,nG,tk,e1,eH,nr,eG,nk),n4=nz?((t,e,n,i,r,s,o,a,l,u,h,c,p,d)=>class extends e{constructor(e,d,f){var m;let g=a(e),v=l(g),y=h({...tj,...f});p(y);let b=E.get(g),w=null==b?void 0:b.get(d),T=r(v||"closed"!==g.state?g:null!==(m=o(g))&&void 0!==m?m:g,v?null:e.baseLatency,u,d,w,y);super(e,!0,T,v?i(d,y,w):null);let x=[];T.parameters.forEach((t,e)=>{let i=n(this,v,t);x.push([e,i])}),this._nativeAudioWorkletNode=T,this._onprocessorerror=null,this._parameters=new tB(x),v&&t(g,this);let{activeInputs:k}=s(this);c(T,k)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(t){let e="function"==typeof t?d(this,t):null;this._nativeAudioWorkletNode.onprocessorerror=e;let n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===e?t:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})((t,e)=>{n0(t).add(e)},e2,ns,n6,n5,ta,t=>nQ.get(t),eQ,e$,e1,t=>({...t,outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),(t,e)=>{n8.set(t,e)},t=>{let{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},eq):void 0,n7=((t,e)=>(n,i,r)=>{if(null===e)throw Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,i,r)}catch(e){if("SyntaxError"===e.name)throw t();throw e}})(ex,eH),n9=((t,e,n,i,r,s,o,a)=>(l,u)=>n(l).render(l,u).then(()=>Promise.all(Array.from(i(u)).map(t=>n(t).render(t,u)))).then(()=>r(u)).then(n=>("function"!=typeof n.copyFromChannel?(o(n),Z(n)):e(s,()=>s(n))||a(n),t.add(n),n)))(e3,ej,ez,n0,nk,Y,e4,e7),it=((t,e,n,i,r)=>class extends t{constructor(t,n,r){let s;if("number"==typeof t&&void 0!==n&&void 0!==r)s={length:n,numberOfChannels:t,sampleRate:r};else if("object"==typeof t)s=t;else throw Error("The given parameters are not valid.");let{length:o,numberOfChannels:a,sampleRate:l}={...ek,...s},u=i(a,o,l);e(ee,()=>ee(u))||u.addEventListener("statechange",(()=>{let t=0,e=n=>{"running"===this._state&&(t>0?(u.removeEventListener("statechange",e),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):t+=1)};return e})()),super(u,a),this._length=o,this._nativeOfflineAudioContext=u,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,th(this)}))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout(()=>this._waitForThePromiseToSettle(t))}})(n$,ej,t3,n7,n9),ie=((t,e)=>n=>e(t.get(n))||e(n))(O,eJ),ii=t=>C.has(t)||eK(t),ir=t=>S.has(t)||e0(t),is=((t,e)=>n=>e(t.get(n))||e(n))(O,e$);function io(t){return void 0===t}function ia(t){return void 0!==t}function il(t){return"number"==typeof t}function iu(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function ih(t){return Array.isArray(t)}function ic(t){return"string"==typeof t}function ip(t){return ic(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function id(t,e){if(!t)throw Error(e)}function im(t,e,n=1/0){if(!(e<=t&&t<=n))throw RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function ig(t){t.isOffline||"running"===t.state||ib('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let i_=!1,iv=!1,iy=console;function ib(...t){iy.warn(...t)}let iw="object"==typeof self?self:null,iT=iw&&(iw.hasOwnProperty("AudioContext")||iw.hasOwnProperty("webkitAudioContext"));var ix=n(39249);class ik{constructor(t,e,n,i){this._callback=t,this._type=e,this._minimumUpdateInterval=Math.max(128/(i||44100),.001),this.updateInterval=n,this._createClock()}_createWorker(){let t=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),e=new Worker(URL.createObjectURL(t));e.onmessage=this._callback.bind(this),this._worker=e}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){var e;this._updateInterval=Math.max(t,this._minimumUpdateInterval),"worker"===this._type&&(null===(e=this._worker)||void 0===e||e.postMessage(1e3*this._updateInterval))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function iC(t,...e){if(!e.length)return t;let n=e.shift();if(iu(t)&&iu(n))for(let e in n){var i,r;(i=e,r=n[e],"value"===i||ir(r)||ii(r)||r instanceof e9)?t[e]=n[e]:iu(n[e])?(t[e]||Object.assign(t,{[e]:{}}),iC(t[e],n[e])):Object.assign(t,{[e]:n[e]})}return iC(t,...e)}function iA(t,e,n=[],i){let r={},s=Array.from(e);if(iu(s[0])&&i&&!Reflect.has(s[0],i)&&!Object.keys(s[0]).some(e=>Reflect.has(t,e))&&(iC(r,{[i]:s[0]}),n.splice(n.indexOf(i),1),s.shift()),1===s.length&&iu(s[0]))iC(r,s[0]);else for(let t=0;t<n.length;t++)ia(s[t])&&(r[n[t]]=s[t]);return iC(t,r)}function iS(t,e){return io(t)?e:t}function iO(t,e){return e.forEach(e=>{Reflect.has(t,e)&&delete t[e]}),t}class iI{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||iw&&this.toString()===iw.TONE_DEBUG_CLASS)&&function(...t){iy.log(...t)}(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}function iM(t,e){return t>e+1e-6}function iE(t,e){return iM(t,e)||iD(t,e)}function iR(t,e){return t+1e-6<e}function iD(t,e){return 1e-6>Math.abs(t-e)}function iN(t,e,n){return Math.max(Math.min(t,n),e)}iI.version=v;class iP extends iI{constructor(){super(),this.name="Timeline",this._timeline=[];let t=iA(iP.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(id(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){let e=this._timeline[this.length-1];id(iE(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{let e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){let t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(t){let e=this._timeline.indexOf(t);return -1!==e&&this._timeline.splice(e,1),this}get(t,e="time"){let n=this._search(t,e);return -1!==n?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){let n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(t){let e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];let n=this._search(t);return n-1>=0?this._timeline[n-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0){if(iD(this._timeline[e].time,t)){for(let n=e;n>=0;n--)if(iD(this._timeline[n].time,t))e=n;else break;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1)}else this._timeline=[]}else 1===this._timeline.length&&iE(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){let e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){let e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(0===this._timeline.length)return -1;let n=0,i=this._timeline.length,r=i;if(i>0&&this._timeline[i-1][e]<=t)return i-1;for(;n<r;){let i=Math.floor(n+(r-n)/2),s=this._timeline[i],o=this._timeline[i+1];if(iD(s[e],t)){for(let n=i;n<this._timeline.length;n++)if(iD(this._timeline[n][e],t))i=n;else break;return i}if(iR(s[e],t)&&iM(o[e],t))return i;iM(s[e],t)?r=i:n=i+1}return -1}_iterate(t,e=0,n=this._timeline.length-1){this._timeline.slice(e,n+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){let n=this._search(t);return -1!==n&&this._iterate(e,0,n),this}forEachAfter(t,e){let n=this._search(t);return this._iterate(e,n+1),this}forEachBetween(t,e,n){let i=this._search(t),r=this._search(e);return -1!==i&&-1!==r?(this._timeline[i].time!==t&&(i+=1),this._timeline[r].time===e&&(r-=1),this._iterate(n,i,r)):-1===i&&this._iterate(n,0,r),this}forEachFrom(t,e){let n=this._search(t);for(;n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this}forEachAtTime(t,e){let n=this._search(t);if(-1!==n&&iD(this._timeline[n].time,t)){let i=n;for(let e=n;e>=0;e--)if(iD(this._timeline[e].time,t))i=e;else break;this._iterate(t=>{e(t)},i,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}let iV=[];function iU(t){iV.push(t)}let iF=[];function iq(t){iF.push(t)}class iB extends iI{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach(t=>{io(this._events)&&(this._events={}),this._events.hasOwnProperty(t)||(this._events[t]=[]),this._events[t].push(e)}),this}once(t,e){let n=(...i)=>{e(...i),this.off(t,n)};return this.on(t,n),this}off(t,e){return t.split(/\W+/).forEach(t=>{if(io(this._events)&&(this._events={}),this._events.hasOwnProperty(t)){if(io(e))this._events[t]=[];else{let n=this._events[t];for(let t=n.length-1;t>=0;t--)n[t]===e&&n.splice(t,1)}}}),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){let n=this._events[t].slice(0);for(let t=0,i=n.length;t<i;t++)n[t].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach(e=>{let n=Object.getOwnPropertyDescriptor(iB.prototype,e);Object.defineProperty(t.prototype,e,n)})}dispose(){return super.dispose(),this._events=void 0,this}}class ij extends iB{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class iL extends ij{constructor(){var t,e;super(),this.name="Context",this._constants=new Map,this._timeouts=new iP,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;let n=iA(iL.getDefaults(),arguments,["context"]);n.context?(this._context=n.context,this._latencyHint=(null===(t=arguments[0])||void 0===t?void 0:t.latencyHint)||""):(this._context=new nK({latencyHint:n.latencyHint}),this._latencyHint=n.latencyHint),this._ticker=new ik(this.emit.bind(this,"tick"),n.clockSource,n.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[(null===(e=arguments[0])||void 0===e?void 0:e.hasOwnProperty("updateInterval"))?"_lookAhead":"lookAhead"]=n.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){if(!this._initialized){var t;t=this,iV.forEach(e=>e(t)),this._initialized=!0}return this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,n){return this._context.createBuffer(t,e,n)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,n){return this._context.createPeriodicWave(t,e,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return id(ie(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return id(ie(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return id(ie(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){id(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){id(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){id(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){id(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){var n;return n=this.rawContext,id(ia(n4),"AudioWorkletNode only works in a secure context (https or localhost)"),new(n instanceof(null==iw?void 0:iw.BaseAudioContext)?null==iw?void 0:iw.AudioWorkletNode:n4)(n,t,e)}addAudioWorkletModule(t){return(0,ix.sH)(this,void 0,void 0,function*(){id(ia(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(t)),yield this._workletPromise})}workletsAreReady(){return(0,ix.sH)(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get lookAhead(){return this._lookAhead}set lookAhead(t){this._lookAhead=t,this.updateInterval=t?t/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return ie(this._context)?this._context.resume():Promise.resolve()}close(){return(0,ix.sH)(this,void 0,void 0,function*(){if(ie(this._context)&&"closed"!==this.state&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized){var t;t=this,iF.forEach(e=>e(t))}})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{let e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0);for(let e=0;e<n.length;e++)n[e]=t;let i=this._context.createBufferSource();return i.channelCount=1,i.channelCountMode="explicit",i.buffer=e,i.loop=!0,i.start(0),this._constants.set(t,i),i}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this.close(),this}_timeoutLoop(){let t=this.now();this._timeouts.forEachBefore(t,t=>{t.callback(),this._timeouts.remove(t)})}setTimeout(t,e){this._timeoutIds++;let n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){let n=++this._timeoutIds,i=()=>{let r=this.now();this._timeouts.add({callback:()=>{t(),i()},id:n,time:r+e})};return i(),n}}class iW extends ij{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,n){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t){return(0,ix.sH)(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}function iz(t,e){ih(e)?e.forEach(e=>iz(t,e)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}let iG=()=>{};class iQ extends iI{constructor(){super(),this.name="ToneAudioBuffer",this.onload=iG;let t=iA(iQ.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,ic(t.url)?this.load(t.url).catch(t.onerror):t.url&&this.set(t.url)}static getDefaults(){return{onerror:iG,onload:iG,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:iX().sampleRate}set(t){return t instanceof iQ?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return(0,ix.sH)(this,void 0,void 0,function*(){let e=iQ.load(t).then(t=>{this.set(t),this.onload(this)});iQ.downloads.push(e);try{yield e}finally{let t=iQ.downloads.indexOf(e);iQ.downloads.splice(t,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){let e=ih(t)&&t[0].length>0,n=e?t.length:1,i=e?t[0].length:t.length,r=iX(),s=r.createBuffer(n,i,r.sampleRate),o=e||1!==n?t:[t];for(let t=0;t<n;t++)s.copyToChannel(o[t],t);return this._buffer=s,this}toMono(t){if(il(t))this.fromArray(this.toArray(t));else{let t=new Float32Array(this.length),e=this.numberOfChannels;for(let n=0;n<e;n++){let e=this.toArray(n);for(let n=0;n<e.length;n++)t[n]+=e[n]}t=t.map(t=>t/e),this.fromArray(t)}return this}toArray(t){if(il(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);{let t=[];for(let e=0;e<this.numberOfChannels;e++)t[e]=this.getChannelData(e);return t}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){id(this.loaded,"Buffer is not loaded");let n=Math.floor(t*this.sampleRate),i=Math.floor(e*this.sampleRate);id(n<i,"The start time must be less than the end time");let r=iX().createBuffer(this.numberOfChannels,i-n,this.sampleRate);for(let t=0;t<this.numberOfChannels;t++)r.copyToChannel(this.getChannelData(t).subarray(n,i),t);return new iQ(r)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new iQ().fromArray(t)}static fromUrl(t){return(0,ix.sH)(this,void 0,void 0,function*(){let e=new iQ;return yield e.load(t)})}static load(t){return(0,ix.sH)(this,void 0,void 0,function*(){let e=""===iQ.baseUrl||iQ.baseUrl.endsWith("/")?iQ.baseUrl:iQ.baseUrl+"/",n=yield fetch(e+t);if(!n.ok)throw Error(`could not load url: ${t}`);let i=yield n.arrayBuffer();return yield iX().decodeAudioData(i)})}static supportsType(t){let e=t.split("."),n=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}static loaded(){return(0,ix.sH)(this,void 0,void 0,function*(){for(yield Promise.resolve();iQ.downloads.length;)yield iQ.downloads[0]})}}iQ.baseUrl="",iQ.downloads=[];class iH extends iL{constructor(){var t,e,n,i,r,s;super({clockSource:"offline",context:(t=arguments[0],is(t))?arguments[0]:(e=arguments[0],n=arguments[1]*arguments[2],i=arguments[2],new it(e,n,i)),lookAhead:0,updateInterval:(r=arguments[0],is(r))?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,s=arguments[0],this._duration=is(s)?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return(0,ix.sH)(this,void 0,void 0,function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;let n=Math.floor(this.sampleRate/128);t&&e%n==0&&(yield new Promise(t=>setTimeout(t,1)))}})}render(){return(0,ix.sH)(this,arguments,void 0,function*(t=!0){return yield this.workletsAreReady(),yield this._renderClock(t),new iQ((yield this._context.startRendering()))})}close(){return Promise.resolve()}}let i$=new iW,iY=i$;function iX(){return iY===i$&&iT&&function(t,e=!1){e&&iY.dispose(),iY=ie(t)?new iL(t):is(t)?new iH(t):t}(new iL),iY}function iZ(){return iY.resume()}if(iw&&!iw.TONE_SILENCE_LOGGING){let t=` * Tone.js v${v} * `;console.log(`%c${t}`,"background: #000; color: #fff")}function iJ(t){return Math.pow(2,t/12)}let iK=440;function i0(t){return Math.round(i1(t))}function i1(t){return 69+12*Math.log2(t/iK)}function i2(t){return iK*Math.pow(2,(t-69)/12)}class i8 extends iI{constructor(t,e,n){super(),this.defaultUnits="s",this._val=e,this._units=n,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{let n=parseInt(t,10),i="."===e?1.5:1;return 1===n?this._beatsToUnits(this._getTimeSignature())*i:this._beatsToUnits(4/n)*i},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{let e=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(e)))},regexp:/^(\d+)t$/i},tr:{method:(t,e,n)=>{let i=0;return t&&"0"!==t&&(i+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(i+=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(i+=this._beatsToUnits(parseFloat(n)/4)),i},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof i8&&this.fromType(this._val),io(this._val))return this._noArg();if(ic(this._val)&&io(this._units)){for(let t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(iu(this._val)){let t=0;for(let e in this._val)if(ia(this._val[e])){let n=this._val[e];t+=new this.constructor(this.context,e).valueOf()*n}return t}if(ia(this._units)){let t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}return ic(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class i3 extends i8{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{let e=new i3(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){let n=new this.constructor(this.context,t).valueOf(),i=this.valueOf(),r=Math.round(i/n);return i+(r*n-i)*e}toNotation(){let t=this.toSeconds(),e=["1m"];for(let t=1;t<9;t++){let n=Math.pow(2,t);e.push(n+"n."),e.push(n+"n"),e.push(n+"t")}e.push("0");let n=e[0],i=new i3(this.context,e[0]).toSeconds();return e.forEach(e=>{let r=new i3(this.context,e).toSeconds();Math.abs(r-t)<Math.abs(i-t)&&(n=e,i=r)}),n}toBarsBeatsSixteenths(){let t=this._beatsToUnits(1),e=this.valueOf()/t,n=Math.floor((e=parseFloat(e.toFixed(4)))/this._getTimeSignature()),i=e%1*4;e=Math.floor(e)%this._getTimeSignature();let r=i.toString();return r.length>3&&(i=parseFloat(parseFloat(r).toFixed(3))),[n,e,i].join(":")}toTicks(){let t=this._beatsToUnits(1);return this.valueOf()/t*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return i0(this.toFrequency())}_now(){return this.context.now()}}class i5 extends i3{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return iK}static set A4(t){iK=t}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:i5.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(t,e){let n=i6[t.toLowerCase()]+(parseInt(e,10)+1)*12;return"midi"===this.defaultUnits?n:i5.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,n){let i=1;return t&&"0"!==t&&(i*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(i*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(i*=this._beatsToUnits(parseFloat(n)/4)),i}}})}transpose(t){return new i5(this.context,this.valueOf()*iJ(t))}harmonize(t){return t.map(t=>this.transpose(t))}toMidi(){return i0(this.valueOf())}toNote(){let t=Math.round(12*Math.log2(this.toFrequency()/i5.A4))+57,e=Math.floor(t/12);return e<0&&(t+=-12*e),i4[t%12]+e.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){let t=this._beatsToUnits(1);return Math.floor(this.valueOf()/t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return i2(t)}static ftom(t){return i0(t)}}let i6={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},i4=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class i7 extends i3{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class i9 extends iI{constructor(){super();let t=iA(i9.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:iX()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return io(t)&&i_&&!iv&&(iv=!0,ib("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing")),new i3(this.context,t).toSeconds()}toFrequency(t){return new i5(this.context,t).toFrequency()}toTicks(t){return new i7(this.context,t).toTicks()}_getPartialProperties(t){let e=this.get();return Object.keys(e).forEach(n=>{io(t[n])&&delete e[n]}),e}get(){let t=this.constructor.getDefaults();return Object.keys(t).forEach(e=>{if(Reflect.has(this,e)){let n=this[e];ia(n)&&ia(n.value)&&ia(n.setValueAtTime)?t[e]=n.value:n instanceof i9?t[e]=n._getPartialProperties(t[e]):ih(n)||il(n)||ic(n)||"boolean"==typeof n?t[e]=n:delete t[e]}}),t}set(t){return Object.keys(t).forEach(e=>{Reflect.has(this,e)&&ia(this[e])&&(this[e]&&ia(this[e].value)&&ia(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof i9?this[e].set(t[e]):this[e]=t[e])}),this}}class rt extends iP{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){let e=this.get(t);return null!==e?e.state:this._initial}setStateAtTime(t,e,n){return im(e,0),this.add(Object.assign({},n,{state:t,time:e})),this}getLastState(t,e){let n=this._search(e);for(let e=n;e>=0;e--){let n=this._timeline[e];if(n.state===t)return n}}getNextState(t,e){let n=this._search(e);if(-1!==n)for(let e=n;e<this._timeline.length;e++){let n=this._timeline[e];if(n.state===t)return n}}}class re extends i9{constructor(){let t=iA(re.getDefaults(),arguments,["param","units","convert"]);for(super(t),this.name="Param",this.overridden=!1,this._minOutput=1e-7,id(ia(t.param)&&(ir(t.param)||t.param instanceof re),"param must be an AudioParam");!ir(t.param);)t.param=t.param._param;this._swappable=!!ia(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new iP(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,ia(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(i9.getDefaults(),{convert:!0,units:"number"})}get value(){let t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return ia(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return ia(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return ia(this.maxValue)&&ia(this.minValue)&&im(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){if(this.convert&&!this.overridden)return this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?Math.pow(10,t/20):this._is(t,"frequency")?this.toFrequency(t):t;return this.overridden?0:t}_toType(t){return this.convert&&"decibels"===this.units?Math.log(t)/Math.LN10*20:t}setValueAtTime(t,e){let n=this.toSeconds(e),i=this._fromType(t);return id(isFinite(i)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(i),this.log(this.units,"setValueAtTime",t,n),this._events.add({time:n,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,n),this}getValueAtTime(t){let e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),i=this._events.get(e),r=this._initialValue;if(null===i)r=this._initialValue;else if("setTargetAtTime"===i.type&&(null===n||"setValueAtTime"===n.type)){let t;let n=this._events.getBefore(i.time);t=null===n?this._initialValue:n.value,"setTargetAtTime"===i.type&&(r=this._exponentialApproach(i.time,t,i.value,i.constant,e))}else if(null===n)r=i.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){let t=i.value;if("setTargetAtTime"===i.type){let e=this._events.getBefore(i.time);t=null===e?this._initialValue:e.value}r="linearRampToValueAtTime"===n.type?this._linearInterpolate(i.time,t,n.time,n.value,e):this._exponentialInterpolate(i.time,t,n.time,n.value,e)}else r=i.value;return this._toType(r)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){let n=this._fromType(t),i=this.toSeconds(e);return id(isFinite(n)&&isFinite(i),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(n),this._events.add({time:i,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",t,i),this._param.linearRampToValueAtTime(n,i),this}exponentialRampToValueAtTime(t,e){let n=this._fromType(t);n=iD(n,0)?this._minOutput:n,this._assertRange(n);let i=this.toSeconds(e);return id(isFinite(n)&&isFinite(i),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:i,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",t,i),this._param.exponentialRampToValueAtTime(n,i),this}exponentialRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this}linearRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this}targetRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this}exponentialApproachValueAtTime(t,e,n){e=this.toSeconds(e);let i=Math.log((n=this.toSeconds(n))+1)/Math.log(200);return this.setTargetAtTime(t,e,i),this.cancelAndHoldAtTime(e+.9*n),this.linearRampToValueAtTime(t,e+n),this}setTargetAtTime(t,e,n){let i=this._fromType(t);id(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");let r=this.toSeconds(e);return this._assertRange(i),id(isFinite(i)&&isFinite(r),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:n,time:r,type:"setTargetAtTime",value:i}),this.log(this.units,"setTargetAtTime",t,r,n),this._param.setTargetAtTime(i,r,n),this}setValueCurveAtTime(t,e,n,i=1){n=this.toSeconds(n),e=this.toSeconds(e);let r=this._fromType(t[0])*i;this.setValueAtTime(this._toType(r),e);let s=n/(t.length-1);for(let n=1;n<t.length;n++){let r=this._fromType(t[n])*i;this.linearRampToValueAtTime(this._toType(r),e+n*s)}return this}cancelScheduledValues(t){let e=this.toSeconds(t);return id(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){let e=this.toSeconds(t),n=this._fromType(this.getValueAtTime(e));id(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+n);let i=this._events.get(e),r=this._events.getAfter(e);return i&&iD(i.time,e)?r?(this._param.cancelScheduledValues(r.time),this._events.cancel(r.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):r&&(this._param.cancelScheduledValues(r.time),this._events.cancel(r.time),"linearRampToValueAtTime"===r.type?this.linearRampToValueAtTime(this._toType(n),e):"exponentialRampToValueAtTime"===r.type&&this.exponentialRampToValueAtTime(this._toType(n),e)),this._events.add({time:e,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,e),this}rampTo(t,e=.1,n){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this}apply(t){let e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);let n=this._events.get(e);if(n&&"setTargetAtTime"===n.type){let i=this._events.getAfter(n.time),r=i?i.time:e+2,s=(r-e)/10;for(let n=e;n<r;n+=s)t.linearRampToValueAtTime(this.getValueAtTime(n),n)}return this._events.forEachAfter(this.context.currentTime,e=>{"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)}),this}setParam(t){id(this._swappable,"The Param must be assigned as 'swappable' in the constructor");let e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,n,i,r){return n+(e-n)*Math.exp(-(r-t)/i)}_linearInterpolate(t,e,n,i,r){return e+(r-t)/(n-t)*(i-e)}_exponentialInterpolate(t,e,n,i,r){return e*Math.pow(i/e,(r-t)/(n-t))}}class rn extends i9{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return ia(this.input)?ir(this.input)||this.input instanceof re?1:this.input.numberOfInputs:0}get numberOfOutputs(){return ia(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return ia(t)&&(t instanceof rn||ii(t))}_getInternalNodes(){let t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(e=>{e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){let t=this._getInternalNodes();id(t.length>0,"ToneAudioNode does not have any internal nodes");let e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){let e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){let e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){let e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,n=0){return rr(this,t,e,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return ib("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,n=0){return function(t,e,n=0,i=0){if(ia(e))for(;e instanceof rn;)e=e.input;for(;!ii(t);)ia(t.output)&&(t=t.output);ir(e)?t.disconnect(e,n):ii(e)?t.disconnect(e,n,i):t.disconnect()}(this,t,e,n),this}chain(...t){return ri(this,...t),this}fan(...t){return t.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),ia(this.input)&&(this.input instanceof rn?this.input.dispose():ii(this.input)&&this.input.disconnect()),ia(this.output)&&(this.output instanceof rn?this.output.dispose():ii(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function ri(...t){let e=t.shift();t.reduce((t,e)=>(t instanceof rn?t.connect(e):ii(t)&&rr(t,e),e),e)}function rr(t,e,n=0,i=0){for(id(ia(t),"Cannot connect from undefined node"),id(ia(e),"Cannot connect to undefined node"),(e instanceof rn||ii(e))&&id(e.numberOfInputs>0,"Cannot connect to node with no inputs"),id(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof rn||e instanceof re;)ia(e.input)&&(e=e.input);for(;t instanceof rn;)ia(t.output)&&(t=t.output);ir(e)?t.connect(e,n):t.connect(e,n,i)}class rs extends rn{constructor(){let t=iA(rs.getDefaults(),arguments,["gain","units"]);super(t),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new re({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),iz(this,"gain")}static getDefaults(){return Object.assign(rn.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class ro extends rn{constructor(t){super(t),this.onended=iG,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new rs({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){let e=this.toSeconds(t);return -1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(rn.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:iG})}_startGain(t,e=1){id(-1===this._startTime,"Source cannot be started more than once");let n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){id(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();let e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.now()),e>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{let t="exponential"===this._curve?2*e:0;this._stopSource(this.now()+t),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==iG&&(this.onended(this),this.onended=iG,!this.context.isOffline)){let t=()=>this.dispose();"undefined"!=typeof requestIdleCallback?requestIdleCallback(t):setTimeout(t,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),id(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=iG,this}}class ra extends ro{constructor(){let t=iA(ra.getDefaults(),arguments,["offset"]);super(t),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),rr(this._source,this._gainNode),this.offset=new re({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(ro.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){let e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class rl extends rn{constructor(){let t=iA(rl.getDefaults(),arguments,["value","units"]);super(t),this.name="Signal",this.override=!0,this.output=this._constantSource=new ra({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(rn.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,n=0){return ru(this,t,e,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,n){return this._param.exponentialRampTo(t,e,n),this}linearRampTo(t,e,n){return this._param.linearRampTo(t,e,n),this}targetRampTo(t,e,n){return this._param.targetRampTo(t,e,n),this}exponentialApproachValueAtTime(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this}setTargetAtTime(t,e,n){return this._param.setTargetAtTime(t,e,n),this}setValueCurveAtTime(t,e,n,i){return this._param.setValueCurveAtTime(t,e,n,i),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,n){return this._param.rampTo(t,e,n),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function ru(t,e,n,i){(e instanceof re||ir(e)||e instanceof rl&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof rl&&(e.overridden=!0)),rr(t,e,n,i)}class rh extends re{constructor(){let t=iA(rh.getDefaults(),arguments,["value"]);super(t),this.name="TickParam",this._events=new iP(1/0),this._multiplier=1,this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(re.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);let i=this._fromType(t),r=this._events.get(e),s=Math.round(Math.max(1/n,1));for(let t=0;t<=s;t++){let s=n*t+e,o=this._exponentialApproach(r.time,r.value,i,n,s);this.linearRampToValueAtTime(this._toType(o),s)}return this}setValueAtTime(t,e){let n=this.toSeconds(e);super.setValueAtTime(t,e);let i=this._events.get(n),r=this._events.previousEvent(i);return i.ticks=Math.max(this._getTicksUntilEvent(r,n),0),this}linearRampToValueAtTime(t,e){let n=this.toSeconds(e);super.linearRampToValueAtTime(t,e);let i=this._events.get(n),r=this._events.previousEvent(i);return i.ticks=Math.max(this._getTicksUntilEvent(r,n),0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);let n=this._fromType(t),i=this._events.get(e),r=Math.round(Math.max((e-i.time)*10,1)),s=(e-i.time)/r;for(let t=0;t<=r;t++){let r=s*t+i.time,o=this._exponentialInterpolate(i.time,i.value,e,n,r);this.linearRampToValueAtTime(this._toType(o),r)}return this}_getTicksUntilEvent(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(io(t.ticks)){let e=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(e,t.time)}let n=this._fromType(this.getValueAtTime(t.time)),i=this._fromType(this.getValueAtTime(e)),r=this._events.get(e);return r&&r.time===e&&"setValueAtTime"===r.type&&(i=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(n+i)+t.ticks}getTicksAtTime(t){let e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)}getDurationOfTicks(t,e){let n=this.toSeconds(e),i=this.getTicksAtTime(e);return this.getTimeOfTick(i+t)-n}getTimeOfTick(t){let e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linearRampToValueAtTime"===n.type&&e.value!==n.value){let i=this._fromType(this.getValueAtTime(e.time)),r=(this._fromType(this.getValueAtTime(n.time))-i)/(n.time-e.time),s=Math.sqrt(Math.pow(i,2)-2*r*(e.ticks-t)),o=(-i+s)/r;return(o>0?o:(-i-s)/r)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){let n=this.toSeconds(e),i=this.toSeconds(t),r=this.getTicksAtTime(n);return this.getTicksAtTime(n+i)-r}_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){let e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class rc extends rl{constructor(){let t=iA(rc.getDefaults(),arguments,["value"]);super(t),this.name="TickSignal",this.input=this._param=new rh({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(rl.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class rp extends i9{constructor(){let t=iA(rp.getDefaults(),arguments,["frequency"]);super(t),this.name="TickSource",this._state=new rt,this._tickOffset=new iP,this._ticksAtTime=new iP,this._secondsAtTime=new iP,this.frequency=new rc({context:this.context,units:t.units,value:t.frequency}),iz(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},i9.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){let n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),ia(e)&&this.setTicksAtTime(e,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}stop(t){let e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){let t=this._state.get(e);t&&t.time>0&&(this._tickOffset.cancel(t.time),this._state.cancel(t.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}pause(t){let e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e)),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getTicksAtTime(t){let e=this.toSeconds(t),n=this._state.getLastState("stopped",e),i=this._ticksAtTime.get(e),r={state:"paused",time:e};this._state.add(r);let s=i||n,o=i?i.ticks:0,a=null;return this._state.forEachBetween(s.time,e+this.sampleTime,t=>{let e=s.time,n=this._tickOffset.get(t.time);n&&n.time>=s.time&&(o=n.ticks,e=n.time),"started"===s.state&&"started"!==t.state&&(o+=this.frequency.getTicksAtTime(t.time)-this.frequency.getTicksAtTime(e),t.time!==r.time&&(a={state:t.state,time:t.time,ticks:o})),s=t}),this._state.remove(r),a&&this._ticksAtTime.add(a),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){let e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)}getSecondsAtTime(t){t=this.toSeconds(t);let e=this._state.getLastState("stopped",t),n={state:"paused",time:t};this._state.add(n);let i=this._secondsAtTime.get(t),r=i||e,s=i?i.seconds:0,o=null;return this._state.forEachBetween(r.time,t+this.sampleTime,t=>{let e=r.time,i=this._tickOffset.get(t.time);i&&i.time>=r.time&&(s=i.seconds,e=i.time),"started"===r.state&&"started"!==t.state&&(s+=t.time-e,t.time!==n.time&&(o={state:t.state,time:t.time,seconds:s})),r=t}),this._state.remove(n),o&&this._secondsAtTime.add(o),s}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){let n=this._tickOffset.get(e),i=this._state.get(e),r=Math.max(n.time,i.time),s=this.frequency.getTicksAtTime(r)+t-n.ticks;return this.frequency.getTimeOfTick(s)}forEachTickBetween(t,e,n){let i=this._state.get(t);this._state.forEachBetween(t,e,e=>{i&&"started"===i.state&&"started"!==e.state&&this.forEachTickBetween(Math.max(i.time,t),e.time-this.sampleTime,n),i=e});let r=null;if(i&&"started"===i.state){let s=Math.max(i.time,t),o=this.frequency.getTicksAtTime(s),a=o-this.frequency.getTicksAtTime(i.time),l=Math.ceil(a)-a;l=iD(l,1)?0:l;let u=this.frequency.getTimeOfTick(o+l);for(;u<e;){try{n(u,Math.round(this.getTicksAtTime(u)))}catch(t){r=t;break}u+=this.frequency.getDurationOfTicks(1,u)}}if(r)throw r;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class rd extends i9{constructor(){let t=iA(rd.getDefaults(),arguments,["callback","frequency"]);super(t),this.name="Clock",this.callback=iG,this._lastUpdate=0,this._state=new rt("stopped"),this._boundLoop=this._loop.bind(this),this.callback=t.callback,this._tickSource=new rp({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,iz(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(i9.getDefaults(),{callback:iG,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){ig(this.context);let n=this.toSeconds(t);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this}stop(t){let e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){let e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){let n=this.toSeconds(e),i=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(i+t,n)}_loop(){let t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,t=>{switch(t.state){case"started":let e=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,e);break;case"stopped":0!==t.time&&this.emit("stop",t.time);break;case"paused":this.emit("pause",t.time)}}),this._tickSource.forEachTickBetween(t,e,(t,e)=>{this.callback(t,e)}))}getStateAtTime(t){let e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}iB.mixin(rd);class rf extends rn{constructor(){let t=iA(rf.getDefaults(),arguments,["volume"]);super(t),this.name="Volume",this.input=this.output=new rs({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,iz(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(rn.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class rm extends rn{constructor(){let t=iA(rm.getDefaults(),arguments);super(t),this.name="Destination",this.input=new rf({context:this.context}),this.output=new rs({context:this.context}),this.volume=this.input.volume,ri(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(rn.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),ri(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}iU(t=>{t.destination=new rm({context:t})}),iq(t=>{t.destination.dispose()});class rg extends rn{constructor(){super(...arguments),this.name="Listener",this.positionX=new re({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new re({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new re({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new re({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new re({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new re({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new re({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new re({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new re({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(rn.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}iU(t=>{t.listener=new rg({context:t})}),iq(t=>{t.listener.dispose()});class r_ extends iI{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;let t=iA(r_.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(e=>{this._loadingCount++;let n=t.urls[e];this.add(e,n,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:iG,onload:iG,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return id(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,e])=>e.loaded)}add(t,e,n=iG,i=iG){return ic(e)?(this.baseUrl&&"data:audio/"===e.trim().substring(0,11).toLowerCase()&&(this.baseUrl=""),this._buffers.set(t.toString(),new iQ(this.baseUrl+e,n,i))):this._buffers.set(t.toString(),new iQ(e,n,i)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class rv extends i5{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(t){return i0(super._frequencyToUnits(t))}_ticksToUnits(t){return i0(super._ticksToUnits(t))}_beatsToUnits(t){return i0(super._beatsToUnits(t))}_secondsToUnits(t){return i0(super._secondsToUnits(t))}toMidi(){return this.valueOf()}toFrequency(){return i2(this.toMidi())}transpose(t){return new rv(this.context,this.toMidi()+t)}}class ry extends i7{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class rb extends i9{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new iP,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){let t=this.context.currentTime;this._events.forEachBefore(t+this.anticipation,e=>{t-e.time<=this.expiration&&e.callback(),this._events.remove(e)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}iU(t=>{t.draw=new rb({context:t})}),iq(t=>{t.draw.dispose()});class rw extends iI{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){id(ia(t.time),"Events must have a time property"),id(ia(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new rT(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(null!==this._root){let e=[];for(let n of(this._root.search(t.time,e),e))if(n.event===t){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,t=>this.remove(t)),this}_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{let e;let n=t.getBalance(),i=null;if(n>0){if(null===t.left.right)(e=t.left).right=t.right,i=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,i=e.parent,e.left=t.left,e.right=t.right)}}else if(null===t.right.left)(e=t.right).left=t.left,i=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,i=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),i&&this._rebalance(i)}t.dispose()}_rotateLeft(t){let e=t.parent,n=t.isLeftChild(),i=t.right;i&&(t.right=i.left,i.left=t),null!==e?n?e.left=i:e.right=i:this._setRoot(i)}_rotateRight(t){let e=t.parent,n=t.isLeftChild(),i=t.left;i&&(t.left=i.right,i.right=t),null!==e?n?e.left=i:e.right=i:this._setRoot(i)}_rebalance(t){let e=t.getBalance();e>1&&t.left?0>t.left.getBalance()?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(null!==this._root){let e=[];if(this._root.search(t,e),e.length>0){let t=e[0];for(let n=1;n<e.length;n++)e[n].low>t.low&&(t=e[n]);return t.event}}return null}forEach(t){if(null!==this._root){let e=[];this._root.traverse(t=>e.push(t)),e.forEach(e=>{e.event&&t(e.event)})}return this}forEachAtTime(t,e){if(null!==this._root){let n=[];this._root.search(t,n),n.forEach(t=>{t.event&&e(t.event)})}return this}forEachFrom(t,e){if(null!==this._root){let n=[];this._root.searchAfter(t,n),n.forEach(t=>{t.event&&e(t.event)})}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class rT{constructor(t,e,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}search(t,e){if(!(t>this.max))null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),!(this.low>t)&&null!==this.right&&this.right.search(t,e)}searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class rx extends iI{constructor(t){super(),this.name="TimelineValue",this._timeline=new iP({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){let e=this._timeline.get(t);return e?e.value:this._initialValue}}class rk extends rn{constructor(){super(iA(rk.getDefaults(),arguments,["context"]))}connect(t,e=0,n=0){return ru(this,t,e,n),this}}class rC extends rk{constructor(){let t=iA(rC.getDefaults(),arguments,["mapping","length"]);(super(t),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,ih(t.mapping)||t.mapping instanceof Float32Array)?this.curve=Float32Array.from(t.mapping):"function"==typeof t.mapping&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(rl.getDefaults(),{length:1024})}setMap(t,e=1024){let n=new Float32Array(e);for(let i=0;i<e;i++){let r=i/(e-1)*2-1;n[i]=t(r,i)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){id(["none","2x","4x"].some(e=>e.includes(t)),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class rA extends rk{constructor(){let t=iA(rA.getDefaults(),arguments,["value"]);super(t),this.name="Pow",this._exponentScaler=this.input=this.output=new rC({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(rk.getDefaults(),{value:1})}_expFunc(t){return e=>Math.pow(Math.abs(e),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class rS{constructor(t,e){this.id=rS._eventId++,this._remainderTime=0;let n=Object.assign(rS.getDefaults(),e);this.transport=t,this.callback=n.callback,this._once=n.once,this.time=Math.floor(n.time),this._remainderTime=n.time-this.time}static getDefaults(){return{callback:iG,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(t){if(this.callback){let e=this.transport.bpm.getDurationOfTicks(1,t);this.callback(t+this._remainderTime*e),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}rS._eventId=0;class rO extends rS{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);let n=Object.assign(rO.getDefaults(),e);this.duration=n.duration,this._interval=n.interval,this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},rS.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvent(){return iR(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new ry(this.context,this._nextTick).toSeconds()):-1}_createEvents(t){iR(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ry(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;let e=this.transport.getTicksAtTime(t);iM(e,this.time)&&(this._nextTick=this.floatTime+Math.ceil((e-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class rI extends i9{constructor(){let t=iA(rI.getDefaults(),arguments);super(t),this.name="Transport",this._loop=new rx(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new iP,this._repeatedEvents=new rw,this._syncedSignals=[],this._swingAmount=0,this._ppq=t.ppq,this._clock=new rd({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),iz(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(i9.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){let n=Math.sin(e%(2*this._swingTicks)/(2*this._swingTicks)*Math.PI)*this._swingAmount;t+=new ry(this.context,2*this._swingTicks/3).toSeconds()*n}i_=!0,this._timeline.forEachAtTime(e,e=>e.invoke(t)),i_=!1}schedule(t,e){let n=new rS(this,{callback:t,time:new i7(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(t,e,n,i=1/0){let r=new rO(this,{callback:t,duration:new i3(this.context,i).toTicks(),interval:new i3(this.context,e).toTicks(),time:new i7(this.context,n).toTicks()});return this._addEvent(r,this._repeatedEvents)}scheduleOnce(t,e){let n=new rS(this,{callback:t,once:!0,time:new i7(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){let e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){let e=this.toTicks(t);return this._timeline.forEachFrom(e,t=>this.clear(t.id)),this._repeatedEvents.forEachFrom(e,t=>this.clear(t.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new ry(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){let n;return this.context.resume(),ia(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){ih(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new i3(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new i3(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new ry(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){let t=this.now(),e=this._clock.getTicksAtTime(t);return new ry(this.context,e).toBarsBeatsSixteenths()}set position(t){let e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){let e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n}get progress(){if(!this.loop)return 0;{let t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){let e=this.now();if("started"===this.state){let n=this._clock.getTicksAtTime(e),i=this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,e),r=e+i;this.emit("stop",r),this._clock.setTicksAtTime(t,r),this.emit("start",r,this._clock.getSecondsAtTime(r))}else this.emit("ticks",e),this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return this._clock.getTicksAtTime(t)}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{let e=this.now(),n=this.getTicksAtTime(e),i=t-n%t;return this._clock.nextTickTime(i,e)}}syncSignal(t,e){let n=this.now(),i=this.bpm,r=1/(60/i.getValueAtTime(n)/this.PPQ),s=[];if("time"===t.units){let t=1/64/r,e=new rs(t),n=new rA(-1),o=new rs(t);i.chain(e,n,o),i=o,r=1/r,s=[e,n,o]}e||(e=0!==t.getValueAtTime(n)?t.getValueAtTime(n)/r:0);let o=new rs(e);return i.connect(o),o.connect(t._param),s.push(o),this._syncedSignals.push({initial:t.value,nodes:s,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){let n=this._syncedSignals[e];n.signal===t&&(n.nodes.forEach(t=>t.dispose()),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),!function t(e,n){ih(n)?n.forEach(n=>t(e,n)):Object.defineProperty(e,n,{writable:!0})}(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}iB.mixin(rI),iU(t=>{t.transport=new rI({context:t})}),iq(t=>{t.transport.dispose()});class rM extends rn{constructor(t){super(t),this.input=void 0,this._state=new rt("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=iG,this._syncedStop=iG,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new rf({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,iz(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(rn.getDefaults(),{mute:!1,onstop:iG,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,n){let i=io(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(i=this._clampToCurrentTime(i),this._synced||"started"!==this._state.getValueAtTime(i)){if(this.log("start",i),this._state.setStateAtTime("started",i),this._synced){var r;let t=this._state.get(i);t&&(t.offset=this.toSeconds(io(r=e)?0:r),t.duration=n?this.toSeconds(n):void 0);let s=this.context.transport.schedule(t=>{this._start(t,e,n)},i);this._scheduled.push(s),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>i&&this._syncedStart(this.now(),this.context.transport.seconds)}else ig(this.context),this._start(i,e,n)}else id(iM(i,this._state.get(i).time),"Start time must be strictly greater than previous start time"),this._state.cancel(i),this._state.setStateAtTime("started",i),this.log("restart",i),this.restart(i,e,n);return this}stop(t){let e=io(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||ia(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){let t=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(t)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,n){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(iM(e,0)){let n=this._state.get(e);if(n&&"started"===n.state&&n.time!==e){let i;let r=e-this.toSeconds(n.time);n.duration&&(i=this.toSeconds(n.duration)-r),this._start(t,this.toSeconds(n.offset)+r,i)}}},this._syncedStop=t=>{let e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));"started"===this._state.getValueAtTime(e)&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=iG,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class rE extends ro{constructor(){let t=iA(rE.getDefaults(),arguments,["url","onload"]);super(t),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,rr(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new re({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new iQ(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(ro.getDefaults(),{url:new iQ,loop:!1,loopEnd:0,loopStart:0,onload:iG,onerror:iG,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,n,i=1){var r,s,o;id(this.buffer.loaded,"buffer is either not set or not loaded");let a=this.toSeconds(t);this._startGain(a,i),e=this.loop?(r=e,s=this.loopStart,io(r)?s:r):io(o=e)?0:o;let l=Math.max(this.toSeconds(e),0);if(this.loop){let t=this.toSeconds(this.loopEnd)||this.buffer.duration,e=this.toSeconds(this.loopStart),n=t-e;iE(l,t)&&(l=(l-e)%n+e),iD(l,this.buffer.duration)&&(l=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,iR(l,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(a,l)),ia(n)){let t=this.toSeconds(n);t=Math.max(t,0),this.stop(a+t)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function rR(t,e){return(0,ix.sH)(this,void 0,void 0,function*(){let n=e/t.context.sampleRate,i=new iH(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:i})).toDestination().start(0),(yield i.render()).getChannelData(0)})}class rD extends ro{constructor(){let t=iA(rD.getDefaults(),arguments,["frequency","type"]);super(t),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],rr(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new re({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new re({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),iz(this,["frequency","detune"])}static getDefaults(){return Object.assign(ro.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){let e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class rN extends rM{constructor(){let t=iA(rN.getDefaults(),arguments,["frequency","type"]);super(t),this.name="Oscillator",this._oscillator=null,this.frequency=new rl({context:this.context,units:"frequency",value:t.frequency}),iz(this,"frequency"),this.detune=new rl({context:this.context,units:"cents",value:t.detune}),iz(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&"custom"!==t.type&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(rM.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){let e=this.toSeconds(t),n=new rD({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){let e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){let e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type)return rN._periodicWaveCache.find(t=>{var e,n;return t.phase===this._phase&&(e=t.partials,n=this._partials,e.length===n.length&&e.every((t,e)=>n[e]===t))});{let t=rN._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;let e=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&e)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{let e=this._getCachedPeriodicWave();if(ia(e)){let{partials:t,wave:n}=e;this._wave=n,this._partials=t,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{let[e,n]=this._getRealImaginary(t,this._phase),i=this.context.createPeriodicWave(e,n);this._wave=i,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),rN._periodicWaveCache.push({imag:n,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:e,type:this._type,wave:this._wave}),rN._periodicWaveCache.length>100&&rN._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){im(t,0);let e=this._type,n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(e=n[1]),"custom"!==this._type)0===t?this.type=e:this.type=e+t.toString();else{let e=new Float32Array(t);this._partials.forEach((t,n)=>e[n]=t),this._partials=Array.from(e),this.type=this._type}}_getRealImaginary(t,e){let n=2048,i=new Float32Array(2048),r=new Float32Array(n),s=1;if("custom"===t){if(s=this._partials.length+1,this._partialCount=this._partials.length,n=s,0===this._partials.length)return[i,r]}else{let e=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);e?(s=parseInt(e[2],10)+1,this._partialCount=parseInt(e[2],10),t=e[1],n=s=Math.max(s,2)):this._partialCount=0,this._partials=[]}for(let o=1;o<n;++o){let n;let a=2/(o*Math.PI);switch(t){case"sine":n=+(o<=s),this._partials[o-1]=n;break;case"square":n=1&o?2*a:0,this._partials[o-1]=n;break;case"sawtooth":n=a*(1&o?1:-1),this._partials[o-1]=n;break;case"triangle":n=1&o?a*a*2*(o-1>>1&1?-1:1):0,this._partials[o-1]=n;break;case"custom":n=this._partials[o-1];break;default:throw TypeError("Oscillator: invalid type: "+t)}0!==n?(i[o]=-n*Math.sin(e*o),r[o]=n*Math.cos(e*o)):(i[o]=0,r[o]=0)}return[i,r]}_inverseFFT(t,e,n){let i=0,r=t.length;for(let s=0;s<r;s++)i+=t[s]*Math.cos(s*n)+e[s]*Math.sin(s*n);return i}getInitialValue(){let[t,e]=this._getRealImaginary(this._type,0),n=0,i=2*Math.PI;for(let r=0;r<32;r++)n=Math.max(this._inverseFFT(t,e,r/32*i),n);return iN(-this._inverseFFT(t,e,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(){return(0,ix.sH)(this,arguments,void 0,function*(t=1024){return rR(this,t)})}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}rN._periodicWaveCache=[];class rP extends rk{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new rC({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class rV extends rl{constructor(){let t=iA(rV.getDefaults(),arguments,["value"]);super(t),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new rs({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(rl.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class rU extends rM{constructor(){let t=iA(rU.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="AMOscillator",this._modulationScale=new rP({context:this.context}),this._modulationNode=new rs({context:this.context}),this._carrier=new rN({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new rN({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new rV({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),iz(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(rN.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return(0,ix.sH)(this,arguments,void 0,function*(t=1024){return rR(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class rF extends rM{constructor(){let t=iA(rF.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="FMOscillator",this._modulationNode=new rs({context:this.context,gain:0}),this._carrier=new rN({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new rl({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new rN({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new rV({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new rV({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),iz(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(rN.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return(0,ix.sH)(this,arguments,void 0,function*(t=1024){return rR(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class rq extends rM{constructor(){let t=iA(rq.getDefaults(),arguments,["frequency","width"]);super(t),this.name="PulseOscillator",this._widthGate=new rs({context:this.context,gain:0}),this._thresh=new rC({context:this.context,mapping:t=>t<=0?-1:1}),this.width=new rl({context:this.context,units:"audioRange",value:t.width}),this._triangle=new rN({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),iz(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(rM.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(){return(0,ix.sH)(this,arguments,void 0,function*(t=1024){return rR(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class rB extends rM{constructor(){let t=iA(rB.getDefaults(),arguments,["frequency","type","spread"]);super(t),this.name="FatOscillator",this._oscillators=[],this.frequency=new rl({context:this.context,units:"frequency",value:t.frequency}),this.detune=new rl({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,iz(this,["frequency","detune"])}static getDefaults(){return Object.assign(rN.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(e=>e.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(e=>e.stop(t))}_restart(t){this._forEach(e=>e.restart(t))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach(e=>e.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){let e=-t/2,n=t/(this._oscillators.length-1);this._forEach((t,i)=>t.detune.value=e+n*i)}}get count(){return this._oscillators.length}set count(t){if(im(t,1),this._oscillators.length!==t){this._forEach(t=>t.dispose()),this._oscillators=[];for(let e=0;e<t;e++){let n=new rN({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:0===e?()=>this.onstop(this):iG});"custom"===this.type&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[e]=n}this.spread=this._spread,"started"===this.state&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((t,e)=>t.phase=this._phase+e/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(e=>e.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(e=>e.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(e=>e.partialCount=t),this._type=this._oscillators[0].type}asArray(){return(0,ix.sH)(this,arguments,void 0,function*(t=1024){return rR(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class rj extends rM{constructor(){let t=iA(rj.getDefaults(),arguments,["frequency","modulationFrequency"]);super(t),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new rV({context:this.context,value:2}),this._pulse=new rq({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new rN({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),iz(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(rM.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(){return(0,ix.sH)(this,arguments,void 0,function*(t=1024){return rR(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}let rL={am:rU,fat:rB,fm:rF,oscillator:rN,pulse:rq,pwm:rj};class rW extends rM{constructor(){let t=iA(rW.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OmniOscillator",this.frequency=new rl({context:this.context,units:"frequency",value:t.frequency}),this.detune=new rl({context:this.context,units:"cents",value:t.detune}),iz(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(rN.getDefaults(),rF.getDefaults(),rU.getDefaults(),rB.getDefaults(),rq.getDefaults(),rj.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(t=this._sourceType),t+this._oscillator.type}set type(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;let e=rL[t],n=this.now();if(this._oscillator){let t=this._oscillator;t.stop(n),this.context.setTimeout(()=>t.dispose(),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}_getOscType(t,e){return t instanceof rL[e]}get baseType(){return this._oscillator.baseType}set baseType(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(t){this._getOscType(this._oscillator,"fat")&&il(t)&&(this._oscillator.count=t)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(t){this._getOscType(this._oscillator,"fat")&&il(t)&&(this._oscillator.spread=t)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&ic(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(){return(0,ix.sH)(this,arguments,void 0,function*(t=1024){return rR(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function rz(t,e=1/0){let n=new WeakMap;return function(i,r){Reflect.defineProperty(i,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){im(i,t,e),n.set(this,i)}})}}function rG(t,e=1/0){let n=new WeakMap;return function(i,r){Reflect.defineProperty(i,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){im(this.toSeconds(i),t,e),n.set(this,i)}})}}class rQ extends rM{constructor(){let t=iA(rQ.getDefaults(),arguments,["url","onload"]);super(t),this.name="Player",this._activeSources=new Set,this._buffer=new iQ({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(rM.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:iG,onerror:iG,playbackRate:1,reverse:!1})}load(t){return(0,ix.sH)(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=iG){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,n){return super.start(t,e,n),this}_start(t,e,n){var i,r,s,o,a;e=this._loop?(i=e,r=this._loopStart,io(i)?r:i):io(s=e)?0:s;let l=this.toSeconds(e),u=n;o=n,a=Math.max(this._buffer.duration-l,0),n=io(o)?a:o;let h=this.toSeconds(n);h/=this._playbackRate,t=this.toSeconds(t);let c=new rE({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+h),this._state.setStateAtTime("stopped",t+h,{implicitEnd:!0})),this._activeSources.add(c),this._loop&&io(u)?c.start(t,l):c.start(t,l,h-this.toSeconds(this.fadeOut))}_stop(t){let e=this.toSeconds(t);this._activeSources.forEach(t=>t.stop(e))}restart(t,e,n){return super.restart(t,e,n),this}_restart(t,e,n){var i;null===(i=[...this._activeSources].pop())||void 0===i||i.stop(t),this._start(t,e,n)}seek(t,e){let n=this.toSeconds(e);if("started"===this._state.getValueAtTime(n)){let e=this.toSeconds(t);this._stop(n),this._start(n,e)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&im(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&im(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){let t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;let e=this.now(),n=this._state.getNextState("stopped",e);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach(t=>t.cancelStop())),this._activeSources.forEach(n=>{n.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}(0,ix.Cg)([rG(0)],rQ.prototype,"fadeIn",void 0),(0,ix.Cg)([rG(0)],rQ.prototype,"fadeOut",void 0);class rH extends rn{constructor(){let t=iA(rH.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="Envelope",this._sig=new rl({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(rn.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(ic(t))return t;{let n;for(n in r$)if(r$[n][e]===t)return n;return t}}_setCurve(t,e,n){if(ic(n)&&Reflect.has(r$,n)){let i=r$[n];iu(i)?"_decayCurve"!==t&&(this[t]=i[e]):this[t]=i}else if(ih(n)&&"_decayCurve"!==t)this[t]=n;else throw Error("Envelope: invalid curve: "+n)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(t){this._setCurve("_decayCurve","Out",t)}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let n=this.toSeconds(this.attack),i=this.toSeconds(this.decay),r=this.getValueAtTime(t);if(r>0&&(n=(1-r)/(1/n)),n<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,n,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,n,t);else{this._sig.cancelAndHoldAtTime(t);let i=this._attackCurve;for(let t=1;t<i.length;t++)if(i[t-1]<=r&&r<=i[t]){(i=this._attackCurve.slice(t))[0]=r;break}this._sig.setValueCurveAtTime(i,t,n,e)}if(i&&this.sustain<1){let r=e*this.sustain,s=t+n;this.log("decay",s),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(r,i+s):this._sig.exponentialApproachValueAtTime(r,s,i)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);let e=this.getValueAtTime(t);if(e>0){let n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,t):(id(ih(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,n,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,n=1){return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,n=0){return ru(this,t,e,n),this}asArray(){return(0,ix.sH)(this,arguments,void 0,function*(t=1024){let e=t/this.context.sampleRate,n=new iH(1,e,this.context.sampleRate),i=this.toSeconds(this.attack)+this.toSeconds(this.decay),r=i+this.toSeconds(this.release),s=.1*r,o=r+s,a=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/o,decay:e*this.toSeconds(this.decay)/o,release:e*this.toSeconds(this.release)/o,context:n}));return a._sig.toDestination(),a.triggerAttackRelease(e*(i+s)/o,0),(yield n.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}(0,ix.Cg)([rG(0)],rH.prototype,"attack",void 0),(0,ix.Cg)([rG(0)],rH.prototype,"decay",void 0),(0,ix.Cg)([rz(0,1)],rH.prototype,"sustain",void 0),(0,ix.Cg)([rG(0)],rH.prototype,"release",void 0);let r$=(()=>{let t,e;let n=[];for(t=0;t<128;t++)n[t]=Math.sin(t/127*(Math.PI/2));let i=[];for(t=0;t<127;t++){let n=Math.sin(2*Math.PI*(e=t/127)*6.4-Math.PI/2)+1;i[t]=n/10+.83*e}i[127]=1;let r=[];for(t=0;t<128;t++)r[t]=Math.ceil(t/127*5)/5;let s=[];for(t=0;t<128;t++)e=t/127,s[t]=.5*(1-Math.cos(Math.PI*e));let o=[];for(t=0;t<128;t++){let n=Math.cos((4*Math.pow(e=t/127,3)+.2)*Math.PI*2*e);o[t]=Math.abs(n*(1-e))}function a(t){let e=Array(t.length);for(let n=0;n<t.length;n++)e[n]=1-t[n];return e}return{bounce:{In:a(o),Out:o},cosine:{In:n,Out:n.slice(0).reverse()},exponential:"exponential",linear:"linear",ripple:{In:i,Out:a(i)},sine:{In:s,Out:a(s)},step:{In:r,Out:a(r)}}})();class rY extends rn{constructor(){let t=iA(rY.getDefaults(),arguments);super(t),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t),this._volume=this.output=new rf({context:this.context,volume:t.volume}),this.volume=this._volume.volume,iz(this,"volume")}static getDefaults(){return Object.assign(rn.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){let n=this["_original_"+t]=this[t];this[t]=(...t)=>{let i=t[e],r=this.context.transport.schedule(i=>{t[e]=i,n.apply(this,t)},i);this._scheduledEvents.push(r)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(t,e,n,i){let r=this.toSeconds(n),s=this.toSeconds(e);return this.triggerAttack(t,r,i),this.triggerRelease(r+s),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class rX extends rY{constructor(){let t=iA(rX.getDefaults(),arguments);super(t),this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(rY.getDefaults(),{detune:0,onsilence:iG,portamento:0})}triggerAttack(t,e,n=1){this.log("triggerAttack",t,e,n);let i=this.toSeconds(e);return this._triggerEnvelopeAttack(i,n),this.setNote(t,i),this}triggerRelease(t){this.log("triggerRelease",t);let e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){let n=this.toSeconds(e),i=t instanceof i5?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(n)>.05){let t=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(i,t,n)}else this.frequency.setValueAtTime(i,n);return this}}(0,ix.Cg)([rG(0)],rX.prototype,"portamento",void 0);class rZ extends rH{constructor(){super(iA(rZ.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new rs({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class rJ extends rX{constructor(){let t=iA(rJ.getDefaults(),arguments);super(t),this.name="Synth",this.oscillator=new rW(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new rZ(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),iz(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(rX.getDefaults(),{envelope:Object.assign(iO(rH.getDefaults(),Object.keys(rn.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(iO(rW.getDefaults(),[...Object.keys(rM.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){let e=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+e+n)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class rK extends rJ{constructor(){let t=iA(rK.getDefaults(),arguments);super(t),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,iz(this,["oscillator","envelope"])}static getDefaults(){return iC(rX.getDefaults(),rJ.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){let n=this.toSeconds(e),i=this.toFrequency(t instanceof i5?t.toFrequency():t),r=i*this.octaves;return this.oscillator.frequency.setValueAtTime(r,n),this.oscillator.frequency.exponentialRampToValueAtTime(i,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}(0,ix.Cg)([rz(0)],rK.prototype,"octaves",void 0),(0,ix.Cg)([rG(0)],rK.prototype,"pitchDecay",void 0);let r0=new Set;function r1(t,e){let n=`registerProcessor("${t}", ${e})`;r0.add(n)}y=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`,r0.add(y),b=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`,r0.add(b),w=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`,r0.add(w),r1("feedback-comb-filter",`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`);class r2 extends rY{constructor(){let t=iA(r2.getDefaults(),arguments,["voice","options"]);super(t),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=t=>this.releaseAll(t),id(!il(t.voice),"DEPRECATED: The polyphony count is no longer the first argument.");let e=t.voice.getDefaults();this.options=Object.assign(e,t.options),this.voice=t.voice,this.maxPolyphony=t.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();let n=this._voices.indexOf(this._dummyVoice);this._voices.splice(n,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(rY.getDefaults(),{maxPolyphony:32,options:{},voice:rJ})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(t){this._availableVoices.push(t);let e=this._activeVoices.findIndex(e=>e.voice===t);this._activeVoices.splice(e,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){let t=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return id(t instanceof rX,"Voice must extend Monophonic class"),t.connect(this.output),this._voices.push(t),t}ib("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){let t=this._availableVoices.shift(),e=this._voices.indexOf(t);this._voices.splice(e,1),this.context.isOffline||t.dispose()}}_triggerAttack(t,e,n){t.forEach(t=>{let i=new rv(this.context,t).toMidi(),r=this._getNextAvailableVoice();r&&(r.triggerAttack(t,e,n),this._activeVoices.push({midi:i,voice:r,released:!1}),this.log("triggerAttack",t,e))})}_triggerRelease(t,e){t.forEach(t=>{let n=new rv(this.context,t).toMidi(),i=this._activeVoices.find(({midi:t,released:e})=>t===n&&!e);i&&(i.voice.triggerRelease(e),i.released=!0,this.log("triggerRelease",t,e))})}_scheduleEvent(t,e,n,i){id(!this.disposed,"Synth was already disposed"),n<=this.now()?"attack"===t?this._triggerAttack(e,n,i):this._triggerRelease(e,n):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(t,e,n,i)},n-this.now())}triggerAttack(t,e,n){Array.isArray(t)||(t=[t]);let i=this.toSeconds(e);return this._scheduleEvent("attack",t,i,n),this}triggerRelease(t,e){Array.isArray(t)||(t=[t]);let n=this.toSeconds(e);return this._scheduleEvent("release",t,n),this}triggerAttackRelease(t,e,n,i){let r=this.toSeconds(n);if(this.triggerAttack(t,r,i),ih(e)){id(ih(t),"If the duration is an array, the notes must also be an array");for(let n=0;n<t.length;n++){let i=e[Math.min(n,e.length-1)],s=this.toSeconds(i);id(s>0,"The duration must be greater than 0"),this.triggerRelease(t[n],r+s)}}else{let n=this.toSeconds(e);id(n>0,"The duration must be greater than 0"),this.triggerRelease(t,r+n)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(t){let e=iO(t,["onsilence","context"]);return this.options=iC(this.options,e),this._voices.forEach(t=>t.set(e)),this._dummyVoice.set(e),this}get(){return this._dummyVoice.get()}releaseAll(t){let e=this.toSeconds(t);return this._activeVoices.forEach(({voice:t})=>{t.triggerRelease(e)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(t=>t.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class r8 extends rY{constructor(){let t=iA(r8.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(t),this.name="Sampler",this._activeSources=new Map;let e={};Object.keys(t.urls).forEach(n=>{let i=parseInt(n,10);id(ip(n)||il(i)&&isFinite(i),`url key is neither a note or midi pitch: ${n}`),ip(n)?e[new i5(this.context,n).toMidi()]=t.urls[n]:il(i)&&isFinite(i)&&(e[i]=t.urls[i])}),this._buffers=new r_({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(rY.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:iG,onerror:iG,release:.1,urls:{}})}_findClosest(t){let e=0;for(;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}throw Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,n=1){return this.log("triggerAttack",t,e,n),Array.isArray(t)||(t=[t]),t.forEach(t=>{let i=i1(new i5(this.context,t).toFrequency()),r=Math.round(i),s=i-r,o=this._findClosest(r),a=r-o,l=this._buffers.get(a),u=iJ(o+s),h=new rE({url:l,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:u}).connect(this.output);h.start(e,0,l.duration/u,n),ih(this._activeSources.get(r))||this._activeSources.set(r,[]),this._activeSources.get(r).push(h),h.onended=()=>{if(this._activeSources&&this._activeSources.has(r)){let t=this._activeSources.get(r),e=t.indexOf(h);-1!==e&&t.splice(e,1)}}}),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(t=>{let n=new i5(this.context,t).toMidi();if(this._activeSources.has(n)&&this._activeSources.get(n).length){let t=this._activeSources.get(n);e=this.toSeconds(e),t.forEach(t=>{t.stop(e)}),this._activeSources.set(n,[])}}),this}releaseAll(t){let e=this.toSeconds(t);return this._activeSources.forEach(t=>{for(;t.length;)t.shift().stop(e)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,n,i=1){let r=this.toSeconds(n);return this.triggerAttack(t,r,i),ih(e)?(id(ih(t),"notes must be an array when duration is array"),t.forEach((t,n)=>{let i=e[Math.min(n,e.length-1)];this.triggerRelease(t,r+this.toSeconds(i))})):this.triggerRelease(t,r+this.toSeconds(e)),this}add(t,e,n){if(id(ip(t)||isFinite(t),`note must be a pitch or midi: ${t}`),ip(t)){let i=new i5(this.context,t).toMidi();this._buffers.add(i,e,n)}else this._buffers.add(t,e,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}(0,ix.Cg)([rG(0)],r8.prototype,"attack",void 0),(0,ix.Cg)([rG(0)],r8.prototype,"release",void 0);class r3 extends rn{constructor(){let t=iA(r3.getDefaults(),arguments,["pan"]);super(t),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new re({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",iz(this,"pan")}static getDefaults(){return Object.assign(rn.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}r1("bit-crusher",`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`);class r5 extends rn{constructor(){let t=iA(r5.getDefaults(),arguments,["solo"]);super(t),this.name="Solo",this.input=this.output=new rs({context:this.context}),r5._allSolos.has(this.context)||r5._allSolos.set(this.context,new Set),r5._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(rn.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),r5._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return 0===this.input.gain.value}_addSolo(){r5._soloed.has(this.context)||r5._soloed.set(this.context,new Set),r5._soloed.get(this.context).add(this)}_removeSolo(){r5._soloed.has(this.context)&&r5._soloed.get(this.context).delete(this)}_isSoloed(){return r5._soloed.has(this.context)&&r5._soloed.get(this.context).has(this)}_noSolos(){return!r5._soloed.has(this.context)||r5._soloed.has(this.context)&&0===r5._soloed.get(this.context).size}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),r5._allSolos.get(this.context).delete(this),this._removeSolo(),this}}r5._allSolos=new Map,r5._soloed=new Map;class r6 extends rn{constructor(){let t=iA(r6.getDefaults(),arguments,["pan","volume"]);super(t),this.name="PanVol",this._panner=this.input=new r3({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new rf({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,iz(this,["pan","volume"])}static getDefaults(){return Object.assign(rn.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class r4 extends rn{constructor(){let t=iA(r4.getDefaults(),arguments,["volume","pan"]);super(t),this.name="Channel",this._solo=this.input=new r5({solo:t.solo,context:this.context}),this._panVol=this.output=new r6({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),iz(this,["pan","volume"])}static getDefaults(){return Object.assign(rn.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return r4.buses.has(t)||r4.buses.set(t,new rs({context:this.context})),r4.buses.get(t)}send(t,e=0){let n=this._getBus(t),i=new rs({context:this.context,units:"decibels",gain:e});return this.connect(i),i.connect(n),i}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}function r7(){return iX().transport}r4.buses=new Map,iX().transport,iX().destination,iX().destination,iX().listener,iX().draw,iX()},92459:t=>{function e(){this.buffer=[]}e.prototype.writeUInt8=function(t){this.buffer.push(255&t)},e.prototype.writeInt8=e.prototype.writeUInt8,e.prototype.writeUInt16=function(t){this.writeUInt8(t>>8&255),this.writeUInt8(255&t)},e.prototype.writeInt16=e.prototype.writeUInt16,e.prototype.writeUInt24=function(t){this.writeUInt8(t>>16&255),this.writeUInt8(t>>8&255),this.writeUInt8(255&t)},e.prototype.writeInt24=e.prototype.writeUInt24,e.prototype.writeUInt32=function(t){this.writeUInt8(t>>24&255),this.writeUInt8(t>>16&255),this.writeUInt8(t>>8&255),this.writeUInt8(255&t)},e.prototype.writeInt32=e.prototype.writeUInt32,e.prototype.writeBytes=function(t){this.buffer=this.buffer.concat(Array.prototype.slice.call(t,0))},e.prototype.writeString=function(t){var e,n=t.length,i=[];for(e=0;e<n;e++)i.push(t.codePointAt(e));this.writeBytes(i)},e.prototype.writeVarInt=function(t){if(t<0)throw"Cannot write negative variable-length integer";if(t<=127)this.writeUInt8(t);else{var e=t,n=[];for(n.push(127&e),e>>=7;e;){var i=127&e|128;n.push(i),e>>=7}this.writeBytes(n.reverse())}},e.prototype.writeChunk=function(t,e){this.writeString(t),this.writeUInt32(e.length),this.writeBytes(e)},t.exports=function(t,n){if("object"!=typeof t)throw"Invalid MIDI data";n=n||{};var i,r,s,o,a,l,u,h=t.header||{},c=t.tracks||[],p=c.length,d=new e;for(i=d,r=h,s=p,o=null==r.format?1:r.format,a=128,r.timeDivision?a=r.timeDivision:r.ticksPerFrame&&r.framesPerSecond?a=-(255&r.framesPerSecond)<<8|255&r.ticksPerFrame:r.ticksPerBeat&&(a=32767&r.ticksPerBeat),(l=new e).writeUInt16(o),l.writeUInt16(s),l.writeUInt16(a),i.writeChunk("MThd",l.buffer),u=0;u<p;u++)(function(t,n,i){var r,s=new e,o=n.length,a=null;for(r=0;r<o;r++)!1!==i.running&&(i.running||n[r].running)||(a=null),a=function(t,e,n,i){var r=e.type,s=e.deltaTime,o=e.text||"",a=e.data||[],l=null;switch(t.writeVarInt(s),r){case"sequenceNumber":t.writeUInt8(255),t.writeUInt8(0),t.writeVarInt(2),t.writeUInt16(e.number);break;case"text":t.writeUInt8(255),t.writeUInt8(1),t.writeVarInt(o.length),t.writeString(o);break;case"copyrightNotice":t.writeUInt8(255),t.writeUInt8(2),t.writeVarInt(o.length),t.writeString(o);break;case"trackName":t.writeUInt8(255),t.writeUInt8(3),t.writeVarInt(o.length),t.writeString(o);break;case"instrumentName":t.writeUInt8(255),t.writeUInt8(4),t.writeVarInt(o.length),t.writeString(o);break;case"lyrics":t.writeUInt8(255),t.writeUInt8(5),t.writeVarInt(o.length),t.writeString(o);break;case"marker":t.writeUInt8(255),t.writeUInt8(6),t.writeVarInt(o.length),t.writeString(o);break;case"cuePoint":t.writeUInt8(255),t.writeUInt8(7),t.writeVarInt(o.length),t.writeString(o);break;case"channelPrefix":t.writeUInt8(255),t.writeUInt8(32),t.writeVarInt(1),t.writeUInt8(e.channel);break;case"portPrefix":t.writeUInt8(255),t.writeUInt8(33),t.writeVarInt(1),t.writeUInt8(e.port);break;case"endOfTrack":t.writeUInt8(255),t.writeUInt8(47),t.writeVarInt(0);break;case"setTempo":t.writeUInt8(255),t.writeUInt8(81),t.writeVarInt(3),t.writeUInt24(e.microsecondsPerBeat);break;case"smpteOffset":t.writeUInt8(255),t.writeUInt8(84),t.writeVarInt(5);var u=31&e.hour|({24:0,25:32,29:64,30:96})[e.frameRate];t.writeUInt8(u),t.writeUInt8(e.min),t.writeUInt8(e.sec),t.writeUInt8(e.frame),t.writeUInt8(e.subFrame);break;case"timeSignature":t.writeUInt8(255),t.writeUInt8(88),t.writeVarInt(4),t.writeUInt8(e.numerator);var h=255&Math.floor(Math.log(e.denominator)/Math.LN2);t.writeUInt8(h),t.writeUInt8(e.metronome),t.writeUInt8(e.thirtyseconds||8);break;case"keySignature":t.writeUInt8(255),t.writeUInt8(89),t.writeVarInt(2),t.writeInt8(e.key),t.writeUInt8(e.scale);break;case"sequencerSpecific":t.writeUInt8(255),t.writeUInt8(127),t.writeVarInt(a.length),t.writeBytes(a);break;case"unknownMeta":null!=e.metatypeByte&&(t.writeUInt8(255),t.writeUInt8(e.metatypeByte),t.writeVarInt(a.length),t.writeBytes(a));break;case"sysEx":t.writeUInt8(240),t.writeVarInt(a.length),t.writeBytes(a);break;case"endSysEx":t.writeUInt8(247),t.writeVarInt(a.length),t.writeBytes(a);break;case"noteOff":(l=(!1!==i&&e.byte9||i&&0==e.velocity?144:128)|e.channel)!==n&&t.writeUInt8(l),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteOn":(l=144|e.channel)!==n&&t.writeUInt8(l),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteAftertouch":(l=160|e.channel)!==n&&t.writeUInt8(l),t.writeUInt8(e.noteNumber),t.writeUInt8(e.amount);break;case"controller":(l=176|e.channel)!==n&&t.writeUInt8(l),t.writeUInt8(e.controllerType),t.writeUInt8(e.value);break;case"programChange":(l=192|e.channel)!==n&&t.writeUInt8(l),t.writeUInt8(e.programNumber);break;case"channelAftertouch":(l=208|e.channel)!==n&&t.writeUInt8(l),t.writeUInt8(e.amount);break;case"pitchBend":(l=224|e.channel)!==n&&t.writeUInt8(l);var c=8192+e.value;t.writeUInt8(127&c),t.writeUInt8(c>>7&127);break;default:throw"Unrecognized event type: "+r}return l}(s,n[r],a,i.useByte9ForNoteOff);t.writeChunk("MTrk",s.buffer)})(d,c[u],n);return d.buffer}},95141:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Header=e.keySignatureKeys=void 0;var i=n(11309),r=new WeakMap;e.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var s=function(){function t(t){var n=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",r.set(this,480),t){r.set(this,t.header.ticksPerBeat),t.tracks.forEach(function(t){t.forEach(function(t){t.meta&&("timeSignature"===t.type?n.timeSignatures.push({ticks:t.absoluteTime,timeSignature:[t.numerator,t.denominator]}):"setTempo"===t.type?n.tempos.push({bpm:6e7/t.microsecondsPerBeat,ticks:t.absoluteTime}):"keySignature"===t.type&&n.keySignatures.push({key:e.keySignatureKeys[t.key+7],scale:0===t.scale?"major":"minor",ticks:t.absoluteTime}))})});var i=0;t.tracks[0].forEach(function(t){i+=t.deltaTime,t.meta&&("trackName"===t.type?n.name=t.text:("text"===t.type||"cuePoint"===t.type||"marker"===t.type||"lyrics"===t.type)&&n.meta.push({text:t.text,ticks:i,type:t.type}))}),this.update()}}return t.prototype.update=function(){var t=this,e=0,n=0;this.tempos.sort(function(t,e){return t.ticks-e.ticks}),this.tempos.forEach(function(i,r){var s=r>0?t.tempos[r-1].bpm:t.tempos[0].bpm,o=i.ticks/t.ppq-n;i.time=60/s*o+e,e=i.time,n+=o}),this.timeSignatures.sort(function(t,e){return t.ticks-e.ticks}),this.timeSignatures.forEach(function(e,n){var i=n>0?t.timeSignatures[n-1]:t.timeSignatures[0],r=(e.ticks-i.ticks)/t.ppq/i.timeSignature[0]/(i.timeSignature[1]/4);i.measures=i.measures||0,e.measures=r+i.measures})},t.prototype.ticksToSeconds=function(t){var e=(0,i.search)(this.tempos,t);if(-1===e)return .5*(t/this.ppq);var n=this.tempos[e],r=n.time,s=(t-n.ticks)/this.ppq;return r+60/n.bpm*s},t.prototype.ticksToMeasures=function(t){var e=(0,i.search)(this.timeSignatures,t);if(-1===e)return t/this.ppq/4;var n=this.timeSignatures[e],r=(t-n.ticks)/this.ppq;return n.measures+r/(n.timeSignature[0]/n.timeSignature[1])/4},Object.defineProperty(t.prototype,"ppq",{get:function(){return r.get(this)},enumerable:!1,configurable:!0}),t.prototype.secondsToTicks=function(t){var e=(0,i.search)(this.tempos,t,"time");if(-1===e)return Math.round(t/.5*this.ppq);var n=this.tempos[e],r=(t-n.time)/(60/n.bpm);return Math.round(n.ticks+r*this.ppq)},t.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(t){return{bpm:t.bpm,ticks:t.ticks}}),timeSignatures:this.timeSignatures}},t.prototype.fromJSON=function(t){this.name=t.name,this.tempos=t.tempos.map(function(t){return Object.assign({},t)}),this.timeSignatures=t.timeSignatures.map(function(t){return Object.assign({},t)}),this.keySignatures=t.keySignatures.map(function(t){return Object.assign({},t)}),this.meta=t.meta.map(function(t){return Object.assign({},t)}),r.set(this,t.ppq),this.update()},t.prototype.setTempo=function(t){this.tempos=[{bpm:t,ticks:0}],this.update()},t}();e.Header=s},96346:(t,e,n)=>{var i=n(87382).default,r=n(38919);t.exports=function(t){var e=r(t,"string");return"symbol"==i(e)?e:e+""},t.exports.__esModule=!0,t.exports.default=t.exports},98921:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(40157).A)("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]])}}]);