(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{30285:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var a=s(95155),i=s(12115),n=s(99708),r=s(74466),o=s(59434);let l=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:s,variant:i,size:r,asChild:c=!1,...d}=e,m=c?n.DX:"button";return(0,a.jsx)(m,{className:(0,o.cn)(l({variant:i,size:r,className:s})),ref:t,...d})});c.displayName="Button"},59434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(52596),i=s(39688);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.QP)((0,a.$)(t))}},85057:(e,t,s)=>{"use strict";s.d(t,{J:()=>c});var a=s(95155),i=s(12115),n=s(40968),r=s(74466),o=s(59434);let l=(0,r.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(n.b,{ref:t,className:(0,o.cn)(l(),s),...i})});c.displayName=n.b.displayName},95272:(e,t,s)=>{Promise.resolve().then(s.bind(s,98390))},98390:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ef});var a=s(95155),i=s(12115),n=s(5041),r=s(85057),o=s(38280),l=s(54395),c=s(31951),d=s(26884),m=s(6942),h=s(30285);let u=async e=>{let t=new FormData;e.file&&(t.append("file",e.file),t.append("title",e.file.name||"Untitled Score"),t.append("composer","Anonymous"),t.append("analyze","true"));let s=await fetch("".concat("https://api.notadb.xyz:8443","/api/upload/"),{method:"POST",body:t});if(!s.ok)throw Error((await s.json()).message||"Failed to upload file");return s.json()},f={"application/pdf":"PDF","image/jpeg":"JPEG","image/jpg":"JPG","image/png":"PNG","image/gif":"GIF","image/bmp":"BMP","image/tiff":"TIFF","image/webp":"WebP"},p=[".pdf",".jpg",".jpeg",".png",".gif",".bmp",".tiff",".webp"];function g(e){let{onUploadSuccess:t,isProcessing:s}=e,[g,x]=(0,i.useState)([]),[y,b]=(0,i.useState)(null);(0,i.useEffect)(()=>()=>{g.forEach(e=>{e.previewUrl&&URL.revokeObjectURL(e.previewUrl)})},[g]);let{mutate:w,isPending:v}=(0,n.n)({mutationFn:u,onSuccess:e=>{m.$e.show({title:"Success",message:e.message||"File uploaded successfully",color:"green",icon:(0,a.jsx)(o.A,{}),position:"top-center"}),g.forEach(e=>{e.previewUrl&&URL.revokeObjectURL(e.previewUrl)}),x([]),b(null),t(e.score_id,e.task_id)},onError:e=>{b(e.message),m.$e.show({title:"Error",message:e.message,color:"red",icon:(0,a.jsx)(l.A,{}),position:"top-center"})}}),j=e=>Object.keys(f).includes(e.type),N=e=>f[e.type]||"Unknown",_=e=>e.type.startsWith("image/"),k=e=>{let t={file:e};return _(e)&&(t.previewUrl=URL.createObjectURL(e)),t},A=e=>{if(!j(e)){let e=Object.values(f).join(", ");return b("Only ".concat(e," files are allowed")),!1}return!(e.size>5242880)||(b("File size exceeds 5MB limit"),!1)},C=(0,i.useCallback)(e=>{if(s)return;b(null),g.forEach(e=>{e.previewUrl&&URL.revokeObjectURL(e.previewUrl)});let t=e.filter(A);t.length>0&&x(t.slice(0,1).map(k))},[s,g]),S=e=>_(e)?(0,a.jsx)(c.A,{size:24,className:"text-orange-500"}):(0,a.jsx)(d.A,{size:24,className:"text-orange-500"}),I=()=>{g.forEach(e=>{e.previewUrl&&URL.revokeObjectURL(e.previewUrl)}),x([]),b(null)};return(0,a.jsx)("div",{children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),!s&&g[0]&&w({file:g[0].file})},children:[(0,a.jsx)(r.J,{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Upload Music Score (PDF or Image)"}),(0,a.jsx)("div",{className:"border-2 border-dashed rounded-lg p-6 cursor-pointer\n            ".concat(g.length?"border-orange-500 bg-orange-50":"border-gray-300","\n            ").concat(y?"border-red-500 bg-red-50":"","\n            ").concat(s?"opacity-50 cursor-not-allowed":"hover:border-orange-500","\n            transition-colors"),onDrop:e=>{e.preventDefault(),s||C(Array.from(e.dataTransfer.files))},onDragOver:e=>e.preventDefault(),onClick:()=>{if(s)return;let e=document.createElement("input");e.type="file",e.accept=p.join(","),e.onchange=e=>{let t=e.target;t.files&&C(Array.from(t.files))},e.click()},children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[g.length>0?_(g[0].file)?(0,a.jsx)(c.A,{size:52,className:"text-orange-500"}):(0,a.jsx)(d.A,{size:52,className:"text-orange-500"}):(0,a.jsx)(o.A,{size:52,className:"text-gray-400"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-xl",children:g.length?"".concat(g.length," file selected"):"Drag a PDF or image file here or click to select"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Supported formats: PDF, JPEG, PNG, TIFF"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Maximum file size: 5MB"}),y&&(0,a.jsx)("p",{className:"text-sm text-red-500 mt-2",children:y})]})]})}),g.length>0&&(0,a.jsx)("div",{className:"space-y-4 mt-4",children:g.map((e,t)=>(0,a.jsx)("div",{className:"bg-orange-50 rounded-md overflow-hidden border border-orange-200",children:(0,a.jsxs)("div",{className:"flex items-start justify-between p-3",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[S(e.file),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:e.file.name}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[N(e.file)," â€¢"," ",(e.file.size/1024/1024).toFixed(2)," ","MB"]})]})]}),e.previewUrl&&(0,a.jsx)("div",{className:"flex-1 max-w-xs",children:(0,a.jsx)("img",{src:e.previewUrl,alt:"Preview",className:"max-w-full max-h-32 object-contain rounded border border-orange-200"})})]}),(0,a.jsx)(h.$,{variant:"ghost",size:"sm",onClick:I,disabled:s,className:"ml-2",children:(0,a.jsx)(l.A,{size:20})})]})},t))}),(0,a.jsx)(h.$,{type:"submit",disabled:v||!g.length||s,className:"mt-4 bg-orange-500 hover:bg-orange-600 text-white",children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Uploading..."]}):"Upload Score"})]})})}var x=s(59434);let y=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,x.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...i})});y.displayName="Card";let b=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,x.cn)("flex flex-col space-y-1.5 p-3",s),...i})});b.displayName="CardHeader";let w=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,x.cn)("text-2xl font-semibold leading-none tracking-tight",s),...i})});w.displayName="CardTitle",i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,x.cn)("text-sm text-muted-foreground",s),...i})}).displayName="CardDescription";let v=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,x.cn)("p-2 pt-0",s),...i})});v.displayName="CardContent",i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,x.cn)("flex items-center p-6 pt-0",s),...i})}).displayName="CardFooter";var j=s(32960);let N=(0,i.createContext)(void 0),_=async(e,t)=>{let s=await fetch("".concat("https://api.notadb.xyz:8443","/api/scores/").concat(e,"/?task_id=").concat(t));if(!s.ok){let e=Error((await s.json().catch(()=>({}))).message||"Server error: ".concat(s.status));throw e.status=s.status,e.isServerError=s.status>=500,e}return await s.json()},k=e=>{let{scoreId:t,taskId:s,children:i}=e,{data:n,error:r,isLoading:o,refetch:l}=(0,j.I)({queryKey:["score",t,s],queryFn:()=>_(t,s),enabled:!!t&&!!s,refetchInterval:e=>{var t,s;let a=e.state.data,i=e.state.error;return(!i||!i.isServerError)&&!(e.state.errorUpdateCount>=3)&&!!a&&(null==a?void 0:null===(t=a.task_status)||void 0===t?void 0:t.state)==="PENDING"&&(null==a||null===(s=a.score)||void 0===s||!s.processed)&&3e3},retry:(e,t)=>!t.isServerError&&!(e>=3),retryDelay:e=>Math.min(1e3*2**e,1e4)});return(0,a.jsx)(N.Provider,{value:{scoreData:n,isLoading:o,error:r,refetch:l},children:i})},A=()=>{let e=(0,i.useContext)(N);if(void 0===e)throw Error("useScoreData must be used within a ScoreDataProvider");return e};var C=s(16809);let S=C.bL,I=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(C.B8,{ref:t,className:(0,x.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...i})});I.displayName=C.B8.displayName;let T=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(C.l9,{ref:t,className:(0,x.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...i})});T.displayName=C.l9.displayName;let M=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(C.UC,{ref:t,className:(0,x.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...i})});M.displayName=C.UC.displayName;let D=(0,s(74466).F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),E=i.forwardRef((e,t)=>{let{className:s,variant:i,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,x.cn)(D({variant:i}),s),...n})});E.displayName="Alert",i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("h5",{ref:t,className:(0,x.cn)("mb-1 font-medium leading-none tracking-tight",s),...i})}).displayName="AlertTitle";let R=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,x.cn)("text-sm [&_p]:leading-relaxed",s),...i})});R.displayName="AlertDescription";var F=s(52655);let B=()=>(0,a.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}),(0,a.jsx)("span",{className:"ml-3 text-muted-foreground",children:"Loading sheet music..."})]}),L=e=>{let{message:t}=e;return(0,a.jsx)("div",{className:"flex items-center justify-center p-8 bg-destructive/10 border border-destructive/20 rounded-lg",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-destructive text-lg font-semibold mb-2",children:"Error Loading Sheet Music"}),(0,a.jsx)("div",{className:"text-destructive/80 text-sm",children:t})]})})},W=e=>{let{musicXML:t,width:s,height:n,showLoadingSpinner:r=!0,className:o="",onLoad:l,onError:c,renderingOptions:d={}}=e,m=(0,i.useRef)(null),h=(0,i.useRef)(null),u=(0,i.useRef)(null),[f,p]=(0,i.useState)(!1),[g,x]=(0,i.useState)(null),[y,b]=(0,i.useState)({width:0,height:0}),w=(0,i.useCallback)(e=>{var t,s,a;return{autoResize:!0,backend:"svg",drawTitle:null===(t=d.drawTitle)||void 0===t||t,drawComposer:null===(s=d.drawComposer)||void 0===s||s,drawFingerings:null!==(a=d.drawFingerings)&&void 0!==a&&a,drawCredits:!1,drawPartNames:!(e<768),followCursor:!1,defaultColorMusic:"#1f1f1f",pageFormat:d.pageFormat||"",spacingFactorSoftmax:.7,measureSpacing:.8,staffSpacing:.8,systemSpacing:.8,autoResizeEnabled:!0,autoBeam:!0,pageBackgroundColor:"#ffffff",renderSingleHorizontalStaffline:!1,notesSpacing:.8,pageTopMargin:10,pageBottomMargin:10,pageLeftMargin:10,pageRightMargin:10,systemLeftMargin:5,systemRightMargin:5,staffDistance:60,systemDistance:80}},[d]),v=(0,i.useCallback)((()=>{let e;let s=!1;return window.addEventListener("scroll",()=>{s=!0,clearTimeout(e),e=setTimeout(()=>{s=!1},150)},{passive:!0}),()=>{if(clearTimeout(e),!s&&m.current&&t){let t=m.current.getBoundingClientRect(),s=y.width,a=y.height,i=Math.abs(t.width-s),n=Math.abs(t.height-a);(i>50||n>50)&&(e=setTimeout(()=>{b({width:t.width,height:t.height}),j()},500))}}})(),[t,y.width,y.height]),j=(0,i.useCallback)(async()=>{if(m.current&&t){p(!0),x(null);try{var e;let a=m.current.getBoundingClientRect(),i=a.width||s||800,r=a.height||n||600;m.current.innerHTML="";let o={...w(i),autoResize:!1,autoResizeEnabled:!1};h.current=new F.OpenSheetMusicDisplay(m.current,o),await h.current.load(t);let c=null!==(e=d.baseZoom)&&void 0!==e?e:.65,u=i<768;h.current.zoom=c*(u?.9:1),h.current.render(),b({width:i,height:r}),p(!1),null==l||l()}catch(t){let e=t instanceof Error?t.message:"Unknown error occurred";x(e),p(!1),null==c||c(e)}}},[t,s,n,w,l,c,d.baseZoom]);return(0,i.useEffect)(()=>(m.current&&(u.current=new ResizeObserver(v),u.current.observe(m.current)),()=>{u.current&&u.current.disconnect()}),[v]),(0,i.useEffect)(()=>{if(t&&m.current){let e=setTimeout(j,100);return()=>clearTimeout(e)}},[t,j]),(0,i.useEffect)(()=>()=>{if(h.current){try{h.current.clear()}catch(e){}h.current=null}u.current&&u.current.disconnect()},[]),(0,a.jsxs)("div",{className:"osmd-wrapper w-full ".concat(o),children:[f&&r&&(0,a.jsx)(B,{}),g&&(0,a.jsx)(L,{message:g}),(0,a.jsx)("div",{ref:m,className:"osmd-container w-full min-h-[300px] sm:min-h-[400px] lg:min-h-[500px] overflow-auto bg-white rounded-lg shadow-sm border border-border",style:{width:s?"".concat(s,"px"):"100%",height:n?"".concat(n,"px"):"auto",display:f||g?"none":"block",minHeight:"400px",willChange:"auto",contain:"layout style paint"}}),!1]})};var z=s(98921),G=s(31949),U=s(11133),P=s(9255),q=s(8531),O=s(4582),H=s(68718),$=s(45554),K=s(74601);let V=e=>e.split("\n\n").map((e,t)=>e.trim()?(0,a.jsx)("p",{className:"mb-4 text-gray-700 leading-relaxed",children:(e=>{let t;let s=[],i=0,n=/(\*\*\*[^*]+\*\*\*|\*\*[^*]+\*\*|\*[^*]+\*)/g;for(;null!==(t=n.exec(e));){t.index>i&&s.push(e.slice(i,t.index));let n=t[0],r=n.replace(/\*/g,"");n.startsWith("***")?s.push((0,a.jsx)("strong",{className:"font-bold text-gray-900",children:r},"bold-".concat(t.index))):n.startsWith("**")?s.push((0,a.jsx)("strong",{className:"font-semibold text-gray-800",children:r},"bold-".concat(t.index))):n.startsWith("*")&&s.push((0,a.jsx)("em",{className:"italic text-gray-700",children:r},"italic-".concat(t.index))),i=t.index+n.length}return i<e.length&&s.push(e.slice(i)),s.length>0?s:[e]})(e)},t):null).filter(Boolean);var X=s(53776),J=s(37648),Q=s(50286),Y=s(18271),Z=s(15222),ee=s(60620);let et=e=>{var t,s,i,n,r,o,l,c;let{results:d,musicXmlContent:m,parsedMidi:h}=e,u=(()=>{var e,t,s,a;let i=[],n=(null===(e=d.notable_elements)||void 0===e?void 0:e.articulations)||{};return(null===(t=n.staccato)||void 0===t?void 0:t.has_staccato)&&i.push("Staccato (".concat(n.staccato.count,")")),(null===(s=n.accent)||void 0===s?void 0:s.has_accent)&&i.push("Accent (".concat(n.accent.count,")")),(null===(a=n.tenuto)||void 0===a?void 0:a.has_tenuto)&&i.push("Tenuto (".concat(n.tenuto.count,")")),i})(),f=(()=>{var e,t;let s=(null===(t=d.notable_elements)||void 0===t?void 0:null===(e=t.dynamics)||void 0===e?void 0:e.values)||[],a={ppp:"pianississimo",pp:"pianissimo",p:"piano",mp:"mezzo-piano",mf:"mezzo-forte",f:"forte",ff:"fortissimo",fff:"fortississimo",sf:"sforzando",sfz:"sforzando",fp:"forte-piano",cresc:"crescendo",dim:"diminuendo",decresc:"decrescendo"};return s.map(e=>{let t=a[e.toLowerCase()]||e;return"".concat(e," (").concat(t,")")})})();return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-blue-600 mb-1",children:"Key Signature"}),(0,a.jsx)("div",{className:"text-lg font-bold text-blue-900",children:d.key||"Not specified"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border border-green-200",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-green-600 mb-1",children:"Time Signature"}),(0,a.jsx)("div",{className:"text-lg font-bold text-green-900",children:(()=>{var e,t,s;return d.time_signature&&"No time signature found"!==d.time_signature?d.time_signature:(null===(s=d.meter_changes)||void 0===s?void 0:null===(t=s.time_signatures)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.signature)?d.meter_changes.time_signatures[0].signature:"Not specified"})()})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-4 rounded-lg border border-orange-200",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-orange-600 mb-1",children:[(0,a.jsx)(J.A,{className:"inline h-4 w-4 mr-1"}),"Tempo"]}),(0,a.jsx)("div",{className:"text-lg font-bold text-orange-900",children:(()=>{var e,t,s;return d.tempo&&!d.tempo.error?d.tempo:(null==h?void 0:null===(s=h.header)||void 0===s?void 0:null===(t=s.tempos)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.bpm)?"".concat(h.header.tempos[0].bpm," BPM"):"Not specified"})()})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg border border-purple-200",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-purple-600 mb-1",children:"MusicXML"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(O.A,{className:"h-4 w-4 text-purple-700"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-purple-900",children:m?"Available":"Not Available"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 p-4 rounded-lg border border-indigo-200",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-indigo-600 mb-1",children:[(0,a.jsx)(Q.A,{className:"inline h-4 w-4 mr-1"}),"Score Type"]}),(0,a.jsx)("div",{className:"text-lg font-bold text-indigo-900",children:(()=>{var e,t,s;let a=(null===(e=d.measures)||void 0===e?void 0:e.total_measures)||0,i=(null===(t=d.instrumentation)||void 0===t?void 0:t.total_parts)||0;return 0===a||0===i?"Unknown":((null===(s=d.measures)||void 0===s?void 0:s.measures_per_part)||[]).every(e=>e.measure_count===a)?"Closed":"Open"})()})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100 p-4 rounded-lg border border-teal-200",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-teal-600 mb-1",children:"Ensemble Type"}),(0,a.jsx)("div",{className:"text-lg font-bold text-teal-900",children:(null===(t=d.score_structure)||void 0===t?void 0:t.ensemble_type)||"Not specified"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-rose-50 to-rose-100 p-4 rounded-lg border border-rose-200",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-rose-600 mb-1",children:"Music Type"}),(0,a.jsx)("div",{className:"text-lg font-bold text-rose-900",children:(null===(s=d.score_structure)||void 0===s?void 0:s.music_type)||"Not specified"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,a.jsx)(z.A,{className:"h-5 w-5 mr-2 text-blue-600"}),"Instrumentation"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Instruments:"}),(0,a.jsx)("p",{className:"text-gray-800",children:(()=>{var e;return((null===(e=d.instrumentation)||void 0===e?void 0:e.unique_instruments)||[]).join(", ")||"Not specified"})()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Total Parts:"}),(0,a.jsx)("span",{className:"ml-2 text-gray-800",children:(null===(i=d.instrumentation)||void 0===i?void 0:i.total_parts)||0})]}),(null===(n=d.instrumentation)||void 0===n?void 0:n.instrument_families)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Instrument Families:"}),(0,a.jsx)("div",{className:"mt-1 flex flex-wrap gap-2",children:Object.entries(d.instrumentation.instrument_families).map(e=>{let[t,s]=e;return(0,a.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:[t,": ",String(s)]},t)})})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,a.jsx)(Y.A,{className:"h-5 w-5 mr-2 text-green-600"}),"Structure"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Total Measures:"}),(0,a.jsx)("span",{className:"ml-2 text-gray-800",children:(null===(r=d.measures)||void 0===r?void 0:r.total_measures)||0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Has Pickup:"}),(0,a.jsx)("span",{className:"ml-2 text-gray-800",children:(null===(o=d.measures)||void 0===o?void 0:o.has_pickup)?"Yes":"No"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Incomplete Measures:"}),(0,a.jsx)("span",{className:"ml-2 text-gray-800",children:(null===(l=d.measures)||void 0===l?void 0:l.incomplete_measures)||0})]}),(null===(c=d.meter_changes)||void 0===c?void 0:c.has_meter_changes)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Meter Changes:"}),(0,a.jsx)("span",{className:"ml-2 text-gray-800",children:d.meter_changes.total_changes})]})]})]})]}),(u.length>0||f.length>0)&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.length>0&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,a.jsx)(Z.A,{className:"h-5 w-5 mr-2 text-purple-600"}),"Articulations"]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:u.map((e,t)=>(0,a.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm",children:e},t))})]}),f.length>0&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,a.jsx)(ee.A,{className:"h-5 w-5 mr-2 text-red-600"}),"Dynamics"]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:f.map((e,t)=>(0,a.jsx)("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm",children:e},t))})]})]}),0===u.length&&0===f.length&&(0,a.jsx)("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:(0,a.jsx)("p",{className:"text-gray-600 text-center",children:"No specific articulations or dynamics markings detected in this score."})})]})};var es=s(90588),ea=s(41077);let ei={grandPiano:{name:"Grand Piano (HQ)",type:"tonejs-piano"},piano:{name:"Salamander Piano",type:"sampler",urls:{A0:"A0.mp3",A1:"A1.mp3",A2:"A2.mp3",A3:"A3.mp3",A4:"A4.mp3",A5:"A5.mp3",A6:"A6.mp3",A7:"A7.mp3",C1:"C1.mp3",C2:"C2.mp3",C3:"C3.mp3",C4:"C4.mp3",C5:"C5.mp3",C6:"C6.mp3",C7:"C7.mp3",C8:"C8.mp3","D#1":"Ds1.mp3","D#2":"Ds2.mp3","D#3":"Ds3.mp3","D#4":"Ds4.mp3","D#5":"Ds5.mp3","D#6":"Ds6.mp3","D#7":"Ds7.mp3","F#1":"Fs1.mp3","F#2":"Fs2.mp3","F#3":"Fs3.mp3","F#4":"Fs4.mp3","F#5":"Fs5.mp3","F#6":"Fs6.mp3","F#7":"Fs7.mp3"},baseUrl:"https://tonejs.github.io/audio/salamander/"},violin:{name:"Violin",type:"sampler",urls:{G3:"G3.mp3",D4:"D4.mp3",A4:"A4.mp3",E5:"E5.mp3",G4:"G4.mp3",D5:"D5.mp3",A5:"A5.mp3",E6:"E6.mp3"},baseUrl:"https://gleitz.github.io/midi-js-soundfonts/FluidR3_GM/violin-mp3/"},cello:{name:"Cello",type:"sampler",urls:{C2:"C2.mp3",G2:"G2.mp3",D3:"D3.mp3",A3:"A3.mp3",C3:"C3.mp3",G3:"G3.mp3",D4:"D4.mp3",A4:"A4.mp3"},baseUrl:"https://gleitz.github.io/midi-js-soundfonts/FluidR3_GM/cello-mp3/"},synth:{name:"Classic Synth",type:"synth",synthType:es.RG},amSynth:{name:"AM Synth",type:"synth",synthType:es.Pe},fmSynth:{name:"FM Synth",type:"synth",synthType:es.OH}};function en(e){let{midiData:t,midiError:s,isLoadingMidi:n}=e,[r,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)(null),[d,m]=(0,i.useState)(null),[u,f]=(0,i.useState)(null),[p,g]=(0,i.useState)(0),[x,y]=(0,i.useState)(0),[b,w]=(0,i.useState)(!1),[v,j]=(0,i.useState)("piano"),[N,_]=(0,i.useState)(!1),[k,A]=(0,i.useState)(!1),C=(0,i.useRef)(null),[S,I]=(0,i.useState)(120),[T,M]=(0,i.useState)(120);(0,i.useEffect)(()=>{t&&!u&&F()},[t,u]),(0,i.useEffect)(()=>{u&&l&&F()},[v]),(0,i.useEffect)(()=>()=>{C.current&&clearInterval(C.current)},[]);let D=async e=>{let t=ei[e];if("tonejs-piano"===t.type){let e=ei.piano;return new Promise((t,s)=>{let a=new es.LC({urls:e.urls,baseUrl:e.baseUrl,onload:()=>{t(a.toDestination())},onerror:e=>{t(new es.Bh(es.RG).toDestination())}})})}if("sampler"===t.type)return new Promise((e,s)=>{let a=new es.LC({urls:t.urls,baseUrl:t.baseUrl,onload:()=>{e(a.toDestination())},onerror:t=>{e(new es.Bh(es.RG).toDestination())}})});{let e=new t.synthType;return new es.Bh(e.constructor).toDestination()}},F=async()=>{w(!0),_(!0);try{let e=u;if(!e&&t&&(e=new ea.Midi(t),f(e),y(e.duration),e.header.tempos&&e.header.tempos.length>0)){let t=e.header.tempos[0].bpm;M(t),I(t)}let s=await D(v);c({instrument:s,midi:e}),m(null)}catch(e){m("Failed to initialize ".concat(ei[v].name))}finally{w(!1),_(!1)}},B=e=>{let t=Math.floor(e/60),s=Math.floor(e%60);return"".concat(t,":").concat(s.toString().padStart(2,"0"))},L=()=>{C.current&&clearInterval(C.current),C.current=setInterval(()=>{let e=es.oD().seconds;g(e),e>=x&&G()},100)},W=()=>{C.current&&(clearInterval(C.current),C.current=null)},G=()=>{es.oD().stop(),es.oD().cancel(),W(),o(!1),g(0)},U=e=>{l&&u&&(r&&G(),g(e),r&&P(e))},P=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(l&&u)try{"suspended"===es.SD().state&&await es.ni(),es.oD().cancel(),es.oD().bpm.value=S;let{instrument:t,midi:s}=l;s.tracks.forEach(s=>{s.notes.forEach(s=>{s.time>=e&&es.oD().schedule(e=>{t.triggerAttackRelease&&t.triggerAttackRelease(s.name,s.duration,e,s.velocity)},s.time-e)})}),es.oD().start(),L(),o(!0)}catch(e){m("Playback failed: "+(e instanceof Error?e.message:String(e))),o(!1)}},q=e=>{if(I(e),r&&(es.oD().bpm.value=e),u){let t=T/e;y(u.duration*t)}},O=async()=>{l&&u&&(r?G():await P(p))},H=e=>{r&&G(),j(e),A(!1)};return t||n?(0,a.jsxs)("div",{className:"flex flex-col gap-4 w-full max-w-2xl mx-auto",children:[n&&(0,a.jsx)(E,{children:(0,a.jsxs)(R,{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-orange-500"}),"Loading MIDI file..."]})}),N&&(0,a.jsx)(E,{children:(0,a.jsxs)(R,{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),"Loading"," ",ei[v].name,"..."]})}),s&&(0,a.jsx)(E,{variant:"destructive",children:(0,a.jsx)(R,{children:"It was not possible to generate MIDI from the file you uploaded."})}),d&&(0,a.jsx)(E,{variant:"destructive",children:(0,a.jsx)(R,{children:d})}),t&&!s&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-4 shadow-sm",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(z.A,{className:"h-4 w-4 text-orange-600"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Instrument:"," ",ei[v].name]})]}),(0,a.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>A(!k),className:"text-xs",disabled:N,children:"Change"})]}),k&&(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 p-3 bg-gray-50 rounded-lg border",children:Object.entries(ei).map(e=>{let[t,s]=e;return(0,a.jsx)(h.$,{variant:v===t?"default":"outline",size:"sm",onClick:()=>H(t),className:"text-xs ".concat(v===t?"bg-orange-600 hover:bg-orange-700 text-white":"hover:bg-gray-100"),disabled:N,children:s.name},t)})})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Tempo: ",Math.round(S)," BPM"]}),(0,a.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>q(T),className:"text-xs",disabled:N,children:"Reset"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"50"}),(0,a.jsx)("input",{type:"range",min:"50",max:"200",step:"1",value:S,onChange:e=>q(Number(e.target.value)),disabled:N,className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",style:{background:"linear-gradient(to right, #ea580c 0%, #ea580c ".concat((S-50)/150*100,"%, #e5e7eb ").concat((S-50)/150*100,"%, #e5e7eb 100%)")}}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"200"})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[(0,a.jsx)("span",{children:"Slower"}),(0,a.jsxs)("span",{children:["Original: ",Math.round(T)," BPM"]}),(0,a.jsx)("span",{children:"Faster"})]})]}),u&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-1",children:[(0,a.jsx)("span",{children:B(p)}),(0,a.jsx)("span",{children:"/"}),(0,a.jsx)("span",{children:B(x)})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-orange-500 transition-all duration-100 ease-linear",style:{width:"".concat(x>0?p/x*100:0,"%")}})}),(0,a.jsx)("button",{className:"absolute inset-0 w-full h-full cursor-pointer hover:bg-black hover:bg-opacity-10 rounded-full",onClick:e=>{let t=e.currentTarget.getBoundingClientRect();U(Math.max(0,Math.min((e.clientX-t.left)/t.width*x,x)))},disabled:!l||b||N})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>{G(),g(0)},disabled:!l||b||N,className:"flex items-center justify-center w-10 h-10",children:(0,a.jsx)("div",{className:"h-3 w-3 bg-current"})}),(0,a.jsx)(h.$,{variant:r?"default":"outline",size:"sm",onClick:O,disabled:!l||b||N,className:"flex items-center justify-center w-12 h-10",children:b||N?(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}):r?(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("div",{className:"w-1 h-4 bg-white"}),(0,a.jsx)("div",{className:"w-1 h-4 bg-white"})]}):(0,a.jsx)("div",{className:"w-0 h-0 border-l-[8px] border-l-current border-y-[6px] border-y-transparent ml-1"})}),u&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 ml-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(r?"bg-green-500 animate-pulse":"bg-gray-400")}),(0,a.jsx)("span",{className:"hidden sm:inline",children:r?"Playing":"Ready"})]})]})]})]}):null}var er=s(17569),eo=s(31550),el=s(965),ec=s(73158);let ed=JSON.parse('{"k":[{"id":"56cea655-ef10-4ec8-8887-5cc37bf21bc3","type":"mini_lesson","category":"harmony","duration":"20-30","title":"What is a Chord?","content":"A chord is when you play three or more notes at the same time. The most common type of chord is the triad, which is made of a root, third, and fifth. Try playing C, E, and G on a keyboard â€“ thatâ€™s a C major chord!","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"4cbbdc01-cec4-46bf-a9d0-53aeb1121c7e","type":"mini_lesson","category":"harmony","duration":"20-30","title":"What is a Key Signature?","content":"A key signature is a set of sharp (#) or flat (b) symbols at the beginning of a staff. It tells you which notes are always sharp or flat in a piece of music. For example, one sharp usually means youâ€™re in the key of G major.","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"494442bb-2574-4bce-9f25-f1b27f50025c","type":"mini_lesson","category":"harmony","duration":"20-30","title":"What is a Major Scale?","content":"A major scale is a sequence of notes with a specific pattern: whole, whole, half, whole, whole, whole, half. Try it on the piano starting at C â€“ thatâ€™s the C major scale!","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"634783d1-548d-461a-89b5-63441f34c16b","type":"mini_lesson","category":"harmony","duration":"20-30","title":"How Chords Fit in a Key","content":"In any key, there are chords built on each note. These chords usually follow a pattern: major, minor, minor, major, major, minor, diminished. In C major, that gives you C, Dm, Em, F, G, Am, Bdim.","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"b528a818-6ca6-483b-97f8-144527981a59","type":"mini_lesson","category":"form","duration":"20-30","title":"What is Musical Form?","content":"Musical form is how music is organized. Common forms include ABA (ternary) and AABA. Itâ€™s like a musical roadmap that tells you what comes next.","visual_description":"Diagram showing AABA song structure","complexity":"beginner"},{"id":"af33bb1c-450e-491f-87eb-b656514785ac","type":"mini_lesson","category":"form","duration":"20-30","title":"What is a Refrain?","content":"A refrain is a section of music that repeats throughout a song, like a chorus. Itâ€™s often the most memorable part!","visual_description":"Diagram showing AABA song structure","complexity":"beginner"},{"id":"00f941ae-b763-40f7-b8b1-4a7ec81233f0","type":"mini_lesson","category":"form","duration":"20-30","title":"Theme and Variation","content":"This form starts with a simple theme, then repeats it with changes each time. Think of it like decorating the same cake in different ways.","visual_description":"Diagram showing AABA song structure","complexity":"beginner"},{"id":"8d787086-9ae9-407f-a22c-e160a50df161","type":"mini_lesson","category":"rhythm","duration":"20-30","title":"What is Rhythm?","content":"Rhythm is the pattern of sounds and silences in music. It tells you when to play or stay quiet. Itâ€™s what makes music feel like it has a beat.","visual_description":"Graphic showing whole, half, and quarter notes with beat counts","complexity":"beginner"},{"id":"8f456d9b-98e4-4eaa-8204-1627c5d47e97","type":"mini_lesson","category":"rhythm","duration":"20-30","title":"Understanding Time Signatures","content":"A time signature is like a musical clock. It tells you how many beats are in a measure and what kind of note gets one beat. 4/4 means 4 beats per measure, and the quarter note gets one beat.","visual_description":"Graphic showing whole, half, and quarter notes with beat counts","complexity":"beginner"},{"id":"2db22967-9e4a-4b99-92b2-135ae0dc34f6","type":"mini_lesson","category":"rhythm","duration":"20-30","title":"Note Values: Whole, Half, Quarter","content":"A whole note lasts for 4 beats, a half note for 2, and a quarter note for 1. Think of it like cutting a pie â€“ whole is the full pie, half is half, and quarter is one slice out of four.","visual_description":"Graphic showing whole, half, and quarter notes with beat counts","complexity":"beginner"},{"id":"5d76207d-2019-4963-bf8c-b679ab122c96","type":"mini_lesson","category":"rhythm","duration":"20-30","title":"What is a Beat?","content":"The beat is the steady pulse you feel in music â€“ like a ticking clock or your heartbeat. Most songs follow a steady beat to keep everything together.","visual_description":"Graphic showing whole, half, and quarter notes with beat counts","complexity":"beginner"},{"id":"decb0091-ea0c-4b17-9292-610ba1f0d92c","type":"mini_lesson","category":"history","duration":"20-30","title":"What is Sheet Music?","content":"Sheet music is a written version of a song using symbols. It tells musicians what notes to play, how fast, and how loud or soft.","visual_description":"Timeline showing early chant notation to modern sheet music","complexity":"beginner"},{"id":"1719528e-4364-4de1-8c3a-88bf7e7438bf","type":"mini_lesson","category":"history","duration":"20-30","title":"What is a Clef?","content":"A clef is a symbol at the beginning of a staff that tells you which notes go where. The treble clef is for higher notes, and the bass clef is for lower notes.","visual_description":"Timeline showing early chant notation to modern sheet music","complexity":"beginner"},{"id":"8d11b3a2-e6df-4b04-b931-5e059949466e","type":"mini_lesson","category":"history","duration":"20-30","title":"How Music Notation Evolved","content":"Long ago, music was passed down by ear. Over time, symbols were created to write down notes, rhythms, and more. Thatâ€™s how modern sheet music was born.","visual_description":"Timeline showing early chant notation to modern sheet music","complexity":"beginner"},{"id":"5d5a3b06-61c8-4b34-9079-40ef5fdd2cfe","type":"mini_lesson","category":"analysis","duration":"20-30","title":"Reading a Staff","content":"The staff is made of 5 lines and 4 spaces. Each line or space represents a note. The clef helps you know which note is which.","visual_description":"Labeled staff diagram showing clef, measures, bar lines","complexity":"beginner"},{"id":"5590f91d-07de-4e9e-9d88-8741907db90c","type":"mini_lesson","category":"analysis","duration":"20-30","title":"What is a Measure?","content":"A measure is a section of the staff that holds a certain number of beats, based on the time signature. It helps organize the rhythm.","visual_description":"Labeled staff diagram showing clef, measures, bar lines","complexity":"beginner"},{"id":"56c7ba96-eded-41f2-8901-e7c687ecf20c","type":"mini_lesson","category":"analysis","duration":"20-30","title":"What is a Bar Line?","content":"Bar lines are vertical lines that divide the staff into measures. They help you keep track of where you are in the music.","visual_description":"Labeled staff diagram showing clef, measures, bar lines","complexity":"beginner"},{"id":"0663c042-3b2b-4d83-998f-8e83658814fe","type":"mini_lesson","category":"harmony","duration":"20-30","title":"What is a Major Scale?","content":"A major scale is a sequence of notes with a specific pattern: whole, whole, half, whole, whole, whole, half. Try it on the piano starting at C â€“ thatâ€™s the C major scale!","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"5e49477f-b11a-403d-9c4a-0cb29de2ed6f","type":"mini_lesson","category":"analysis","duration":"20-30","title":"Reading a Staff","content":"The staff is made of 5 lines and 4 spaces. Each line or space represents a note. The clef helps you know which note is which.","visual_description":"Labeled staff diagram showing clef, measures, bar lines","complexity":"beginner"},{"id":"b424004c-9d4c-4c0d-af89-121acf6b1df1","type":"mini_lesson","category":"analysis","duration":"20-30","title":"What is a Bar Line?","content":"Bar lines are vertical lines that divide the staff into measures. They help you keep track of where you are in the music.","visual_description":"Labeled staff diagram showing clef, measures, bar lines","complexity":"beginner"},{"id":"3ab28b38-c793-44a0-ad59-9f622849c2fe","type":"mini_lesson","category":"analysis","duration":"20-30","title":"What is a Measure?","content":"A measure is a section of the staff that holds a certain number of beats, based on the time signature. It helps organize the rhythm.","visual_description":"Labeled staff diagram showing clef, measures, bar lines","complexity":"beginner"},{"id":"e7bc1fd3-6c70-45f6-8436-eced0a4bfa77","type":"mini_lesson","category":"analysis","duration":"20-30","title":"Reading a Staff","content":"The staff is made of 5 lines and 4 spaces. Each line or space represents a note. The clef helps you know which note is which.","visual_description":"Labeled staff diagram showing clef, measures, bar lines","complexity":"beginner"},{"id":"4ece7ecf-f13a-4e6c-897c-4227ac7ebb52","type":"mini_lesson","category":"history","duration":"20-30","title":"What is Sheet Music?","content":"Sheet music is a written version of a song using symbols. It tells musicians what notes to play, how fast, and how loud or soft.","visual_description":"Timeline showing early chant notation to modern sheet music","complexity":"beginner"},{"id":"5ec2119d-d65e-4dff-84b3-43d046357c1d","type":"mini_lesson","category":"harmony","duration":"20-30","title":"What is a Key Signature?","content":"A key signature is a set of sharp (#) or flat (b) symbols at the beginning of a staff. It tells you which notes are always sharp or flat in a piece of music. For example, one sharp usually means youâ€™re in the key of G major.","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"47623670-acc2-484b-b06c-85c1ad74dfc5","type":"mini_lesson","category":"rhythm","duration":"20-30","title":"What is Rhythm?","content":"Rhythm is the pattern of sounds and silences in music. It tells you when to play or stay quiet. Itâ€™s what makes music feel like it has a beat.","visual_description":"Graphic showing whole, half, and quarter notes with beat counts","complexity":"beginner"},{"id":"558f6e6b-8501-4363-b765-48f494bd9158","type":"mini_lesson","category":"analysis","duration":"20-30","title":"Reading a Staff","content":"The staff is made of 5 lines and 4 spaces. Each line or space represents a note. The clef helps you know which note is which.","visual_description":"Labeled staff diagram showing clef, measures, bar lines","complexity":"beginner"},{"id":"44f20e3f-6582-4b42-a89d-fba89e05f6a7","type":"mini_lesson","category":"analysis","duration":"20-30","title":"What is a Measure?","content":"A measure is a section of the staff that holds a certain number of beats, based on the time signature. It helps organize the rhythm.","visual_description":"Labeled staff diagram showing clef, measures, bar lines","complexity":"beginner"},{"id":"321f2809-eabf-428a-8892-7c7eec7bd900","type":"mini_lesson","category":"harmony","duration":"20-30","title":"How Chords Fit in a Key","content":"In any key, there are chords built on each note. These chords usually follow a pattern: major, minor, minor, major, major, minor, diminished. In C major, that gives you C, Dm, Em, F, G, Am, Bdim.","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"8d84d298-1b35-4ae2-ae1d-720ecd8c6d31","type":"mini_lesson","category":"form","duration":"20-30","title":"Theme and Variation","content":"This form starts with a simple theme, then repeats it with changes each time. Think of it like decorating the same cake in different ways.","visual_description":"Diagram showing AABA song structure","complexity":"beginner"},{"id":"12e75272-f160-4fa4-b12b-49b9787dd046","type":"mini_lesson","category":"form","duration":"20-30","title":"What is Musical Form?","content":"Musical form is how music is organized. Common forms include ABA (ternary) and AABA. Itâ€™s like a musical roadmap that tells you what comes next.","visual_description":"Diagram showing AABA song structure","complexity":"beginner"},{"id":"ee679e06-67e6-446f-84ea-5f539f279af3","type":"mini_lesson","category":"rhythm","duration":"20-30","title":"What is a Beat?","content":"The beat is the steady pulse you feel in music â€“ like a ticking clock or your heartbeat. Most songs follow a steady beat to keep everything together.","visual_description":"Graphic showing whole, half, and quarter notes with beat counts","complexity":"beginner"},{"id":"83ad4111-c1d2-4c85-bd28-f1e8d19f4a3f","type":"mini_lesson","category":"analysis","duration":"20-30","title":"Reading a Staff","content":"The staff is made of 5 lines and 4 spaces. Each line or space represents a note. The clef helps you know which note is which.","visual_description":"Labeled staff diagram showing clef, measures, bar lines","complexity":"beginner"},{"id":"32245102-fa28-4cc1-9fd2-2d182c4baadb","type":"mini_lesson","category":"harmony","duration":"20-30","title":"What is a Key Signature?","content":"A key signature is a set of sharp (#) or flat (b) symbols at the beginning of a staff. It tells you which notes are always sharp or flat in a piece of music. For example, one sharp usually means youâ€™re in the key of G major.","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"d5bc8368-7689-4714-94c8-413e4b37764e","type":"mini_lesson","category":"harmony","duration":"20-30","title":"What is a Key Signature?","content":"A key signature is a set of sharp (#) or flat (b) symbols at the beginning of a staff. It tells you which notes are always sharp or flat in a piece of music. For example, one sharp usually means youâ€™re in the key of G major.","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"d6df34be-cfac-4441-9436-03a02ab3ea2a","type":"mini_lesson","category":"harmony","duration":"20-30","title":"What is a Major Scale?","content":"A major scale is a sequence of notes with a specific pattern: whole, whole, half, whole, whole, whole, half. Try it on the piano starting at C â€“ thatâ€™s the C major scale!","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"398e500c-e1d4-47c6-be9a-02548eb946d5","type":"mini_lesson","category":"harmony","duration":"20-30","title":"What is a Chord?","content":"A chord is when you play three or more notes at the same time. The most common type of chord is the triad, which is made of a root, third, and fifth. Try playing C, E, and G on a keyboard â€“ thatâ€™s a C major chord!","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"8a4ec660-f26c-4454-a4dc-a8ce1ed31bc3","type":"mini_lesson","category":"history","duration":"20-30","title":"What is Sheet Music?","content":"Sheet music is a written version of a song using symbols. It tells musicians what notes to play, how fast, and how loud or soft.","visual_description":"Timeline showing early chant notation to modern sheet music","complexity":"beginner"},{"id":"601b0927-e001-4983-a964-316190707fda","type":"mini_lesson","category":"form","duration":"20-30","title":"What is Musical Form?","content":"Musical form is how music is organized. Common forms include ABA (ternary) and AABA. Itâ€™s like a musical roadmap that tells you what comes next.","visual_description":"Diagram showing AABA song structure","complexity":"beginner"},{"id":"ae696726-e302-4812-a1d6-ba2680089ff5","type":"mini_lesson","category":"analysis","duration":"20-30","title":"What is a Bar Line?","content":"Bar lines are vertical lines that divide the staff into measures. They help you keep track of where you are in the music.","visual_description":"Labeled staff diagram showing clef, measures, bar lines","complexity":"beginner"},{"id":"6a24faf2-5cba-4486-99c4-c82a4380ffd2","type":"mini_lesson","category":"harmony","duration":"20-30","title":"How Chords Fit in a Key","content":"In any key, there are chords built on each note. These chords usually follow a pattern: major, minor, minor, major, major, minor, diminished. In C major, that gives you C, Dm, Em, F, G, Am, Bdim.","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"13b264a3-f03d-499e-b7b6-9942d70e87c3","type":"mini_lesson","category":"analysis","duration":"20-30","title":"What is a Measure?","content":"A measure is a section of the staff that holds a certain number of beats, based on the time signature. It helps organize the rhythm.","visual_description":"Labeled staff diagram showing clef, measures, bar lines","complexity":"beginner"},{"id":"6553c569-a70c-491a-aee4-a45818f68d5d","type":"mini_lesson","category":"harmony","duration":"20-30","title":"What is a Major Scale?","content":"A major scale is a sequence of notes with a specific pattern: whole, whole, half, whole, whole, whole, half. Try it on the piano starting at C â€“ thatâ€™s the C major scale!","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"3ec722c8-315d-44a7-938a-1cd9b0760abd","type":"mini_lesson","category":"rhythm","duration":"20-30","title":"Understanding Time Signatures","content":"A time signature is like a musical clock. It tells you how many beats are in a measure and what kind of note gets one beat. 4/4 means 4 beats per measure, and the quarter note gets one beat.","visual_description":"Graphic showing whole, half, and quarter notes with beat counts","complexity":"beginner"},{"id":"d3aafe73-7ede-490a-845f-2c250e93deb2","type":"mini_lesson","category":"rhythm","duration":"20-30","title":"What is a Beat?","content":"The beat is the steady pulse you feel in music â€“ like a ticking clock or your heartbeat. Most songs follow a steady beat to keep everything together.","visual_description":"Graphic showing whole, half, and quarter notes with beat counts","complexity":"beginner"},{"id":"19e6acb6-8707-47b2-8a19-2959ec70f4a6","type":"mini_lesson","category":"history","duration":"20-30","title":"What is Sheet Music?","content":"Sheet music is a written version of a song using symbols. It tells musicians what notes to play, how fast, and how loud or soft.","visual_description":"Timeline showing early chant notation to modern sheet music","complexity":"beginner"},{"id":"beaf4494-d13c-4edc-8785-3d2c0ea77a7a","type":"mini_lesson","category":"harmony","duration":"20-30","title":"What is a Major Scale?","content":"A major scale is a sequence of notes with a specific pattern: whole, whole, half, whole, whole, whole, half. Try it on the piano starting at C â€“ thatâ€™s the C major scale!","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"ba6d0afe-56d2-444a-a4d4-69569112f9ef","type":"mini_lesson","category":"harmony","duration":"20-30","title":"What is a Major Scale?","content":"A major scale is a sequence of notes with a specific pattern: whole, whole, half, whole, whole, whole, half. Try it on the piano starting at C â€“ thatâ€™s the C major scale!","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"b9d102cf-09ff-463b-95d5-b969477936d4","type":"mini_lesson","category":"rhythm","duration":"20-30","title":"What is Rhythm?","content":"Rhythm is the pattern of sounds and silences in music. It tells you when to play or stay quiet. Itâ€™s what makes music feel like it has a beat.","visual_description":"Graphic showing whole, half, and quarter notes with beat counts","complexity":"beginner"},{"id":"f46e2c1b-a34d-4b88-a653-ea1dad7f002f","type":"mini_lesson","category":"form","duration":"20-30","title":"What is Musical Form?","content":"Musical form is how music is organized. Common forms include ABA (ternary) and AABA. Itâ€™s like a musical roadmap that tells you what comes next.","visual_description":"Diagram showing AABA song structure","complexity":"beginner"},{"id":"92c974c0-5927-48bb-9517-48270f11a558","type":"mini_lesson","category":"form","duration":"20-30","title":"What is Musical Form?","content":"Musical form is how music is organized. Common forms include ABA (ternary) and AABA. Itâ€™s like a musical roadmap that tells you what comes next.","visual_description":"Diagram showing AABA song structure","complexity":"beginner"},{"id":"0e44b7ae-2fee-4780-acb6-ea0231612c4b","type":"mini_lesson","category":"rhythm","duration":"20-30","title":"What is Rhythm?","content":"Rhythm is the pattern of sounds and silences in music. It tells you when to play or stay quiet. Itâ€™s what makes music feel like it has a beat.","visual_description":"Graphic showing whole, half, and quarter notes with beat counts","complexity":"beginner"},{"id":"9086e7a1-7d9c-4a96-aa75-751aa3287dec","type":"mini_lesson","category":"form","duration":"20-30","title":"Theme and Variation","content":"This form starts with a simple theme, then repeats it with changes each time. Think of it like decorating the same cake in different ways.","visual_description":"Diagram showing AABA song structure","complexity":"beginner"},{"id":"4c2c1294-dd0a-48ed-b313-779e787fadb5","type":"mini_lesson","category":"form","duration":"20-30","title":"What is Musical Form?","content":"Musical form is how music is organized. Common forms include ABA (ternary) and AABA. Itâ€™s like a musical roadmap that tells you what comes next.","visual_description":"Diagram showing AABA song structure","complexity":"beginner"},{"id":"6f7a71a1-b017-455b-9186-ebb3d5bdf296","type":"mini_lesson","category":"history","duration":"20-30","title":"What is a Clef?","content":"A clef is a symbol at the beginning of a staff that tells you which notes go where. The treble clef is for higher notes, and the bass clef is for lower notes.","visual_description":"Timeline showing early chant notation to modern sheet music","complexity":"beginner"},{"id":"c1672ea5-1f46-4ae1-bc1e-572882fa478b","type":"mini_lesson","category":"history","duration":"20-30","title":"How Music Notation Evolved","content":"Long ago, music was passed down by ear. Over time, symbols were created to write down notes, rhythms, and more. Thatâ€™s how modern sheet music was born.","visual_description":"Timeline showing early chant notation to modern sheet music","complexity":"beginner"},{"id":"c7a19590-39e3-4988-8dfc-cabaa272f606","type":"mini_lesson","category":"harmony","duration":"20-30","title":"What is a Major Scale?","content":"A major scale is a sequence of notes with a specific pattern: whole, whole, half, whole, whole, whole, half. Try it on the piano starting at C â€“ thatâ€™s the C major scale!","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"fc399677-274d-402f-9f04-50fca08170ce","type":"mini_lesson","category":"form","duration":"20-30","title":"Theme and Variation","content":"This form starts with a simple theme, then repeats it with changes each time. Think of it like decorating the same cake in different ways.","visual_description":"Diagram showing AABA song structure","complexity":"beginner"},{"id":"fad9502a-adf3-4276-84aa-4c489326fdcb","type":"mini_lesson","category":"harmony","duration":"20-30","title":"What is a Chord?","content":"A chord is when you play three or more notes at the same time. The most common type of chord is the triad, which is made of a root, third, and fifth. Try playing C, E, and G on a keyboard â€“ thatâ€™s a C major chord!","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"ba3dde32-1b6f-4469-aaf2-e38b9ce59b86","type":"mini_lesson","category":"harmony","duration":"20-30","title":"How Chords Fit in a Key","content":"In any key, there are chords built on each note. These chords usually follow a pattern: major, minor, minor, major, major, minor, diminished. In C major, that gives you C, Dm, Em, F, G, Am, Bdim.","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"e467e220-ed27-4b30-a40e-bf67c3d9b4ea","type":"mini_lesson","category":"form","duration":"20-30","title":"What is Musical Form?","content":"Musical form is how music is organized. Common forms include ABA (ternary) and AABA. Itâ€™s like a musical roadmap that tells you what comes next.","visual_description":"Diagram showing AABA song structure","complexity":"beginner"},{"id":"18bac530-76f8-405e-81b9-a87aa0cf90d4","type":"mini_lesson","category":"rhythm","duration":"20-30","title":"Understanding Time Signatures","content":"A time signature is like a musical clock. It tells you how many beats are in a measure and what kind of note gets one beat. 4/4 means 4 beats per measure, and the quarter note gets one beat.","visual_description":"Graphic showing whole, half, and quarter notes with beat counts","complexity":"beginner"},{"id":"8e576d33-c6a3-4cb3-b13d-cf55dff85425","type":"mini_lesson","category":"form","duration":"20-30","title":"What is Musical Form?","content":"Musical form is how music is organized. Common forms include ABA (ternary) and AABA. Itâ€™s like a musical roadmap that tells you what comes next.","visual_description":"Diagram showing AABA song structure","complexity":"beginner"},{"id":"c49e437d-e332-42f8-bbe9-8e8dee2aa3e5","type":"mini_lesson","category":"rhythm","duration":"20-30","title":"What is a Beat?","content":"The beat is the steady pulse you feel in music â€“ like a ticking clock or your heartbeat. Most songs follow a steady beat to keep everything together.","visual_description":"Graphic showing whole, half, and quarter notes with beat counts","complexity":"beginner"},{"id":"d698dd51-8dee-4d71-8367-1c2170a2d1d7","type":"mini_lesson","category":"rhythm","duration":"20-30","title":"Note Values: Whole, Half, Quarter","content":"A whole note lasts for 4 beats, a half note for 2, and a quarter note for 1. Think of it like cutting a pie â€“ whole is the full pie, half is half, and quarter is one slice out of four.","visual_description":"Graphic showing whole, half, and quarter notes with beat counts","complexity":"beginner"},{"id":"c21e4de1-d8bd-460a-ae36-d3a30c59570e","type":"mini_lesson","category":"history","duration":"20-30","title":"What is Sheet Music?","content":"Sheet music is a written version of a song using symbols. It tells musicians what notes to play, how fast, and how loud or soft.","visual_description":"Timeline showing early chant notation to modern sheet music","complexity":"beginner"},{"id":"6e73be49-2650-4be1-a337-b0810c713f44","type":"mini_lesson","category":"analysis","duration":"20-30","title":"What is a Bar Line?","content":"Bar lines are vertical lines that divide the staff into measures. They help you keep track of where you are in the music.","visual_description":"Labeled staff diagram showing clef, measures, bar lines","complexity":"beginner"},{"id":"5bf3d82f-23a7-4e85-bca3-1b6d20aae2bb","type":"mini_lesson","category":"rhythm","duration":"20-30","title":"What is a Beat?","content":"The beat is the steady pulse you feel in music â€“ like a ticking clock or your heartbeat. Most songs follow a steady beat to keep everything together.","visual_description":"Graphic showing whole, half, and quarter notes with beat counts","complexity":"beginner"},{"id":"22d101b8-d512-4442-94cb-dfd4aea6e6f7","type":"mini_lesson","category":"history","duration":"20-30","title":"What is a Clef?","content":"A clef is a symbol at the beginning of a staff that tells you which notes go where. The treble clef is for higher notes, and the bass clef is for lower notes.","visual_description":"Timeline showing early chant notation to modern sheet music","complexity":"beginner"},{"id":"80c08274-98da-42dd-8358-3c4e15e8c043","type":"mini_lesson","category":"harmony","duration":"20-30","title":"How Chords Fit in a Key","content":"In any key, there are chords built on each note. These chords usually follow a pattern: major, minor, minor, major, major, minor, diminished. In C major, that gives you C, Dm, Em, F, G, Am, Bdim.","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"89eefb56-4b2b-4be1-a68f-65632114f67c","type":"mini_lesson","category":"analysis","duration":"20-30","title":"Reading a Staff","content":"The staff is made of 5 lines and 4 spaces. Each line or space represents a note. The clef helps you know which note is which.","visual_description":"Labeled staff diagram showing clef, measures, bar lines","complexity":"beginner"},{"id":"37d62e5b-dd98-482e-8709-c5eb8b74f39a","type":"mini_lesson","category":"harmony","duration":"20-30","title":"How Chords Fit in a Key","content":"In any key, there are chords built on each note. These chords usually follow a pattern: major, minor, minor, major, major, minor, diminished. In C major, that gives you C, Dm, Em, F, G, Am, Bdim.","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"ed7cd6f4-6142-460c-8609-865857fa232e","type":"mini_lesson","category":"history","duration":"20-30","title":"How Music Notation Evolved","content":"Long ago, music was passed down by ear. Over time, symbols were created to write down notes, rhythms, and more. Thatâ€™s how modern sheet music was born.","visual_description":"Timeline showing early chant notation to modern sheet music","complexity":"beginner"},{"id":"f6fd39ea-a78d-4097-b9ab-f0799153ee79","type":"mini_lesson","category":"harmony","duration":"20-30","title":"How Chords Fit in a Key","content":"In any key, there are chords built on each note. These chords usually follow a pattern: major, minor, minor, major, major, minor, diminished. In C major, that gives you C, Dm, Em, F, G, Am, Bdim.","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"5df8dafd-3d46-446b-b791-af9a4a5aa074","type":"mini_lesson","category":"analysis","duration":"20-30","title":"What is a Measure?","content":"A measure is a section of the staff that holds a certain number of beats, based on the time signature. It helps organize the rhythm.","visual_description":"Labeled staff diagram showing clef, measures, bar lines","complexity":"beginner"},{"id":"15774709-1388-4970-8c02-423ea0c658c2","type":"mini_lesson","category":"history","duration":"20-30","title":"How Music Notation Evolved","content":"Long ago, music was passed down by ear. Over time, symbols were created to write down notes, rhythms, and more. Thatâ€™s how modern sheet music was born.","visual_description":"Timeline showing early chant notation to modern sheet music","complexity":"beginner"},{"id":"0d2789b8-901c-47b0-a8f6-9ced2aaf7c81","type":"mini_lesson","category":"analysis","duration":"20-30","title":"What is a Measure?","content":"A measure is a section of the staff that holds a certain number of beats, based on the time signature. It helps organize the rhythm.","visual_description":"Labeled staff diagram showing clef, measures, bar lines","complexity":"beginner"},{"id":"71bf5942-c481-4f82-8fb6-bf8447750dc7","type":"mini_lesson","category":"rhythm","duration":"20-30","title":"What is Rhythm?","content":"Rhythm is the pattern of sounds and silences in music. It tells you when to play or stay quiet. Itâ€™s what makes music feel like it has a beat.","visual_description":"Graphic showing whole, half, and quarter notes with beat counts","complexity":"beginner"},{"id":"b0a58a63-b79d-476e-a1dc-84184feaa39e","type":"mini_lesson","category":"harmony","duration":"20-30","title":"What is a Major Scale?","content":"A major scale is a sequence of notes with a specific pattern: whole, whole, half, whole, whole, whole, half. Try it on the piano starting at C â€“ thatâ€™s the C major scale!","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"806f4e75-fc18-4c75-90c8-2efdcddb24e4","type":"mini_lesson","category":"harmony","duration":"20-30","title":"What is a Major Scale?","content":"A major scale is a sequence of notes with a specific pattern: whole, whole, half, whole, whole, whole, half. Try it on the piano starting at C â€“ thatâ€™s the C major scale!","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"539e7ee6-3a1b-4ea2-87fe-683e892866a9","type":"mini_lesson","category":"history","duration":"20-30","title":"How Music Notation Evolved","content":"Long ago, music was passed down by ear. Over time, symbols were created to write down notes, rhythms, and more. Thatâ€™s how modern sheet music was born.","visual_description":"Timeline showing early chant notation to modern sheet music","complexity":"beginner"},{"id":"2f53e2eb-4419-484c-8085-a6bb5f34475a","type":"mini_lesson","category":"harmony","duration":"20-30","title":"How Chords Fit in a Key","content":"In any key, there are chords built on each note. These chords usually follow a pattern: major, minor, minor, major, major, minor, diminished. In C major, that gives you C, Dm, Em, F, G, Am, Bdim.","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"731ec7bb-5044-449c-9676-e66ff7fd240a","type":"mini_lesson","category":"harmony","duration":"20-30","title":"What is a Major Scale?","content":"A major scale is a sequence of notes with a specific pattern: whole, whole, half, whole, whole, whole, half. Try it on the piano starting at C â€“ thatâ€™s the C major scale!","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"a7d816ba-c3f8-4754-81aa-5fe0b68c6121","type":"mini_lesson","category":"history","duration":"20-30","title":"What is a Clef?","content":"A clef is a symbol at the beginning of a staff that tells you which notes go where. The treble clef is for higher notes, and the bass clef is for lower notes.","visual_description":"Timeline showing early chant notation to modern sheet music","complexity":"beginner"},{"id":"f127d395-257b-451d-ad08-6a9f01ae2859","type":"mini_lesson","category":"analysis","duration":"20-30","title":"Reading a Staff","content":"The staff is made of 5 lines and 4 spaces. Each line or space represents a note. The clef helps you know which note is which.","visual_description":"Labeled staff diagram showing clef, measures, bar lines","complexity":"beginner"},{"id":"9cd554eb-6153-460b-890f-1bb9b36311b1","type":"mini_lesson","category":"harmony","duration":"20-30","title":"What is a Major Scale?","content":"A major scale is a sequence of notes with a specific pattern: whole, whole, half, whole, whole, whole, half. Try it on the piano starting at C â€“ thatâ€™s the C major scale!","visual_description":"Image of a C major chord on a keyboard and staff","complexity":"beginner"},{"id":"57b86907-60f4-4187-9bc5-7a46cfbb7b44","type":"mini_lesson","category":"form","duration":"20-30","title":"What is a Refrain?","content":"A refrain is a section of music that repeats throughout a song, like a chorus. Itâ€™s often the most memorable part!","visual_description":"Diagram showing AABA song structure","complexity":"beginner"},{"id":"e04f4c6d-0622-4d04-84e7-40b55efe0feb","type":"mini_lesson","category":"rhythm","duration":"20-30","title":"Understanding Time Signatures","content":"A time signature is like a musical clock. It tells you how many beats are in a measure and what kind of note gets one beat. 4/4 means 4 beats per measure, and the quarter note gets one beat.","visual_description":"Graphic showing whole, half, and quarter notes with beat counts","complexity":"beginner"},{"id":"61325a9b-6012-4917-b777-7ca578af477c","type":"mini_lesson","category":"form","duration":"20-30","title":"What is Musical Form?","content":"Musical form is how music is organized. Common forms include ABA (ternary) and AABA. Itâ€™s like a musical roadmap that tells you what comes next.","visual_description":"Diagram showing AABA song structure","complexity":"beginner"},{"id":"c1ba1e4c-4522-4a13-a994-4f9fe0ccc8de","type":"mini_lesson","category":"analysis","duration":"20-30","title":"What is a Measure?","content":"A measure is a section of the staff that holds a certain number of beats, based on the time signature. It helps organize the rhythm.","visual_description":"Labeled staff diagram showing clef, measures, bar lines","complexity":"beginner"},{"id":"b3272c97-97d1-4544-87d6-969c675ba024","type":"mini_lesson","category":"history","duration":"20-30","title":"What is Sheet Music?","content":"Sheet music is a written version of a song using symbols. It tells musicians what notes to play, how fast, and how loud or soft.","visual_description":"Timeline showing early chant notation to modern sheet music","complexity":"beginner"}]}'),em=e=>{let{message:t="Analyzing your music score...",className:s=""}=e,[n,r]=(0,i.useState)(null),[o,l]=(0,i.useState)(0),[c,d]=(0,i.useState)(0),[m,h]=(0,i.useState)(new Set),[u,f]=(0,i.useState)(!0),[p,g]=(0,i.useState)(null),[x,y]=(0,i.useState)([]),[b,w]=(0,i.useState)(-1),v=()=>{let e=ed.k.filter(e=>!m.has(e.id));return 0===e.length?(h(new Set),ed.k[Math.floor(Math.random()*ed.k.length)]):e[Math.floor(Math.random()*e.length)]},j=e=>{switch(e){case"10-15":return 12500;case"15-20":return 25e3;case"20-25":return 37500;default:return 2e4}},N=e=>{if(!u)return;let t=j(e.duration)/100,s=0,a=setInterval(()=>{l(++s/t*100),s>=t&&(clearInterval(a),l(0),d(e=>e+1))},100);g(a)},_=()=>{p&&(clearInterval(p),g(null))},k=()=>{let e=v(),t={...e,type:e.type,category:e.category,duration:e.duration,complexity:e.complexity};return r(t),t&&(h(e=>new Set(e).add(t.id)),y(e=>[...e,t]),w(e=>e+1)),t},A=e=>{e>=0&&e<x.length&&(r(x[e]),w(e))},C=()=>{_(),l(0),f(!1),b<x.length-1?A(b+1):k(),setTimeout(()=>{f(!0),n&&N(n)},1e3)},S=()=>{_(),l(0),f(!1),b>0&&A(b-1),setTimeout(()=>{f(!0),n&&N(n)},1e3)};return((0,i.useEffect)(()=>(k(),()=>_()),[]),(0,i.useEffect)(()=>{if(n)return _(),l(0),N(n),()=>_()},[n,u]),(0,i.useEffect)(()=>{c>0&&k()},[c]),n)?(0,a.jsxs)("div",{className:"w-full max-w-4xl mx-auto p-4 sm:p-6 ".concat(s),children:[(0,a.jsxs)("div",{className:"text-center mb-6 sm:mb-8",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-2 sm:gap-3 mb-3 sm:mb-4",children:[(0,a.jsx)(z.A,{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-600 animate-pulse"}),(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 text-center",children:t})]}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-gray-600 px-2",children:"While you wait, explore some fascinating music theory..."})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-4 sm:p-6 mb-4 sm:mb-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-0 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(e=>{switch(e){case"quick_fact":return(0,a.jsx)(er.A,{className:"w-5 h-5 text-yellow-500"});case"mini_lesson":return(0,a.jsx)(eo.A,{className:"w-5 h-5 text-blue-500"});case"theory_story":return(0,a.jsx)(z.A,{className:"w-5 h-5 text-purple-500"});default:return(0,a.jsx)(z.A,{className:"w-5 h-5 text-gray-500"})}})(n.type),(0,a.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 leading-tight",children:n.title})]}),(0,a.jsx)("div",{className:"flex items-center gap-2 flex-wrap",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600 capitalize",children:n.category})})]}),(0,a.jsx)("div",{className:"space-y-3 sm:space-y-4",children:(0,a.jsx)("p",{className:"text-sm sm:text-base text-gray-700 leading-relaxed",children:n.content})}),(0,a.jsxs)("div",{className:"mt-4 sm:mt-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-xs sm:text-sm text-gray-500",children:"Reading progress"}),(0,a.jsxs)("span",{className:"text-xs sm:text-sm text-gray-500",children:[Math.round(o),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-orange-600 h-2 rounded-full transition-all duration-100 ease-out",style:{width:"".concat(o,"%")}})})]}),(0,a.jsxs)("div",{className:"mt-4 sm:mt-6 pt-4 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:hidden",children:[(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Manual navigation pauses auto-progression"})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:S,disabled:b<=0,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(b<=0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 hover:bg-gray-200 text-gray-700"),children:(0,a.jsx)(el.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:C,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:(0,a.jsx)(ec.A,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"hidden sm:flex items-center justify-between",children:[(0,a.jsx)("button",{onClick:S,disabled:b<=0,className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(b<=0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 hover:bg-gray-200 text-gray-700"),children:(0,a.jsx)(el.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:C,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:(0,a.jsx)(ec.A,{className:"w-4 h-4"})})]})]})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2 text-gray-500",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2 ",children:[(0,a.jsx)(J.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm text-center",children:"Analysis typically takes 45 seconds - 5 minutes depending on the score size & complexity."})]}),(0,a.jsx)("span",{className:"text-xs sm:text-sm text-center",children:"There is a time limit of 5 minutes for each analysis. If your score is not processed within this time, it may be too large or complex."})]})})]}):null},eh="https://api.notadb.xyz:8443";function eu(e){var t,s,n,r,o,l,c,d,m;let{onProcessingChange:u}=e,{scoreData:f,isLoading:p,error:g,refetch:x}=A(),[j,N]=(0,i.useState)(!1),[_,k]=(0,i.useState)(null),[C,D]=(0,i.useState)(null),[F,B]=(0,i.useState)(0),[L,J]=(0,i.useState)(null),[Q,Y]=(0,i.useState)(!1),[Z,ee]=(0,i.useState)(null),[es,ea]=(0,i.useState)(null),[ei,er]=(0,i.useState)(null),[eo,el]=(0,i.useState)(null),[ec,ed]=(0,i.useState)(!1),[eu,ef]=(0,i.useState)(!1),[ep,eg]=(0,i.useState)(null),[ex,ey]=(0,i.useState)(null),[eb,ew]=(0,i.useState)(null),[ev,ej]=(0,i.useState)(0),[eN,e_]=(0,i.useState)(0),ek=e=>{let t=Math.floor(e/60),s=Math.floor(e%60);return"".concat(t,":").concat(s.toString().padStart(2,"0"))},[eA,eC]=(0,i.useState)(window.innerWidth);(0,i.useEffect)(()=>{let e=()=>{eC(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,i.useEffect)(()=>{var e,t,s;(null==f?void 0:null===(e=f.score)||void 0===e?void 0:e.processed)||(null==f?void 0:null===(t=f.task_status)||void 0===t?void 0:t.state)==="FAILURE"?u(!1):((null==f?void 0:null===(s=f.task_status)||void 0===s?void 0:s.state)==="PENDING"||p)&&u(!0)},[f,p,u]),(0,i.useEffect)(()=>{var e,t;if((null==f?void 0:null===(e=f.score)||void 0===e?void 0:e.processed)&&(null==f?void 0:null===(t=f.task_status)||void 0===t?void 0:t.state)!=="PENDING"){let e=async()=>{var e;if(null==f?void 0:null===(e=f.score)||void 0===e?void 0:e.midi_url){ed(!0),el(null);try{let e=await fetch("".concat(eh).concat(f.score.midi_url),{method:"GET",headers:{Accept:"audio/midi, audio/x-midi, */*"}});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.arrayBuffer();er(t)}catch(t){let e=t instanceof Error?t.message:"Unknown error";el("Failed to fetch MIDI: ".concat(e))}finally{ed(!1)}}};(async()=>{try{var e;let t=await fetch("".concat(eh).concat(null==f?void 0:null===(e=f.score)||void 0===e?void 0:e.musicxml_url),{method:"GET",headers:{Accept:"application/xml, text/xml, application/vnd.recordare.musicxml+xml, */*"}});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status," - ").concat(t.statusText));t.headers.get("content-type");let s=await t.text();if(!s.trim().startsWith("<?xml")&&!s.trim().startsWith("<"))throw Error("Response is not valid XML format");s.includes("score-partwise")||s.includes("score-timewise"),D(s),k(null),B(0)}catch(t){let e=t instanceof Error?t.message:"Unknown error";if(F<3&&(e.includes("network")||e.includes("timeout"))){B(e=>e+1),setTimeout(()=>{},2e3*(F+1));return}k("Failed to fetch MusicXML: ".concat(e)),D(null),B(0)}})(),e()}},[null==f?void 0:null===(t=f.score)||void 0===t?void 0:t.processed,null==f?void 0:null===(s=f.task_status)||void 0===s?void 0:s.state,F]);let eS=async()=>{var e;if(!(null==f?void 0:null===(e=f.score)||void 0===e?void 0:e.id)){ee("No score ID available for summary generation");return}Y(!0),ee(null);try{let e=await fetch("".concat(eh,"/api/generate-summary/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({score_id:f.score.id})});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.json();if("success"===t.status)t.summary&&J(t.summary),t.cleaned_text&&ea(t.cleaned_text);else throw Error("Invalid response format from server")}catch(e){ee(e instanceof Error?e.message:"Failed to generate summary")}finally{Y(!1)}},eI=()=>{if(!ei)return;let e=new Blob([ei],{type:"audio/midi"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="score.mid",s.click(),URL.revokeObjectURL(t)};if(g){let e=(null==g?void 0:g.isServerError)||(null==g?void 0:g.status)&&g.status>=500;return(0,a.jsxs)("div",{className:"space-y-6 p-4",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-orange-600 flex items-center gap-2",children:[(0,a.jsx)(z.A,{className:"h-6 w-6"})," Score Analysis Results"]}),(0,a.jsxs)(y,{children:[(0,a.jsx)(b,{children:(0,a.jsx)(w,{className:"flex items-center gap-2",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(G.A,{className:"h-5 w-5 text-red-500"}),"Server Error"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.A,{className:"h-5 w-5 text-orange-500"}),"Connection Error"]})})}),(0,a.jsx)(v,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-red-800 font-medium",children:e?"The server encountered an error while processing your score.":"Unable to connect to the server."}),(0,a.jsx)("p",{className:"text-red-600 text-sm mt-2",children:g.message})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsxs)(h.$,{onClick:()=>x(),variant:"outline",className:"flex items-center gap-2",children:[(0,a.jsx)(P.A,{className:"h-4 w-4"}),"Try Again"]}),e&&(0,a.jsxs)(h.$,{variant:"secondary",onClick:()=>window.location.reload(),className:"flex items-center gap-2",children:[(0,a.jsx)(q.A,{className:"h-4 w-4"}),"Refresh Page"]})]}),e&&(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-yellow-800 text-sm",children:(0,a.jsx)("strong",{children:"What you can do:"})}),(0,a.jsxs)("ul",{className:"text-yellow-700 text-sm mt-2 space-y-1",children:[(0,a.jsx)("li",{children:"â€¢ It is likely your file is too large or too complex. If it is an image, it might be of very low resolution to be processed."}),(0,a.jsx)("li",{children:"â€¢ Check if the file you uploaded is valid"}),(0,a.jsx)("li",{children:"â€¢ Try uploading a different score"})]})]})]})})]})]})}return p||f||g?(0,a.jsxs)("div",{className:"space-y-6 md:p-6 rounded-xl",children:[(0,a.jsxs)("h2",{className:"text-xl sm:text-2xl font-bold text-orange-600 flex items-center gap-2 px-2 sm:px-0",children:[(0,a.jsx)(z.A,{className:"h-5 w-5 sm:h-6 sm:w-6"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Score Analysis Results"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Analysis Results"})]}),p||f&&!(null===(n=f.score)||void 0===n?void 0:n.processed)&&(null===(r=f.task_status)||void 0===r?void 0:r.state)==="PENDING"?(0,a.jsx)(em,{message:"Analyzing your music score with Audiveris...",className:"my-custom-classes"}):(0,a.jsxs)(S,{defaultValue:"results",className:"w-full",children:[(0,a.jsxs)(I,{className:"grid grid-cols-2 lg:grid-cols-4 h-auto p-1 bg-gray-100 rounded-lg",children:[(0,a.jsxs)(T,{value:"results",className:"flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2 px-2 py-3 text-xs sm:text-sm data-[state=active]:bg-white data-[state=active]:shadow-sm rounded-md transition-all min-h-[60px] sm:min-h-[40px]",children:[(0,a.jsx)("span",{className:"sm:hidden text-center leading-tight",children:"Results"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Analysis Results"})]}),(0,a.jsxs)(T,{value:"musicxml",className:"flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2 px-2 py-3 text-xs sm:text-sm data-[state=active]:bg-white data-[state=active]:shadow-sm rounded-md transition-all min-h-[60px] sm:min-h-[40px]",children:[(0,a.jsxs)("span",{className:"sm:hidden text-center leading-tight",children:["Sheet",(0,a.jsx)("br",{}),"Music"]}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Sheet Music"})]}),(0,a.jsxs)(T,{value:"midi",className:"flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2 px-2 py-3 text-xs sm:text-sm data-[state=active]:bg-white data-[state=active]:shadow-sm rounded-md transition-all min-h-[60px] sm:min-h-[40px]",children:[(0,a.jsxs)("span",{className:"sm:hidden text-center leading-tight",children:["MIDI",(0,a.jsx)("br",{}),"Player"]}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"MIDI Player"})]}),(0,a.jsxs)(T,{value:"summary",className:"flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2 px-2 py-3 text-xs sm:text-sm data-[state=active]:bg-white data-[state=active]:shadow-sm rounded-md transition-all min-h-[60px] sm:min-h-[40px]",children:[(0,a.jsxs)("span",{className:"sm:hidden text-center leading-tight",children:["AI",(0,a.jsx)("br",{}),"Summary"]}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"AI Summary"})]})]}),(0,a.jsx)(M,{value:"results",className:"mt-6",children:(0,a.jsxs)(y,{children:[(0,a.jsx)(b,{className:"pb-4",children:(0,a.jsx)("h1",{className:"text-xl sm:text-2xl font-semibold px-2 sm:px-0",children:(null==f?void 0:null===(o=f.score)||void 0===o?void 0:o.title)||"No title"})}),(0,a.jsx)(v,{className:"px-2 sm:px-6",children:(null==f?void 0:null===(l=f.score)||void 0===l?void 0:l.results)?(0,a.jsx)(et,{results:f.score.results,musicXmlContent:C,parsedMidi:eb}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"text-gray-400 mb-2",children:(0,a.jsx)(z.A,{className:"h-12 w-12 mx-auto"})}),(0,a.jsx)("p",{className:"text-gray-500 px-4",children:"No analysis results available for this score."})]})})]})}),(0,a.jsx)(M,{value:"musicxml",className:"mt-6",children:(0,a.jsxs)(y,{children:[(0,a.jsxs)(b,{className:"pb-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)(w,{className:"flex items-center gap-2 px-2 sm:px-0",children:[(0,a.jsx)(O.A,{className:"h-5 w-5"}),"Sheet Music Viewer"]}),(0,a.jsx)("div",{className:"flex flex-col sm:flex-row gap-2 px-2 sm:px-0",children:C&&(0,a.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>{if(!C)return;let e=new Blob([C],{type:"application/xml"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="score.musicxml",s.click(),URL.revokeObjectURL(t)},className:"flex items-center justify-center gap-2 text-xs sm:text-sm px-3 py-2 h-10 w-full sm:w-auto",children:[(0,a.jsx)(H.A,{className:"h-4 w-4"}),"Download XML"]})})]}),C&&(0,a.jsxs)("div",{className:"text-sm text-gray-500 mt-2 px-2 sm:px-0",children:["Rendered from: ",(null==f?void 0:null===(c=f.score)||void 0===c?void 0:c.title)||"Untitled Score"]})]}),(0,a.jsx)(v,{className:"px-2 sm:px-6",children:C?(0,a.jsxs)("div",{className:"space-y-4",children:[_&&(0,a.jsx)(E,{className:"mb-4",children:(0,a.jsx)(R,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)("span",{className:"text-sm",children:"It was not possible to generate MusicXML from the file you uploaded."}),(0,a.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>{B(0),k(null),D(null),el(null),er(null),x()},className:"w-full sm:w-auto",children:"Retry"})]})})}),j&&!_&&(0,a.jsx)(E,{children:(0,a.jsxs)(R,{className:"text-green-700 text-sm",children:["Sheet music loaded successfully!",(0,a.jsxs)("span",{className:"hidden sm:inline",children:[" ","You can scroll and zoom to explore the notation."]})]})}),(0,a.jsx)(W,{musicXML:C,showLoadingSpinner:!0,onLoad:()=>{N(!0),k(null)},onError:e=>{k(e),N(!1)},className:"w-full h-full"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Use mouse wheel to zoom, click and drag to pan"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Pinch to zoom, drag to pan"})]})]}):(0,a.jsxs)("div",{className:"text-center py-8 sm:py-12 px-4",children:[(0,a.jsx)("div",{className:"text-gray-400 mb-4",children:(0,a.jsx)(O.A,{className:"h-12 w-12 sm:h-16 sm:w-16 mx-auto"})}),(0,a.jsx)("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-2",children:"No MusicXML Available"}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-gray-500 max-w-md mx-auto",children:"The sheet music notation is not available for this score. This could happen if the analysis is still processing or if the original image couldn't be converted to MusicXML format."}),(null==f?void 0:f.score)&&!f.score.processed&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)(h.$,{variant:"outline",onClick:()=>x(),className:"flex items-center gap-2 w-full sm:w-auto",size:"sm",children:[(0,a.jsx)(P.A,{className:"h-4 w-4"}),"Check Again"]})})]})})]})}),(0,a.jsx)(M,{value:"midi",className:"mt-6",children:(0,a.jsxs)(y,{children:[(0,a.jsx)(b,{className:"pb-4",children:(0,a.jsxs)(w,{className:"flex items-center gap-2 px-2 sm:px-0",children:[(0,a.jsx)(z.A,{className:"h-5 w-5"}),"MIDI Player"]})}),(0,a.jsx)(v,{className:"px-2 sm:px-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[ec&&(0,a.jsx)(E,{children:(0,a.jsxs)(R,{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-orange-500"}),"Loading MIDI file..."]})}),eo&&(0,a.jsx)(E,{variant:"destructive",children:(0,a.jsx)(R,{className:"text-sm",children:"It was not possible to generate MIDI from the file you uploaded."})}),ex&&(0,a.jsx)(E,{variant:"destructive",children:(0,a.jsx)(R,{className:"text-sm",children:ex})}),ei&&(0,a.jsxs)(h.$,{variant:"outline",size:"sm",onClick:eI,className:"flex items-center justify-center gap-2 text-xs sm:text-sm px-3 py-2 h-10 w-full sm:w-auto",children:[(0,a.jsx)(H.A,{className:"h-4 w-4"}),"Download MIDI"]}),ei&&!eo&&eb&&(0,a.jsx)(E,{children:(0,a.jsx)(R,{className:"text-green-700 text-sm",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1",children:[(0,a.jsx)("span",{children:"MIDI playback ready"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"â€¢"}),(0,a.jsxs)("span",{children:["Duration: ",ek(eN)]}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"â€¢"}),(0,a.jsxs)("span",{children:[eb.tracks.length," track(s)"]})]})})}),(0,a.jsx)(en,{midiData:ei,midiError:eo,isLoadingMidi:ec,onDownloadMidi:eI,API_URL:eh,midiUrl:null==f?void 0:null===(d=f.score)||void 0===d?void 0:d.midi_url}),ei&&!eo&&eb&&(0,a.jsx)("div",{className:"text-orange-600 flex items-center justify-center sm:justify-start gap-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(eu?"bg-green-500 animate-pulse":"bg-gray-400")}),(0,a.jsxs)("span",{className:"text-sm",children:[eu?"Playing":"Ready"," â€¢"," ",ek(eN)]})]})})]})})]})}),(0,a.jsx)(M,{value:"summary",className:"mt-6",children:(0,a.jsxs)(y,{children:[(0,a.jsx)(b,{className:"pb-4",children:(0,a.jsxs)(w,{className:"flex items-center gap-2 px-2 sm:px-0",children:[(0,a.jsx)($.A,{className:"h-5 w-5"}),"AI-Generated Musical Analysis"]})}),(0,a.jsxs)(v,{className:"px-2 sm:px-6",children:[Z&&(0,a.jsx)(E,{variant:"destructive",className:"mb-4",children:(0,a.jsx)(R,{className:"text-sm",children:Z})}),Q?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 gap-3",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"}),(0,a.jsx)("p",{className:"text-gray-600 text-center",children:"Generating AI summary..."})]}):L?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4 sm:p-6",children:(0,a.jsxs)("div",{className:"text-gray-800 space-y-4",children:[(0,a.jsx)("div",{children:V(L)}),(0,a.jsx)(X.Divider,{className:"my-4"}),(0,a.jsx)("div",{children:V(es||"")})]})}),(0,a.jsx)("div",{className:"flex justify-center sm:justify-end pt-2",children:(0,a.jsxs)(h.$,{onClick:eS,variant:"outline",size:"sm",disabled:Q,className:"flex items-center gap-2 hover:bg-gray-50 w-full sm:w-auto",children:[(0,a.jsx)(P.A,{className:"h-4 w-4"})," Regenerate Summary"]})})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center text-center py-8 sm:py-12 px-4",children:[(0,a.jsx)("div",{className:"text-gray-400 mb-4",children:(0,a.jsx)($.A,{className:"h-12 w-12 sm:h-16 sm:w-16 mx-auto opacity-50"})}),(0,a.jsx)("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-2",children:"No AI Summary Yet"}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-gray-500 mb-6 max-w-md mx-auto",children:"Generate an AI-powered musical analysis and summary of this score to get insights about its style, structure, and characteristics."}),(0,a.jsxs)(h.$,{onClick:eS,className:"flex items-center gap-2 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 w-full sm:w-auto",disabled:Q||!(null==f?void 0:null===(m=f.score)||void 0===m?void 0:m.id),children:[(0,a.jsx)(K.A,{className:"h-4 w-4"}),"Generate AI Summary"]})]})]})]})})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-orange-600 flex items-center gap-2",children:[(0,a.jsx)(z.A,{className:"h-6 w-6"})," Score Analysis Results"]}),(0,a.jsx)(y,{children:(0,a.jsx)(v,{className:"p-4 text-center",children:(0,a.jsx)("p",{className:"text-gray-500",children:"Upload or select a score to see analysis results."})})})]})}function ef(){let[e,t]=(0,i.useState)(null),[s,n]=(0,i.useState)(null),[r,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)(!1),d=()=>{c(!l)};return(0,a.jsx)("div",{className:"min-h-screen bg-orange-50 text-foreground font-main",children:(0,a.jsxs)("div",{className:"container mx-auto flex flex-col px-2 sm:px-6 lg:px-8",children:[(0,a.jsx)("header",{className:"mb-4 sm:mb-6 pt-4 sm:pt-6",children:(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-primary",children:"Get Score Insights"})}),(0,a.jsx)("section",{className:"mb-4 sm:mb-6",children:(0,a.jsxs)("div",{className:"relative",children:[l&&(0,a.jsx)("div",{className:"bg-white rounded-lg border-2 border-dashed border-gray-200 p-3 sm:p-4 mb-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,a.jsx)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 text-sm sm:text-base truncate",children:"Analyze another?"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 truncate",children:"Click to upload another file"})]})]}),(0,a.jsxs)("button",{onClick:d,className:"flex items-center justify-center gap-2 px-3 py-2 sm:px-4 sm:py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm sm:text-base font-medium whitespace-nowrap flex-shrink-0",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,a.jsx)("span",{className:"hidden xs:inline",children:"Upload Another"}),(0,a.jsx)("span",{className:"xs:hidden",children:"Upload"})]})]})}),!l&&(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g,{onUploadSuccess:(e,s)=>{t(e),n(s),o(!0),c(!0)},isProcessing:r}),e&&(0,a.jsx)("div",{className:"absolute top-2 right-2 sm:top-4 sm:right-4 z-10",children:(0,a.jsx)("button",{onClick:d,className:"bg-white bg-opacity-90 hover:bg-opacity-100 rounded-full p-1.5 sm:p-2 shadow-md transition-all touch-target",title:"Collapse upload area",children:(0,a.jsx)("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})})})]})]})}),(0,a.jsx)("section",{className:"grid grid-cols-1 gap-4 sm:gap-6 mb-6 sm:mb-8 w-full ".concat(r?"border-2 border-dashed":""),children:(0,a.jsx)(k,{scoreId:e,taskId:s,children:(0,a.jsx)(eu,{onProcessingChange:e=>{o(e)}})})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[849,560,144,181,769,441,684,358],()=>t(95272)),_N_E=e.O()}]);