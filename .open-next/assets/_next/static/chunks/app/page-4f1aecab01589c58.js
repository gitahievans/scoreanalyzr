(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{30285:(e,t,i)=>{"use strict";i.d(t,{$:()=>l});var a=i(95155),s=i(12115),n=i(99708),o=i(74466),r=i(59434);let c=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,t)=>{let{className:i,variant:s,size:o,asChild:l=!1,...d}=e,m=l?n.DX:"button";return(0,a.jsx)(m,{className:(0,r.cn)(c({variant:s,size:o,className:i})),ref:t,...d})});l.displayName="Button"},42104:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>es});var a=i(95155),s=i(12115),n=i(5041),o=i(85057),r=i(38280),c=i(54395),l=i(31951),d=i(26884),m=i(6942),h=i(30285);let u=async e=>{let t=new FormData;e.file&&(t.append("file",e.file),t.append("title",e.file.name||"Untitled Score"),t.append("composer","Anonymous"),t.append("analyze","true"));let i=await fetch("".concat("https://api.notadb.xyz:8443","/api/upload/"),{method:"POST",body:t});if(!i.ok)throw Error((await i.json()).message||"Failed to upload file");return i.json()},f={"application/pdf":"PDF","image/jpeg":"JPEG","image/jpg":"JPG","image/png":"PNG","image/gif":"GIF","image/bmp":"BMP","image/tiff":"TIFF","image/webp":"WebP"},p=[".pdf",".jpg",".jpeg",".png",".gif",".bmp",".tiff",".webp"];function g(e){let{onUploadSuccess:t,isProcessing:i}=e,[g,y]=(0,s.useState)([]),[x,b]=(0,s.useState)(null);(0,s.useEffect)(()=>()=>{g.forEach(e=>{e.previewUrl&&URL.revokeObjectURL(e.previewUrl)})},[g]);let{mutate:v,isPending:w}=(0,n.n)({mutationFn:u,onSuccess:e=>{m.$e.show({title:"Success",message:e.message||"File uploaded successfully",color:"green",icon:(0,a.jsx)(r.A,{}),position:"top-center"}),g.forEach(e=>{e.previewUrl&&URL.revokeObjectURL(e.previewUrl)}),y([]),b(null),t(e.score_id,e.task_id)},onError:e=>{b(e.message),m.$e.show({title:"Error",message:e.message,color:"red",icon:(0,a.jsx)(c.A,{}),position:"top-center"})}}),j=e=>Object.keys(f).includes(e.type),k=e=>f[e.type]||"Unknown",N=e=>e.type.startsWith("image/"),_=e=>{let t={file:e};return N(e)&&(t.previewUrl=URL.createObjectURL(e)),t},T=e=>{if(!j(e)){let e=Object.values(f).join(", ");return b("Only ".concat(e," files are allowed")),!1}return!(e.size>5242880)||(b("File size exceeds 5MB limit"),!1)},I=(0,s.useCallback)(e=>{if(i)return;b(null),g.forEach(e=>{e.previewUrl&&URL.revokeObjectURL(e.previewUrl)});let t=e.filter(T);t.length>0&&y(t.slice(0,1).map(_))},[i,g]),S=e=>N(e)?(0,a.jsx)(l.A,{size:24,className:"text-orange-500"}):(0,a.jsx)(d.A,{size:24,className:"text-orange-500"}),M=()=>{g.forEach(e=>{e.previewUrl&&URL.revokeObjectURL(e.previewUrl)}),y([]),b(null)};return(0,a.jsx)("div",{children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),!i&&g[0]&&v({file:g[0].file})},children:[(0,a.jsx)(o.J,{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Upload Music Score (PDF or Image)"}),(0,a.jsx)("div",{className:"border-2 border-dashed rounded-lg p-6 cursor-pointer\n            ".concat(g.length?"border-orange-500 bg-orange-50":"border-gray-300","\n            ").concat(x?"border-red-500 bg-red-50":"","\n            ").concat(i?"opacity-50 cursor-not-allowed":"hover:border-orange-500","\n            transition-colors"),onDrop:e=>{e.preventDefault(),i||I(Array.from(e.dataTransfer.files))},onDragOver:e=>e.preventDefault(),onClick:()=>{if(i)return;let e=document.createElement("input");e.type="file",e.accept=p.join(","),e.onchange=e=>{let t=e.target;t.files&&I(Array.from(t.files))},e.click()},children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[g.length>0?N(g[0].file)?(0,a.jsx)(l.A,{size:52,className:"text-orange-500"}):(0,a.jsx)(d.A,{size:52,className:"text-orange-500"}):(0,a.jsx)(r.A,{size:52,className:"text-gray-400"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-xl",children:g.length?"".concat(g.length," file selected"):"Drag a PDF or image file here or click to select"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Supported formats: PDF, JPEG, PNG, GIF, BMP, TIFF, WebP"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Maximum file size: 5MB"}),x&&(0,a.jsx)("p",{className:"text-sm text-red-500 mt-2",children:x})]})]})}),g.length>0&&(0,a.jsx)("div",{className:"space-y-4 mt-4",children:g.map((e,t)=>(0,a.jsx)("div",{className:"bg-orange-50 rounded-md overflow-hidden border border-orange-200",children:(0,a.jsxs)("div",{className:"flex items-start justify-between p-3",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[S(e.file),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:e.file.name}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[k(e.file)," â€¢"," ",(e.file.size/1024/1024).toFixed(2)," ","MB"]})]})]}),e.previewUrl&&(0,a.jsx)("div",{className:"flex-1 max-w-xs",children:(0,a.jsx)("img",{src:e.previewUrl,alt:"Preview",className:"max-w-full max-h-32 object-contain rounded border border-orange-200"})})]}),(0,a.jsx)(h.$,{variant:"ghost",size:"sm",onClick:M,disabled:i,className:"ml-2",children:(0,a.jsx)(c.A,{size:20})})]})},t))}),(0,a.jsx)(h.$,{type:"submit",disabled:w||!g.length||i,className:"mt-4 bg-orange-500 hover:bg-orange-600 text-white",children:w?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Uploading..."]}):"Upload Score"})]})})}var y=i(59434);let x=s.forwardRef((e,t)=>{let{className:i,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,y.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",i),...s})});x.displayName="Card";let b=s.forwardRef((e,t)=>{let{className:i,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,y.cn)("flex flex-col space-y-1.5 p-3",i),...s})});b.displayName="CardHeader";let v=s.forwardRef((e,t)=>{let{className:i,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,y.cn)("text-2xl font-semibold leading-none tracking-tight",i),...s})});v.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:i,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,y.cn)("text-sm text-muted-foreground",i),...s})}).displayName="CardDescription";let w=s.forwardRef((e,t)=>{let{className:i,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,y.cn)("p-2 pt-0",i),...s})});w.displayName="CardContent",s.forwardRef((e,t)=>{let{className:i,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,y.cn)("flex items-center p-6 pt-0",i),...s})}).displayName="CardFooter";var j=i(32960);let k=(0,s.createContext)(void 0),N="https://api.notadb.xyz:8443";console.log("API_URL_FROM_CONTEXT:",N);let _=async(e,t)=>{let i=await fetch("".concat(N,"/api/scores/").concat(e,"/?task_id=").concat(t));if(!i.ok)throw Error((await i.json()).message||"Failed to fetch score");let a=await i.json();return console.log("Parsed Score data from Context:",a),a},T=e=>{let{scoreId:t,taskId:i,children:s}=e,{data:n,error:o,isLoading:r,refetch:c}=(0,j.I)({queryKey:["score",t,i],queryFn:()=>_(t,i),enabled:!!t&&!!i,refetchInterval:e=>{var t,i;let a=e.state.data;return!!a&&(null==a?void 0:null===(t=a.task_status)||void 0===t?void 0:t.state)==="PENDING"&&(null==a||null===(i=a.score)||void 0===i||!i.processed)&&3e3},retry:(e,t)=>!(e>=3)});return(0,a.jsx)(k.Provider,{value:{scoreData:n,isLoading:r,error:o,refetch:c},children:s})},I=()=>{let e=(0,s.useContext)(k);if(void 0===e)throw Error("useScoreData must be used within a ScoreDataProvider");return e};var S=i(16809);let M=S.bL,C=s.forwardRef((e,t)=>{let{className:i,...s}=e;return(0,a.jsx)(S.B8,{ref:t,className:(0,y.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",i),...s})});C.displayName=S.B8.displayName;let z=s.forwardRef((e,t)=>{let{className:i,...s}=e;return(0,a.jsx)(S.l9,{ref:t,className:(0,y.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",i),...s})});z.displayName=S.l9.displayName;let A=s.forwardRef((e,t)=>{let{className:i,...s}=e;return(0,a.jsx)(S.UC,{ref:t,className:(0,y.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",i),...s})});A.displayName=S.UC.displayName;let R=(0,i(74466).F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),F=s.forwardRef((e,t)=>{let{className:i,variant:s,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,y.cn)(R({variant:s}),i),...n})});F.displayName="Alert",s.forwardRef((e,t)=>{let{className:i,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,y.cn)("mb-1 font-medium leading-none tracking-tight",i),...s})}).displayName="AlertTitle";let E=s.forwardRef((e,t)=>{let{className:i,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,y.cn)("text-sm [&_p]:leading-relaxed",i),...s})});E.displayName="AlertDescription";var D=i(52655);let B=()=>(0,a.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}),(0,a.jsx)("span",{className:"ml-3 text-muted-foreground",children:"Loading sheet music..."})]}),V=e=>{let{message:t}=e;return(0,a.jsx)("div",{className:"flex items-center justify-center p-8 bg-destructive/10 border border-destructive/20 rounded-lg",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-destructive text-lg font-semibold mb-2",children:"Error Loading Sheet Music"}),(0,a.jsx)("div",{className:"text-destructive/80 text-sm",children:t})]})})},L=e=>{let{musicXML:t,width:i,height:n,showLoadingSpinner:o=!0,className:r="",onLoad:c,onError:l,renderingOptions:d={}}=e,m=(0,s.useRef)(null),h=(0,s.useRef)(null),u=(0,s.useRef)(null),[f,p]=(0,s.useState)(!1),[g,y]=(0,s.useState)(null),[x,b]=(0,s.useState)({width:0,height:0}),v=(0,s.useCallback)(e=>{var t,i,a;return{autoResize:!0,backend:"svg",drawTitle:null===(t=d.drawTitle)||void 0===t||t,drawComposer:null===(i=d.drawComposer)||void 0===i||i,drawFingerings:null!==(a=d.drawFingerings)&&void 0!==a&&a,drawCredits:!1,drawPartNames:!(e<768),followCursor:!1,defaultColorMusic:"#1f1f1f",pageFormat:d.pageFormat||"",spacingFactorSoftmax:.7,measureSpacing:.8,staffSpacing:.8,systemSpacing:.8,autoResizeEnabled:!0,autoBeam:!0,pageBackgroundColor:"#ffffff",renderSingleHorizontalStaffline:!1,notesSpacing:.8,pageTopMargin:10,pageBottomMargin:10,pageLeftMargin:10,pageRightMargin:10,systemLeftMargin:5,systemRightMargin:5,staffDistance:60,systemDistance:80}},[d]),w=(0,s.useCallback)((()=>{let e;let i=!1;return window.addEventListener("scroll",()=>{i=!0,clearTimeout(e),e=setTimeout(()=>{i=!1},150)},{passive:!0}),()=>{if(clearTimeout(e),!i&&m.current&&t){let t=m.current.getBoundingClientRect(),i=x.width,a=x.height,s=Math.abs(t.width-i),n=Math.abs(t.height-a);(s>50||n>50)&&(e=setTimeout(()=>{b({width:t.width,height:t.height}),j()},500))}}})(),[t,x.width,x.height]),j=(0,s.useCallback)(async()=>{if(m.current&&t){p(!0),y(null);try{var e;let a=m.current.getBoundingClientRect(),s=a.width||i||800,o=a.height||n||600;m.current.innerHTML="";let r={...v(s),autoResize:!1,autoResizeEnabled:!1};h.current=new D.OpenSheetMusicDisplay(m.current,r),await h.current.load(t);let l=null!==(e=d.baseZoom)&&void 0!==e?e:.65,u=s<768;h.current.zoom=l*(u?.9:1),h.current.render(),b({width:s,height:o}),console.log("MusicXML rendered successfully at ".concat(s,"x").concat(o," with zoom ").concat(h.current.zoom)),p(!1),null==c||c()}catch(t){let e=t instanceof Error?t.message:"Unknown error occurred";console.error("Error loading MusicXML:",t),y(e),p(!1),null==l||l(e)}}},[t,i,n,v,c,l,d.baseZoom]);return(0,s.useEffect)(()=>(m.current&&(u.current=new ResizeObserver(w),u.current.observe(m.current)),()=>{u.current&&u.current.disconnect()}),[w]),(0,s.useEffect)(()=>{if(t&&m.current){let e=setTimeout(j,100);return()=>clearTimeout(e)}},[t,j]),(0,s.useEffect)(()=>()=>{if(h.current){try{h.current.clear()}catch(e){console.warn("Error during OSMD cleanup:",e)}h.current=null}u.current&&u.current.disconnect()},[]),(0,a.jsxs)("div",{className:"osmd-wrapper w-full ".concat(r),children:[f&&o&&(0,a.jsx)(B,{}),g&&(0,a.jsx)(V,{message:g}),(0,a.jsx)("div",{ref:m,className:"osmd-container w-full min-h-[300px] sm:min-h-[400px] lg:min-h-[500px] overflow-auto bg-white rounded-lg shadow-sm border border-border",style:{width:i?"".concat(i,"px"):"100%",height:n?"".concat(n,"px"):"auto",display:f||g?"none":"block",minHeight:"400px",willChange:"auto",contain:"layout style paint"}}),!1]})};var q=i(98921),P=i(4582),G=i(68718),W=i(9255),U=i(45554),J=i(74601);let H=e=>e.split("\n\n").map((e,t)=>e.trim()?(0,a.jsx)("p",{className:"mb-4 text-gray-700 leading-relaxed",children:(e=>{let t;let i=[],s=0,n=/(\*\*\*[^*]+\*\*\*|\*\*[^*]+\*\*|\*[^*]+\*)/g;for(;null!==(t=n.exec(e));){t.index>s&&i.push(e.slice(s,t.index));let n=t[0],o=n.replace(/\*/g,"");n.startsWith("***")?i.push((0,a.jsx)("strong",{className:"font-bold text-gray-900",children:o},"bold-".concat(t.index))):n.startsWith("**")?i.push((0,a.jsx)("strong",{className:"font-semibold text-gray-800",children:o},"bold-".concat(t.index))):n.startsWith("*")&&i.push((0,a.jsx)("em",{className:"italic text-gray-700",children:o},"italic-".concat(t.index))),s=t.index+n.length}return s<e.length&&i.push(e.slice(s)),i.length>0?i:[e]})(e)},t):null).filter(Boolean);var O=i(53776);let X=e=>{var t;let{results:i,musicXmlContent:s}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-blue-600 mb-1",children:"Key Signature"}),(0,a.jsx)("div",{className:"text-lg font-bold text-blue-900",children:i.key})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border border-green-200",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-green-600 mb-1",children:"Time Signature"}),(0,a.jsx)("div",{className:"text-lg font-bold text-green-900",children:i.time_signature})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 p-4 rounded-lg border border-amber-200",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-amber-600 mb-1",children:"Parts"}),(0,a.jsx)("div",{className:"text-sm font-semibold text-amber-900",children:null===(t=i.parts)||void 0===t?void 0:t.join(", ")})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg border border-purple-200",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-purple-600 mb-1",children:"MusicXML"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(P.A,{className:"h-4 w-4 text-purple-700"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-purple-900",children:s?"Available":"Not Available"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"A few chords detected"})}),i.chords&&i.chords.length>0?(0,a.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg border",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:i.chords.map((e,t)=>(0,a.jsxs)("div",{className:"inline-flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat("Chord Symbol Cannot Be Identified"===e.pitch?"bg-red-100 text-red-700 border border-red-200":"bg-blue-100 text-blue-700 border border-blue-200 hover:bg-blue-200"),children:[(0,a.jsx)("span",{className:"font-semibold",children:e.pitch}),(0,a.jsxs)("span",{className:"ml-2 text-xs opacity-75",children:["@",e.offset]})]},t))})}):(0,a.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg border text-center text-gray-500",children:"No chord progression detected"})]})]})};var $=i(17569),Q=i(31550),Y=i(965),K=i(73158),Z=i(37648);let ee=JSON.parse('{"k":[{"id":"7b84f0cc-2559-4c41-9283-56e220560a4f","type":"quick_fact","category":"harmony","duration":"20-30","title":"Jazz Harmony: Navigating ii-V-I Progressions","content":"Jazz musicians often use the ii-V-I progression to create smooth harmonic motion. In C major, thatâ€™s Dm7 - G7 - Cmaj7. The voice leading between these chords creates a pleasing sense of direction and sophistication.","visual_description":"","complexity":"advanced"},{"id":"579f27ad-3908-4891-afee-565fb321b1b3","type":"mini_lesson","category":"harmony","duration":"20-30","title":"Breaking the Rules: Parallel Fifths in Pop Music","content":"Ever notice how the V7 chord seems to demand resolution? That\'s because it\'s packed with tension: the tritone between its third and seventh creates a strong pull toward the tonic. This is voice leading in action: each note wants to resolve by step, creating a feeling of closure.","visual_description":"","complexity":"beginner"},{"id":"7304ffbc-b92a-4a0d-a5f5-e07e23f6378d","type":"quick_fact","category":"harmony","duration":"20-30","title":"Modulating Without Moving: Pivot Chords in Action","content":"Jazz musicians often use the ii-V-I progression to create smooth harmonic motion. In C major, thatâ€™s Dm7 - G7 - Cmaj7. The voice leading between these chords creates a pleasing sense of direction and sophistication.","visual_description":"","complexity":"beginner"},{"id":"be762b12-ac5c-496b-a8df-c68ef026b62e","type":"theory_story","category":"harmony","duration":"10-15","title":"Why the V7 Chord Feels So Resolute","content":"The circle of fifths isn\'t just for memorizing key signatures. It\'s a powerful tool for understanding relationships between keys and modulating smoothly in compositions. Try modulating from C to G â€“ you\'ll find just one sharp in the way!","visual_description":"","complexity":"intermediate"},{"id":"tritone_devil","type":"quick_fact","category":"harmony","duration":"10-15","title":"The Devil\'s Interval","content":"The tritone was once called \'diabolus in musica\' (devil in music) and was banned by medieval churches due to its dissonant sound. Today, it\'s the foundation of jazz harmony and creates tension in film scores.","visual_description":"Staff notation showing a tritone interval","complexity":"beginner"},{"id":"circle_fifths","type":"mini_lesson","category":"harmony","duration":"20-30","title":"The Circle of Fifths","content":"Imagine the Circle of Fifths as a clock face for music. Each step clockwise adds one sharp to the key signature, while counterclockwise adds flats. This isn\'t just theoryâ€”it\'s a roadmap for modulation. When Beethoven moves from C major to G major in his symphonies, he\'s literally moving one step around this circle.","visual_description":"Circular diagram showing the progression of keys","complexity":"intermediate"},{"id":"bach_fugue","type":"theory_story","category":"form","duration":"30-45","title":"Bach\'s Mathematical Music","content":"Johann Sebastian Bach didn\'t just compose fuguesâ€”he architected them like a master engineer. In his Art of Fugue, he demonstrated that a simple four-note theme could be transformed through inversion, retrograde, and augmentation to create an entire musical universe. Each voice enters at precise intervals, following mathematical ratios that mirror the golden ratio found in nature. When you hear a Bach fugue, you\'re experiencing pure musical geometry in motion.","visual_description":"Timeline showing fugue subject entries across different voices","complexity":"advanced"},{"id":"jazz_substitution","type":"mini_lesson","category":"harmony","duration":"20-30","title":"Jazz\'s Secret Weapon","content":"The tritone substitution is jazz\'s magic trick. Instead of playing the expected dominant chord, jazz musicians substitute it with a chord a tritone away. This creates smoother bass lines and adds sophisticated color. It\'s why jazz harmonies sound so much richer than basic pop progressions.","visual_description":"Piano keyboard showing tritone substitution","complexity":"intermediate"},{"id":"polyrhythm_africa","type":"theory_story","category":"rhythm","duration":"30-45","title":"When Rhythms Collide","content":"West African polyrhythms are like multiple conversations happening simultaneously, each with its own logic and flow. When enslaved Africans brought these complex rhythmic patterns to the Americas, they collided with European harmonic traditions to birth jazz, blues, and eventually rock. The next time you tap your foot to a syncopated beat, you\'re participating in a rhythmic revolution that spans continents and centuries.","visual_description":"Visual representation of overlapping rhythmic patterns","complexity":"advanced"},{"id":"sonata_form","type":"mini_lesson","category":"form","duration":"20-30","title":"Musical Architecture","content":"Sonata form is like a three-act play: exposition introduces the themes, development explores their dramatic potential, and recapitulation brings resolution. Mozart perfected this form, but Beethoven stretched it like taffy, creating movements that feel like epic journeys through emotional landscapes.","visual_description":"Architectural diagram showing sonata form structure","complexity":"intermediate"},{"id":"whole_tone_scale","type":"quick_fact","category":"harmony","duration":"10-15","title":"Floating on Air","content":"The whole tone scale has no leading tone, creating a floating, dreamlike quality. Debussy used it to paint musical impressions, making harmony feel weightless and ethereal. It\'s the sound of mystery and magic.","visual_description":"Piano keys highlighting whole tone scale pattern","complexity":"beginner"},{"id":"metric_modulation","type":"theory_story","category":"rhythm","duration":"30-45","title":"Time Traveler\'s Paradox","content":"Metric modulation is time travel in music. A composer takes a rhythmic valueâ€”say, the triplet eighth noteâ€”and suddenly declares it\'s now the new beat. Your brain scrambles to adjust, creating a thrilling sense of temporal displacement. Elliott Carter mastered this technique, making listeners feel like they\'re experiencing multiple time streams simultaneously. It\'s rhythm\'s answer to harmonic modulation.","visual_description":"Timeline showing how note values transform across tempo changes","complexity":"advanced"},{"id":"9755120e-a4d3-4dcd-896a-297bbdbe2790","type":"quick_fact","category":"harmony","duration":"30-45","title":"Why the V7 Chord Feels So Resolute","content":"Ever notice how the V7 chord seems to demand resolution? That\'s because it\'s packed with tension: the tritone between its third and seventh creates a strong pull toward the tonic. This is voice leading in action: each note wants to resolve by step, creating a feeling of closure.","visual_description":"Staff with a V7 chord resolving to I, voice-leading arrows shown","complexity":"beginner"},{"id":"65f3547e-37f2-45f1-84ae-af9531ea8ea3","type":"quick_fact","category":"harmony","duration":"30-45","title":"Jazz Harmony: Navigating ii-V-I Progressions","content":"Ever notice how the V7 chord seems to demand resolution? That\'s because it\'s packed with tension: the tritone between its third and seventh creates a strong pull toward the tonic. This is voice leading in action: each note wants to resolve by step, creating a feeling of closure.","visual_description":"Staff with a V7 chord resolving to I, voice-leading arrows shown","complexity":"intermediate"},{"id":"903ac729-4e5d-4743-8887-ead1333e601f","type":"theory_story","category":"harmony","duration":"20-30","title":"The Emotional Color of Minor Seventh Chords","content":"The circle of fifths isn\'t just for memorizing key signatures. It\'s a powerful tool for understanding relationships between keys and modulating smoothly in compositions. Try modulating from C to G â€“ you\'ll find just one sharp in the way!","visual_description":"","complexity":"beginner"},{"id":"36d10750-f68e-464c-9a41-902c8538cda9","type":"theory_story","category":"harmony","duration":"20-30","title":"Breaking the Rules: Parallel Fifths in Pop Music","content":"Ever notice how the V7 chord seems to demand resolution? That\'s because it\'s packed with tension: the tritone between its third and seventh creates a strong pull toward the tonic. This is voice leading in action: each note wants to resolve by step, creating a feeling of closure.","visual_description":"","complexity":"advanced"},{"id":"78dbf701-d559-43a5-8332-18e1f99cab0a","type":"theory_story","category":"harmony","duration":"10-15","title":"Jazz Harmony: Navigating ii-V-I Progressions","content":"The circle of fifths isn\'t just for memorizing key signatures. It\'s a powerful tool for understanding relationships between keys and modulating smoothly in compositions. Try modulating from C to G â€“ you\'ll find just one sharp in the way!","visual_description":"Staff with a V7 chord resolving to I, voice-leading arrows shown","complexity":"intermediate"},{"id":"08c8176a-c928-437a-aa21-8adb328beaa5","type":"mini_lesson","category":"harmony","duration":"30-45","title":"Why the V7 Chord Feels So Resolute","content":"The circle of fifths isn\'t just for memorizing key signatures. It\'s a powerful tool for understanding relationships between keys and modulating smoothly in compositions. Try modulating from C to G â€“ you\'ll find just one sharp in the way!","visual_description":"","complexity":"intermediate"},{"id":"37808ffb-69ff-443c-b3a6-35c48d5bfdfa","type":"mini_lesson","category":"harmony","duration":"30-45","title":"Jazz Harmony: Navigating ii-V-I Progressions","content":"Jazz musicians often use the ii-V-I progression to create smooth harmonic motion. In C major, thatâ€™s Dm7 - G7 - Cmaj7. The voice leading between these chords creates a pleasing sense of direction and sophistication.","visual_description":"","complexity":"beginner"},{"id":"f6349c5b-84f4-480e-92fe-c3998e5dfe0d","type":"mini_lesson","category":"harmony","duration":"30-45","title":"Why the V7 Chord Feels So Resolute","content":"Jazz musicians often use the ii-V-I progression to create smooth harmonic motion. In C major, thatâ€™s Dm7 - G7 - Cmaj7. The voice leading between these chords creates a pleasing sense of direction and sophistication.","visual_description":"Staff with a V7 chord resolving to I, voice-leading arrows shown","complexity":"beginner"},{"id":"b352f111-a721-49bf-8fa9-11956294dea9","type":"mini_lesson","category":"harmony","duration":"30-45","title":"Modulating Without Moving: Pivot Chords in Action","content":"Jazz musicians often use the ii-V-I progression to create smooth harmonic motion. In C major, thatâ€™s Dm7 - G7 - Cmaj7. The voice leading between these chords creates a pleasing sense of direction and sophistication.","visual_description":"","complexity":"beginner"},{"id":"b3078179-59e5-4613-bf81-3b8cb2e24f58","type":"quick_fact","category":"harmony","duration":"10-15","title":"Modulating Without Moving: Pivot Chords in Action","content":"Jazz musicians often use the ii-V-I progression to create smooth harmonic motion. In C major, thatâ€™s Dm7 - G7 - Cmaj7. The voice leading between these chords creates a pleasing sense of direction and sophistication.","visual_description":"Staff with a V7 chord resolving to I, voice-leading arrows shown","complexity":"advanced"},{"id":"bba895f7-6823-4831-83b4-b8e1851d4fa4","type":"theory_story","category":"harmony","duration":"30-45","title":"Jazz Harmony: Navigating ii-V-I Progressions","content":"The circle of fifths isn\'t just for memorizing key signatures. It\'s a powerful tool for understanding relationships between keys and modulating smoothly in compositions. Try modulating from C to G â€“ you\'ll find just one sharp in the way!","visual_description":"","complexity":"beginner"},{"id":"c3d3dcaf-14fe-4058-b07f-2058a38db49f","type":"quick_fact","category":"harmony","duration":"30-45","title":"The Emotional Color of Minor Seventh Chords","content":"Ever notice how the V7 chord seems to demand resolution? That\'s because it\'s packed with tension: the tritone between its third and seventh creates a strong pull toward the tonic. This is voice leading in action: each note wants to resolve by step, creating a feeling of closure.","visual_description":"Staff with a V7 chord resolving to I, voice-leading arrows shown","complexity":"beginner"},{"id":"df333c68-e2ff-4040-8fc7-1d9ad412c713","type":"quick_fact","category":"harmony","duration":"10-15","title":"Breaking the Rules: Parallel Fifths in Pop Music","content":"Jazz musicians often use the ii-V-I progression to create smooth harmonic motion. In C major, thatâ€™s Dm7 - G7 - Cmaj7. The voice leading between these chords creates a pleasing sense of direction and sophistication.","visual_description":"","complexity":"intermediate"},{"id":"052162ed-543b-47d6-8045-1b686efd51f3","type":"quick_fact","category":"harmony","duration":"20-30","title":"Why the V7 Chord Feels So Resolute","content":"Jazz musicians often use the ii-V-I progression to create smooth harmonic motion. In C major, thatâ€™s Dm7 - G7 - Cmaj7. The voice leading between these chords creates a pleasing sense of direction and sophistication.","visual_description":"Staff with a V7 chord resolving to I, voice-leading arrows shown","complexity":"intermediate"},{"id":"2ccdfded-52e8-4916-b665-5e5ef9c47847","type":"quick_fact","category":"harmony","duration":"20-30","title":"The Emotional Color of Minor Seventh Chords","content":"The circle of fifths isn\'t just for memorizing key signatures. It\'s a powerful tool for understanding relationships between keys and modulating smoothly in compositions. Try modulating from C to G â€“ you\'ll find just one sharp in the way!","visual_description":"","complexity":"intermediate"},{"id":"5fea550c-00be-45ad-9f3c-6bb16260c6fb","type":"quick_fact","category":"harmony","duration":"20-30","title":"Jazz Harmony: Navigating ii-V-I Progressions","content":"The circle of fifths isn\'t just for memorizing key signatures. It\'s a powerful tool for understanding relationships between keys and modulating smoothly in compositions. Try modulating from C to G â€“ you\'ll find just one sharp in the way!","visual_description":"","complexity":"intermediate"},{"id":"9cc42b4f-c1fd-4bd8-b2e6-beebbfc70035","type":"quick_fact","category":"harmony","duration":"10-15","title":"Breaking the Rules: Parallel Fifths in Pop Music","content":"Jazz musicians often use the ii-V-I progression to create smooth harmonic motion. In C major, thatâ€™s Dm7 - G7 - Cmaj7. The voice leading between these chords creates a pleasing sense of direction and sophistication.","visual_description":"","complexity":"beginner"},{"id":"002adef9-e52b-4e19-9715-b7d1bbe6200f","type":"quick_fact","category":"harmony","duration":"30-45","title":"The Emotional Color of Minor Seventh Chords","content":"Jazz musicians often use the ii-V-I progression to create smooth harmonic motion. In C major, thatâ€™s Dm7 - G7 - Cmaj7. The voice leading between these chords creates a pleasing sense of direction and sophistication.","visual_description":"","complexity":"advanced"},{"id":"32f53895-b7fa-42d8-bd99-5d6f084770a9","type":"quick_fact","category":"harmony","duration":"10-15","title":"Why the V7 Chord Feels So Resolute","content":"The circle of fifths isn\'t just for memorizing key signatures. It\'s a powerful tool for understanding relationships between keys and modulating smoothly in compositions. Try modulating from C to G â€“ you\'ll find just one sharp in the way!","visual_description":"","complexity":"beginner"},{"id":"8758c7c1-7cce-4461-b1d0-1a73d5b9da65","type":"mini_lesson","category":"harmony","duration":"20-30","title":"Why the V7 Chord Feels So Resolute","content":"Jazz musicians often use the ii-V-I progression to create smooth harmonic motion. In C major, thatâ€™s Dm7 - G7 - Cmaj7. The voice leading between these chords creates a pleasing sense of direction and sophistication.","visual_description":"Staff with a V7 chord resolving to I, voice-leading arrows shown","complexity":"intermediate"},{"id":"9dfff10e-9811-4d85-9933-f2edda50f31e","type":"mini_lesson","category":"harmony","duration":"20-30","title":"Why the V7 Chord Feels So Resolute","content":"Jazz musicians often use the ii-V-I progression to create smooth harmonic motion. In C major, thatâ€™s Dm7 - G7 - Cmaj7. The voice leading between these chords creates a pleasing sense of direction and sophistication.","visual_description":"Staff with a V7 chord resolving to I, voice-leading arrows shown","complexity":"beginner"},{"id":"d66ba51e-f223-4b82-8124-cf7b58310194","type":"mini_lesson","category":"harmony","duration":"20-30","title":"Breaking the Rules: Parallel Fifths in Pop Music","content":"Ever notice how the V7 chord seems to demand resolution? That\'s because it\'s packed with tension: the tritone between its third and seventh creates a strong pull toward the tonic. This is voice leading in action: each note wants to resolve by step, creating a feeling of closure.","visual_description":"","complexity":"beginner"},{"id":"38f08b75-87a9-4a75-95ef-654fb9342535","type":"mini_lesson","category":"harmony","duration":"10-15","title":"Why the V7 Chord Feels So Resolute","content":"Ever notice how the V7 chord seems to demand resolution? That\'s because it\'s packed with tension: the tritone between its third and seventh creates a strong pull toward the tonic. This is voice leading in action: each note wants to resolve by step, creating a feeling of closure.","visual_description":"Staff with a V7 chord resolving to I, voice-leading arrows shown","complexity":"intermediate"},{"id":"892470e0-8635-4a60-afdd-297c30bfbe5a","type":"quick_fact","category":"harmony","duration":"30-45","title":"Why the V7 Chord Feels So Resolute","content":"The circle of fifths isn\'t just for memorizing key signatures. It\'s a powerful tool for understanding relationships between keys and modulating smoothly in compositions. Try modulating from C to G â€“ you\'ll find just one sharp in the way!","visual_description":"","complexity":"advanced"},{"id":"f22c55c9-ce78-45ab-a9e2-28dabea40fc7","type":"mini_lesson","category":"form","duration":"20-30","title":"Theme and Variations: Mozart vs. Brahms","content":"Sonata form is like a musical story: it starts with an exposition (main themes), journeys through a development (harmonic exploration), and returns in the recapitulation. Think of Mozartâ€™s piano sonatas â€“ they follow this blueprint masterfully.","visual_description":"Sonata form diagram: exposition, development, recapitulation timeline","complexity":"intermediate"},{"id":"608bc3df-4dbb-4664-b118-9189773e45d3","type":"theory_story","category":"form","duration":"30-45","title":"Musical Palindromes and Their Structure","content":"Sonata form is like a musical story: it starts with an exposition (main themes), journeys through a development (harmonic exploration), and returns in the recapitulation. Think of Mozartâ€™s piano sonatas â€“ they follow this blueprint masterfully.","visual_description":"","complexity":"intermediate"},{"id":"944f8e35-b320-4de6-b175-1b10ba513d39","type":"mini_lesson","category":"form","duration":"20-30","title":"Mapping a Sonata: Exposition to Recap","content":"In a fugue, the subject enters in one voice and is answered in another, creating a layered texture. Bachâ€™s fugues often introduce the subject in the tonic, then follow with an answer in the dominant â€“ a hallmark of contrapuntal design.","visual_description":"Sonata form diagram: exposition, development, recapitulation timeline","complexity":"beginner"},{"id":"c08be6af-476c-49b9-8d27-c123d896906a","type":"quick_fact","category":"form","duration":"20-30","title":"AABA Form in Jazz Standards","content":"In a fugue, the subject enters in one voice and is answered in another, creating a layered texture. Bachâ€™s fugues often introduce the subject in the tonic, then follow with an answer in the dominant â€“ a hallmark of contrapuntal design.","visual_description":"","complexity":"beginner"},{"id":"180c6bca-adff-4d22-a93b-e73d3f8c0e53","type":"theory_story","category":"form","duration":"30-45","title":"Fugue Construction 101","content":"Sonata form is like a musical story: it starts with an exposition (main themes), journeys through a development (harmonic exploration), and returns in the recapitulation. Think of Mozartâ€™s piano sonatas â€“ they follow this blueprint masterfully.","visual_description":"Sonata form diagram: exposition, development, recapitulation timeline","complexity":"beginner"},{"id":"7e86d59b-5b4b-4f89-b7b6-3242074f0ccf","type":"quick_fact","category":"form","duration":"30-45","title":"AABA Form in Jazz Standards","content":"Sonata form is like a musical story: it starts with an exposition (main themes), journeys through a development (harmonic exploration), and returns in the recapitulation. Think of Mozartâ€™s piano sonatas â€“ they follow this blueprint masterfully.","visual_description":"Sonata form diagram: exposition, development, recapitulation timeline","complexity":"intermediate"},{"id":"789fcec7-b284-4f81-bd0c-42f4204c44fb","type":"quick_fact","category":"form","duration":"30-45","title":"Theme and Variations: Mozart vs. Brahms","content":"In a fugue, the subject enters in one voice and is answered in another, creating a layered texture. Bachâ€™s fugues often introduce the subject in the tonic, then follow with an answer in the dominant â€“ a hallmark of contrapuntal design.","visual_description":"Sonata form diagram: exposition, development, recapitulation timeline","complexity":"intermediate"},{"id":"bbe00690-5788-44ab-93bb-470ad99ca2e2","type":"theory_story","category":"form","duration":"10-15","title":"Musical Palindromes and Their Structure","content":"In a fugue, the subject enters in one voice and is answered in another, creating a layered texture. Bachâ€™s fugues often introduce the subject in the tonic, then follow with an answer in the dominant â€“ a hallmark of contrapuntal design.","visual_description":"","complexity":"advanced"},{"id":"92618b7d-5ca6-40ff-8d89-2ea38e15a647","type":"mini_lesson","category":"form","duration":"20-30","title":"AABA Form in Jazz Standards","content":"In a fugue, the subject enters in one voice and is answered in another, creating a layered texture. Bachâ€™s fugues often introduce the subject in the tonic, then follow with an answer in the dominant â€“ a hallmark of contrapuntal design.","visual_description":"","complexity":"beginner"},{"id":"142b4463-406d-4ea4-a040-f23b29a91490","type":"mini_lesson","category":"form","duration":"10-15","title":"AABA Form in Jazz Standards","content":"Sonata form is like a musical story: it starts with an exposition (main themes), journeys through a development (harmonic exploration), and returns in the recapitulation. Think of Mozartâ€™s piano sonatas â€“ they follow this blueprint masterfully.","visual_description":"","complexity":"advanced"},{"id":"50523aef-51f7-423a-92e1-915a4e4b6767","type":"theory_story","category":"form","duration":"20-30","title":"Theme and Variations: Mozart vs. Brahms","content":"In a fugue, the subject enters in one voice and is answered in another, creating a layered texture. Bachâ€™s fugues often introduce the subject in the tonic, then follow with an answer in the dominant â€“ a hallmark of contrapuntal design.","visual_description":"","complexity":"advanced"},{"id":"e7936415-fc19-4812-95f7-654269a96da6","type":"theory_story","category":"form","duration":"10-15","title":"Mapping a Sonata: Exposition to Recap","content":"Sonata form is like a musical story: it starts with an exposition (main themes), journeys through a development (harmonic exploration), and returns in the recapitulation. Think of Mozartâ€™s piano sonatas â€“ they follow this blueprint masterfully.","visual_description":"Sonata form diagram: exposition, development, recapitulation timeline","complexity":"beginner"},{"id":"6a5cad6a-e79d-4df0-94b1-d8d64ca4dab6","type":"theory_story","category":"form","duration":"20-30","title":"Fugue Construction 101","content":"In a fugue, the subject enters in one voice and is answered in another, creating a layered texture. Bachâ€™s fugues often introduce the subject in the tonic, then follow with an answer in the dominant â€“ a hallmark of contrapuntal design.","visual_description":"Sonata form diagram: exposition, development, recapitulation timeline","complexity":"beginner"},{"id":"f30d33b2-2f08-47b4-8f22-f36d40e7ba06","type":"quick_fact","category":"form","duration":"30-45","title":"Theme and Variations: Mozart vs. Brahms","content":"In a fugue, the subject enters in one voice and is answered in another, creating a layered texture. Bachâ€™s fugues often introduce the subject in the tonic, then follow with an answer in the dominant â€“ a hallmark of contrapuntal design.","visual_description":"","complexity":"intermediate"},{"id":"ded2ff46-cbc6-40a2-925b-f4873dc4a213","type":"theory_story","category":"form","duration":"30-45","title":"Fugue Construction 101","content":"Sonata form is like a musical story: it starts with an exposition (main themes), journeys through a development (harmonic exploration), and returns in the recapitulation. Think of Mozartâ€™s piano sonatas â€“ they follow this blueprint masterfully.","visual_description":"Sonata form diagram: exposition, development, recapitulation timeline","complexity":"beginner"},{"id":"1ecf5e8c-fd3e-43cb-8ac7-1255d73e708a","type":"mini_lesson","category":"form","duration":"20-30","title":"Mapping a Sonata: Exposition to Recap","content":"Sonata form is like a musical story: it starts with an exposition (main themes), journeys through a development (harmonic exploration), and returns in the recapitulation. Think of Mozartâ€™s piano sonatas â€“ they follow this blueprint masterfully.","visual_description":"Sonata form diagram: exposition, development, recapitulation timeline","complexity":"intermediate"},{"id":"2a7955d1-a10a-4225-9ccc-a56f02f107dc","type":"theory_story","category":"form","duration":"20-30","title":"Fugue Construction 101","content":"Sonata form is like a musical story: it starts with an exposition (main themes), journeys through a development (harmonic exploration), and returns in the recapitulation. Think of Mozartâ€™s piano sonatas â€“ they follow this blueprint masterfully.","visual_description":"","complexity":"beginner"},{"id":"bf00ca06-477d-4717-ab74-089f920c629f","type":"mini_lesson","category":"form","duration":"20-30","title":"AABA Form in Jazz Standards","content":"Sonata form is like a musical story: it starts with an exposition (main themes), journeys through a development (harmonic exploration), and returns in the recapitulation. Think of Mozartâ€™s piano sonatas â€“ they follow this blueprint masterfully.","visual_description":"","complexity":"advanced"},{"id":"4ea0d6d5-5448-4375-81b2-f8cbba32ffaf","type":"quick_fact","category":"form","duration":"10-15","title":"AABA Form in Jazz Standards","content":"In a fugue, the subject enters in one voice and is answered in another, creating a layered texture. Bachâ€™s fugues often introduce the subject in the tonic, then follow with an answer in the dominant â€“ a hallmark of contrapuntal design.","visual_description":"","complexity":"advanced"},{"id":"deb8e7b1-0a56-4918-8b50-7dd0ff3cf8f7","type":"quick_fact","category":"form","duration":"30-45","title":"Theme and Variations: Mozart vs. Brahms","content":"In a fugue, the subject enters in one voice and is answered in another, creating a layered texture. Bachâ€™s fugues often introduce the subject in the tonic, then follow with an answer in the dominant â€“ a hallmark of contrapuntal design.","visual_description":"","complexity":"advanced"},{"id":"94e0d5a8-25ba-4151-bd03-4d874a8e02a8","type":"theory_story","category":"form","duration":"30-45","title":"Theme and Variations: Mozart vs. Brahms","content":"In a fugue, the subject enters in one voice and is answered in another, creating a layered texture. Bachâ€™s fugues often introduce the subject in the tonic, then follow with an answer in the dominant â€“ a hallmark of contrapuntal design.","visual_description":"Sonata form diagram: exposition, development, recapitulation timeline","complexity":"intermediate"},{"id":"69db9dba-b3a5-49ab-aafd-f2fcfcb57dc1","type":"mini_lesson","category":"form","duration":"30-45","title":"Theme and Variations: Mozart vs. Brahms","content":"In a fugue, the subject enters in one voice and is answered in another, creating a layered texture. Bachâ€™s fugues often introduce the subject in the tonic, then follow with an answer in the dominant â€“ a hallmark of contrapuntal design.","visual_description":"","complexity":"beginner"},{"id":"c43770d4-51c9-42a3-a743-59e4b5bd088f","type":"quick_fact","category":"rhythm","duration":"20-30","title":"Syncopation: The Groove-Maker","content":"Syncopation occurs when emphasis is placed on weak beats or offbeats, creating a sense of surprise. Listen to ragtime or Afro-Cuban music for some of the most iconic examples!","visual_description":"Illustration of 5/4 time signature with beat groupings","complexity":"beginner"},{"id":"142af9a2-c81b-4337-bac6-0c1c98f8a6a0","type":"quick_fact","category":"rhythm","duration":"30-45","title":"Feeling Five: The Quirks of 5/4 Time","content":"Syncopation occurs when emphasis is placed on weak beats or offbeats, creating a sense of surprise. Listen to ragtime or Afro-Cuban music for some of the most iconic examples!","visual_description":"","complexity":"beginner"},{"id":"4bd496c0-78a1-4e3c-b23c-1b410a68d2d0","type":"theory_story","category":"rhythm","duration":"10-15","title":"Polyrhythm vs. Polymeter","content":"In 5/4 time, the beat can be grouped as 3+2 or 2+3 â€“ each subdivision feels different. Dave Brubeckâ€™s \'Take Five\' plays with this asymmetry to create its signature groove.","visual_description":"","complexity":"intermediate"},{"id":"7d2447b5-26c4-481d-b228-bd71953f8720","type":"theory_story","category":"rhythm","duration":"10-15","title":"What is Hemiola? A Rhythmic Illusion","content":"In 5/4 time, the beat can be grouped as 3+2 or 2+3 â€“ each subdivision feels different. Dave Brubeckâ€™s \'Take Five\' plays with this asymmetry to create its signature groove.","visual_description":"Illustration of 5/4 time signature with beat groupings","complexity":"intermediate"},{"id":"af823f9b-272a-405f-bdee-383b34c3b9e3","type":"mini_lesson","category":"rhythm","duration":"10-15","title":"Why 12/8 Feels Like a Dance","content":"In 5/4 time, the beat can be grouped as 3+2 or 2+3 â€“ each subdivision feels different. Dave Brubeckâ€™s \'Take Five\' plays with this asymmetry to create its signature groove.","visual_description":"","complexity":"beginner"},{"id":"eda754e0-8f92-4bc7-831c-27e93e32b9d3","type":"quick_fact","category":"rhythm","duration":"30-45","title":"Why 12/8 Feels Like a Dance","content":"Syncopation occurs when emphasis is placed on weak beats or offbeats, creating a sense of surprise. Listen to ragtime or Afro-Cuban music for some of the most iconic examples!","visual_description":"","complexity":"intermediate"},{"id":"b5867271-bba4-4a2f-a9f2-ff01a93dfb60","type":"quick_fact","category":"rhythm","duration":"20-30","title":"Why 12/8 Feels Like a Dance","content":"In 5/4 time, the beat can be grouped as 3+2 or 2+3 â€“ each subdivision feels different. Dave Brubeckâ€™s \'Take Five\' plays with this asymmetry to create its signature groove.","visual_description":"","complexity":"intermediate"},{"id":"bbc3c8e0-6f4f-4f41-a40a-59a129183871","type":"mini_lesson","category":"rhythm","duration":"20-30","title":"What is Hemiola? A Rhythmic Illusion","content":"Syncopation occurs when emphasis is placed on weak beats or offbeats, creating a sense of surprise. Listen to ragtime or Afro-Cuban music for some of the most iconic examples!","visual_description":"","complexity":"beginner"},{"id":"00046424-b9e9-4b38-876f-426c8ebdf3ec","type":"quick_fact","category":"rhythm","duration":"20-30","title":"Feeling Five: The Quirks of 5/4 Time","content":"Syncopation occurs when emphasis is placed on weak beats or offbeats, creating a sense of surprise. Listen to ragtime or Afro-Cuban music for some of the most iconic examples!","visual_description":"","complexity":"intermediate"},{"id":"5d3803d1-2f49-4326-8c22-bee5b3367dfa","type":"quick_fact","category":"rhythm","duration":"30-45","title":"Syncopation: The Groove-Maker","content":"Syncopation occurs when emphasis is placed on weak beats or offbeats, creating a sense of surprise. Listen to ragtime or Afro-Cuban music for some of the most iconic examples!","visual_description":"","complexity":"beginner"},{"id":"131e6255-96e0-4385-befc-f9c8e21f0f81","type":"mini_lesson","category":"rhythm","duration":"10-15","title":"Feeling Five: The Quirks of 5/4 Time","content":"Syncopation occurs when emphasis is placed on weak beats or offbeats, creating a sense of surprise. Listen to ragtime or Afro-Cuban music for some of the most iconic examples!","visual_description":"","complexity":"beginner"},{"id":"89bb726e-eba6-433c-8c3a-f85b23dcc3ec","type":"quick_fact","category":"rhythm","duration":"10-15","title":"What is Hemiola? A Rhythmic Illusion","content":"Syncopation occurs when emphasis is placed on weak beats or offbeats, creating a sense of surprise. Listen to ragtime or Afro-Cuban music for some of the most iconic examples!","visual_description":"","complexity":"intermediate"},{"id":"80171342-d48a-493d-a107-fb86f2190a2b","type":"quick_fact","category":"rhythm","duration":"30-45","title":"Syncopation: The Groove-Maker","content":"Syncopation occurs when emphasis is placed on weak beats or offbeats, creating a sense of surprise. Listen to ragtime or Afro-Cuban music for some of the most iconic examples!","visual_description":"Illustration of 5/4 time signature with beat groupings","complexity":"intermediate"},{"id":"3ca73b98-8ca3-48f7-872d-a5c4d4387ddf","type":"mini_lesson","category":"rhythm","duration":"30-45","title":"Feeling Five: The Quirks of 5/4 Time","content":"In 5/4 time, the beat can be grouped as 3+2 or 2+3 â€“ each subdivision feels different. Dave Brubeckâ€™s \'Take Five\' plays with this asymmetry to create its signature groove.","visual_description":"Illustration of 5/4 time signature with beat groupings","complexity":"intermediate"},{"id":"eb6b614e-d16b-4e7c-b73a-2e0d611d8107","type":"mini_lesson","category":"rhythm","duration":"20-30","title":"Polyrhythm vs. Polymeter","content":"Syncopation occurs when emphasis is placed on weak beats or offbeats, creating a sense of surprise. Listen to ragtime or Afro-Cuban music for some of the most iconic examples!","visual_description":"","complexity":"beginner"},{"id":"bca714c9-d64f-4fb5-9276-1bef0a6a509f","type":"mini_lesson","category":"rhythm","duration":"30-45","title":"What is Hemiola? A Rhythmic Illusion","content":"In 5/4 time, the beat can be grouped as 3+2 or 2+3 â€“ each subdivision feels different. Dave Brubeckâ€™s \'Take Five\' plays with this asymmetry to create its signature groove.","visual_description":"Illustration of 5/4 time signature with beat groupings","complexity":"beginner"},{"id":"adeb6b87-4965-445c-a349-679753f48c9b","type":"mini_lesson","category":"rhythm","duration":"10-15","title":"Feeling Five: The Quirks of 5/4 Time","content":"In 5/4 time, the beat can be grouped as 3+2 or 2+3 â€“ each subdivision feels different. Dave Brubeckâ€™s \'Take Five\' plays with this asymmetry to create its signature groove.","visual_description":"","complexity":"intermediate"},{"id":"4c08c87e-54bf-42cb-b0d2-aa7f7193702f","type":"mini_lesson","category":"rhythm","duration":"30-45","title":"Feeling Five: The Quirks of 5/4 Time","content":"In 5/4 time, the beat can be grouped as 3+2 or 2+3 â€“ each subdivision feels different. Dave Brubeckâ€™s \'Take Five\' plays with this asymmetry to create its signature groove.","visual_description":"","complexity":"beginner"},{"id":"48da0a45-54c7-40c5-8386-19c18672490a","type":"quick_fact","category":"history","duration":"20-30","title":"Why Medieval Music Was Modal","content":"Indian classical music doesnâ€™t use chords but instead relies on melodic frameworks called ragas and rhythmic cycles called talas. These concepts are centuries old and deeply sophisticated.","visual_description":"","complexity":"intermediate"},{"id":"6854268e-a51e-4f32-b36c-3d850358af8a","type":"quick_fact","category":"history","duration":"20-30","title":"Raga and Tala: Indian Music Theory Fundamentals","content":"Indian classical music doesnâ€™t use chords but instead relies on melodic frameworks called ragas and rhythmic cycles called talas. These concepts are centuries old and deeply sophisticated.","visual_description":"","complexity":"beginner"},{"id":"1ae15adf-6425-4a2c-8121-a4777e2bbd32","type":"quick_fact","category":"history","duration":"30-45","title":"Raga and Tala: Indian Music Theory Fundamentals","content":"In the medieval era, music was based on modes, not major and minor scales. The Dorian mode, for example, sounds like a minor scale with a raised sixth â€“ listen to Gregorian chant for a taste.","visual_description":"","complexity":"advanced"},{"id":"48f8b2e6-148c-4b89-849f-55023bd42a83","type":"mini_lesson","category":"history","duration":"30-45","title":"Why Medieval Music Was Modal","content":"Indian classical music doesnâ€™t use chords but instead relies on melodic frameworks called ragas and rhythmic cycles called talas. These concepts are centuries old and deeply sophisticated.","visual_description":"","complexity":"advanced"},{"id":"018119e9-4bbc-41fe-bc14-d7808f5269ba","type":"quick_fact","category":"history","duration":"20-30","title":"Why Medieval Music Was Modal","content":"In the medieval era, music was based on modes, not major and minor scales. The Dorian mode, for example, sounds like a minor scale with a raised sixth â€“ listen to Gregorian chant for a taste.","visual_description":"","complexity":"beginner"},{"id":"0408b7ec-3ff5-4f2c-bf8a-33e41e8fb485","type":"mini_lesson","category":"history","duration":"30-45","title":"Arnold Schoenberg and the 12-Tone Revolution","content":"In the medieval era, music was based on modes, not major and minor scales. The Dorian mode, for example, sounds like a minor scale with a raised sixth â€“ listen to Gregorian chant for a taste.","visual_description":"","complexity":"intermediate"},{"id":"c8b7f8b9-7dec-4f7a-b142-8093d8714523","type":"quick_fact","category":"history","duration":"30-45","title":"The Rise of Tonality in the Baroque Era","content":"Indian classical music doesnâ€™t use chords but instead relies on melodic frameworks called ragas and rhythmic cycles called talas. These concepts are centuries old and deeply sophisticated.","visual_description":"Timeline showing evolution from modes to tonal harmony","complexity":"beginner"},{"id":"edc4aa24-e98b-4e5d-9f95-a3877c6f3b01","type":"quick_fact","category":"history","duration":"30-45","title":"Raga and Tala: Indian Music Theory Fundamentals","content":"In the medieval era, music was based on modes, not major and minor scales. The Dorian mode, for example, sounds like a minor scale with a raised sixth â€“ listen to Gregorian chant for a taste.","visual_description":"","complexity":"beginner"},{"id":"c942599c-9333-4788-991e-ea8cb213b3e8","type":"mini_lesson","category":"history","duration":"20-30","title":"The Rise of Tonality in the Baroque Era","content":"Indian classical music doesnâ€™t use chords but instead relies on melodic frameworks called ragas and rhythmic cycles called talas. These concepts are centuries old and deeply sophisticated.","visual_description":"","complexity":"intermediate"},{"id":"deec25e2-b527-4e56-9e80-d52fa649e12f","type":"mini_lesson","category":"history","duration":"10-15","title":"The Rise of Tonality in the Baroque Era","content":"In the medieval era, music was based on modes, not major and minor scales. The Dorian mode, for example, sounds like a minor scale with a raised sixth â€“ listen to Gregorian chant for a taste.","visual_description":"Timeline showing evolution from modes to tonal harmony","complexity":"beginner"},{"id":"cb6dba2c-5124-45b6-92b4-bbefa7100d33","type":"quick_fact","category":"history","duration":"30-45","title":"Heinrich Schenker: Redefining Analysis","content":"Indian classical music doesnâ€™t use chords but instead relies on melodic frameworks called ragas and rhythmic cycles called talas. These concepts are centuries old and deeply sophisticated.","visual_description":"Timeline showing evolution from modes to tonal harmony","complexity":"beginner"},{"id":"0c98fb11-90a2-47df-8b2d-4678d15405b2","type":"theory_story","category":"history","duration":"30-45","title":"Raga and Tala: Indian Music Theory Fundamentals","content":"In the medieval era, music was based on modes, not major and minor scales. The Dorian mode, for example, sounds like a minor scale with a raised sixth â€“ listen to Gregorian chant for a taste.","visual_description":"","complexity":"intermediate"},{"id":"5df72886-d823-4780-875e-1a5eed2ebcf3","type":"quick_fact","category":"history","duration":"20-30","title":"The Rise of Tonality in the Baroque Era","content":"In the medieval era, music was based on modes, not major and minor scales. The Dorian mode, for example, sounds like a minor scale with a raised sixth â€“ listen to Gregorian chant for a taste.","visual_description":"","complexity":"intermediate"},{"id":"fadd2ebb-532c-43b7-b3ed-993b2281fabe","type":"quick_fact","category":"history","duration":"20-30","title":"Raga and Tala: Indian Music Theory Fundamentals","content":"Indian classical music doesnâ€™t use chords but instead relies on melodic frameworks called ragas and rhythmic cycles called talas. These concepts are centuries old and deeply sophisticated.","visual_description":"Timeline showing evolution from modes to tonal harmony","complexity":"beginner"},{"id":"b4f4ca89-3c90-435c-9b4f-086ea0339b25","type":"mini_lesson","category":"history","duration":"30-45","title":"Why Medieval Music Was Modal","content":"Indian classical music doesnâ€™t use chords but instead relies on melodic frameworks called ragas and rhythmic cycles called talas. These concepts are centuries old and deeply sophisticated.","visual_description":"","complexity":"intermediate"},{"id":"7214cbf8-1146-46b1-9bcb-208de2b94362","type":"quick_fact","category":"history","duration":"30-45","title":"Heinrich Schenker: Redefining Analysis","content":"In the medieval era, music was based on modes, not major and minor scales. The Dorian mode, for example, sounds like a minor scale with a raised sixth â€“ listen to Gregorian chant for a taste.","visual_description":"","complexity":"intermediate"},{"id":"b8685bf0-c4eb-4bbe-86db-27968312d828","type":"theory_story","category":"history","duration":"20-30","title":"Why Medieval Music Was Modal","content":"In the medieval era, music was based on modes, not major and minor scales. The Dorian mode, for example, sounds like a minor scale with a raised sixth â€“ listen to Gregorian chant for a taste.","visual_description":"","complexity":"beginner"},{"id":"b18a5f6a-6017-4aaf-87ba-4627dab20f89","type":"mini_lesson","category":"analysis","duration":"20-30","title":"Cadences: More Than Just Endings","content":"Harmonic rhythm refers to how frequently chords change. A slow harmonic rhythm might mean one chord per measure; faster changes create drive and intensity, like in dance music.","visual_description":"","complexity":"beginner"},{"id":"51e21b09-11de-45c5-b466-3dc05d2212cc","type":"theory_story","category":"analysis","duration":"10-15","title":"Motivic Development in Beethoven\'s Fifth","content":"Roman numeral analysis assigns chords to scale degrees: I, IV, V, etc. In C major, C is I, F is IV, and G is V. This helps identify functional relationships between chords.","visual_description":"","complexity":"beginner"},{"id":"8bc498fe-f19c-4790-831a-3e9c163a98bb","type":"mini_lesson","category":"analysis","duration":"20-30","title":"Schenkerian Analysis: Seeing the Background","content":"Roman numeral analysis assigns chords to scale degrees: I, IV, V, etc. In C major, C is I, F is IV, and G is V. This helps identify functional relationships between chords.","visual_description":"Roman numeral chart over a short chord progression in C major","complexity":"advanced"},{"id":"edc5865f-abcc-4e80-b6c9-b14bcc7b4c62","type":"mini_lesson","category":"analysis","duration":"30-45","title":"Schenkerian Analysis: Seeing the Background","content":"Harmonic rhythm refers to how frequently chords change. A slow harmonic rhythm might mean one chord per measure; faster changes create drive and intensity, like in dance music.","visual_description":"","complexity":"advanced"},{"id":"2e50962b-1e61-4a72-8b4c-3ead2403a73e","type":"mini_lesson","category":"analysis","duration":"20-30","title":"Cadences: More Than Just Endings","content":"Harmonic rhythm refers to how frequently chords change. A slow harmonic rhythm might mean one chord per measure; faster changes create drive and intensity, like in dance music.","visual_description":"","complexity":"intermediate"},{"id":"9a5e94ed-3221-447c-98f0-c8a458a0656e","type":"quick_fact","category":"analysis","duration":"30-45","title":"Motivic Development in Beethoven\'s Fifth","content":"Harmonic rhythm refers to how frequently chords change. A slow harmonic rhythm might mean one chord per measure; faster changes create drive and intensity, like in dance music.","visual_description":"Roman numeral chart over a short chord progression in C major","complexity":"beginner"},{"id":"39cede34-ea04-4792-9080-d626695b3528","type":"quick_fact","category":"analysis","duration":"10-15","title":"Motivic Development in Beethoven\'s Fifth","content":"Roman numeral analysis assigns chords to scale degrees: I, IV, V, etc. In C major, C is I, F is IV, and G is V. This helps identify functional relationships between chords.","visual_description":"Roman numeral chart over a short chord progression in C major","complexity":"beginner"},{"id":"ac6b2a51-da36-4d32-968e-3c78e2c62c2a","type":"mini_lesson","category":"analysis","duration":"10-15","title":"Understanding Harmonic Rhythm","content":"Roman numeral analysis assigns chords to scale degrees: I, IV, V, etc. In C major, C is I, F is IV, and G is V. This helps identify functional relationships between chords.","visual_description":"","complexity":"intermediate"},{"id":"4f8be3a9-b2e5-47ec-9fc9-1a1fa3af9020","type":"theory_story","category":"analysis","duration":"30-45","title":"Cadences: More Than Just Endings","content":"Harmonic rhythm refers to how frequently chords change. A slow harmonic rhythm might mean one chord per measure; faster changes create drive and intensity, like in dance music.","visual_description":"","complexity":"advanced"},{"id":"327abe3d-9c62-4b1e-9e23-84ee2c286fb4","type":"quick_fact","category":"analysis","duration":"30-45","title":"Motivic Development in Beethoven\'s Fifth","content":"Harmonic rhythm refers to how frequently chords change. A slow harmonic rhythm might mean one chord per measure; faster changes create drive and intensity, like in dance music.","visual_description":"","complexity":"advanced"},{"id":"98f1b3eb-47c8-475a-85b2-8ed5a2e5d745","type":"quick_fact","category":"analysis","duration":"10-15","title":"Roman Numeral Analysis: A Crash Course","content":"Harmonic rhythm refers to how frequently chords change. A slow harmonic rhythm might mean one chord per measure; faster changes create drive and intensity, like in dance music.","visual_description":"","complexity":"intermediate"},{"id":"b24f7ab4-ebaa-46f6-a8eb-341d5e655531","type":"quick_fact","category":"analysis","duration":"10-15","title":"Understanding Harmonic Rhythm","content":"Harmonic rhythm refers to how frequently chords change. A slow harmonic rhythm might mean one chord per measure; faster changes create drive and intensity, like in dance music.","visual_description":"","complexity":"advanced"},{"id":"22eea19d-e7bf-45dd-bc35-d3348e33e535","type":"mini_lesson","category":"analysis","duration":"10-15","title":"Cadences: More Than Just Endings","content":"Harmonic rhythm refers to how frequently chords change. A slow harmonic rhythm might mean one chord per measure; faster changes create drive and intensity, like in dance music.","visual_description":"Roman numeral chart over a short chord progression in C major","complexity":"intermediate"}]}'),et=e=>{let{message:t="Analyzing your music score...",className:i=""}=e,[n,o]=(0,s.useState)(null),[r,c]=(0,s.useState)(0),[l,d]=(0,s.useState)(0),[m,h]=(0,s.useState)(new Set),[u,f]=(0,s.useState)(!0),[p,g]=(0,s.useState)(null),[y,x]=(0,s.useState)([]),[b,v]=(0,s.useState)(-1),w=()=>{let e=ee.k.filter(e=>!m.has(e.id));return 0===e.length?(h(new Set),ee.k[Math.floor(Math.random()*ee.k.length)]):e[Math.floor(Math.random()*e.length)]},j=e=>{switch(e){case"10-15":return 12500;case"15-20":return 25e3;case"20-25":return 37500;default:return 2e4}},k=e=>{if(!u)return;let t=j(e.duration)/100,i=0,a=setInterval(()=>{c(++i/t*100),i>=t&&(clearInterval(a),c(0),d(e=>e+1))},100);g(a)},N=()=>{p&&(clearInterval(p),g(null))},_=()=>{let e=w(),t={...e,type:e.type,category:e.category,duration:e.duration,complexity:e.complexity};return o(t),t&&(h(e=>new Set(e).add(t.id)),x(e=>[...e,t]),v(e=>e+1)),t},T=e=>{e>=0&&e<y.length&&(o(y[e]),v(e))},I=()=>{N(),c(0),f(!1),b<y.length-1?T(b+1):_(),setTimeout(()=>{f(!0),n&&k(n)},1e3)},S=()=>{N(),c(0),f(!1),b>0&&T(b-1),setTimeout(()=>{f(!0),n&&k(n)},1e3)};return((0,s.useEffect)(()=>(_(),()=>N()),[]),(0,s.useEffect)(()=>{if(n)return N(),c(0),k(n),()=>N()},[n,u]),(0,s.useEffect)(()=>{l>0&&_()},[l]),n)?(0,a.jsxs)("div",{className:"w-full max-w-4xl mx-auto p-4 sm:p-6 ".concat(i),children:[(0,a.jsxs)("div",{className:"text-center mb-6 sm:mb-8",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-2 sm:gap-3 mb-3 sm:mb-4",children:[(0,a.jsx)(q.A,{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-600 animate-pulse"}),(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 text-center",children:t})]}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-gray-600 px-2",children:"While you wait, explore some fascinating music theory..."})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-4 sm:p-6 mb-4 sm:mb-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-0 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(e=>{switch(e){case"quick_fact":return(0,a.jsx)($.A,{className:"w-5 h-5 text-yellow-500"});case"mini_lesson":return(0,a.jsx)(Q.A,{className:"w-5 h-5 text-blue-500"});case"theory_story":return(0,a.jsx)(q.A,{className:"w-5 h-5 text-purple-500"});default:return(0,a.jsx)(q.A,{className:"w-5 h-5 text-gray-500"})}})(n.type),(0,a.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 leading-tight",children:n.title})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"beginner":return"bg-green-100 text-green-700";case"intermediate":return"bg-yellow-100 text-yellow-700";case"advanced":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}})(n.complexity)),children:n.complexity}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600 capitalize",children:n.category})]})]}),(0,a.jsx)("div",{className:"space-y-3 sm:space-y-4",children:(0,a.jsx)("p",{className:"text-sm sm:text-base text-gray-700 leading-relaxed",children:n.content})}),(0,a.jsxs)("div",{className:"mt-4 sm:mt-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-xs sm:text-sm text-gray-500",children:"Reading progress"}),(0,a.jsxs)("span",{className:"text-xs sm:text-sm text-gray-500",children:[Math.round(r),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-100 ease-out",style:{width:"".concat(r,"%")}})})]}),(0,a.jsxs)("div",{className:"mt-4 sm:mt-6 pt-4 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:hidden",children:[(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Manual navigation pauses auto-progression"})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:S,disabled:b<=0,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(b<=0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 hover:bg-gray-200 text-gray-700"),children:(0,a.jsx)(Y.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:I,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:(0,a.jsx)(K.A,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"hidden sm:flex items-center justify-between",children:[(0,a.jsx)("button",{onClick:S,disabled:b<=0,className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(b<=0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 hover:bg-gray-200 text-gray-700"),children:(0,a.jsx)(Y.A,{className:"w-4 h-4"})}),(0,a.jsx)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:(0,a.jsx)("span",{children:"Manual navigation pauses auto-progression"})}),(0,a.jsx)("button",{onClick:I,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:(0,a.jsx)(K.A,{className:"w-4 h-4"})})]})]})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2 text-gray-500",children:[(0,a.jsx)(Z.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm text-center",children:"Analysis typically takes 45 - 180 seconds depending on the score size & complexity."})]})})]}):null},ei="https://api.notadb.xyz:8443";function ea(e){var t,i,n,o,r,c,l,d;let{onProcessingChange:m}=e,{scoreData:u,isLoading:f,error:p,refetch:g}=I(),[y,j]=(0,s.useState)(!1),[k,N]=(0,s.useState)(null),[_,T]=(0,s.useState)(null),[S,R]=(0,s.useState)(0),[D,B]=(0,s.useState)(null),[V,$]=(0,s.useState)(!1),[Q,Y]=(0,s.useState)(null),[K,Z]=(0,s.useState)(null),[ee,ea]=(0,s.useState)(null),[es,en]=(0,s.useState)(null),[eo,er]=(0,s.useState)(!1),[ec,el]=(0,s.useState)(window.innerWidth);(0,s.useEffect)(()=>{let e=()=>{el(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,s.useEffect)(()=>{var e,t,i;(null==u?void 0:null===(e=u.score)||void 0===e?void 0:e.processed)||(null==u?void 0:null===(t=u.task_status)||void 0===t?void 0:t.state)==="FAILURE"?m(!1):((null==u?void 0:null===(i=u.task_status)||void 0===i?void 0:i.state)==="PENDING"||f)&&m(!0)},[u,f,m]),(0,s.useEffect)(()=>{var e,t;if((null==u?void 0:null===(e=u.score)||void 0===e?void 0:e.processed)&&(null==u?void 0:null===(t=u.task_status)||void 0===t?void 0:t.state)!=="PENDING"){let e=async()=>{var e;if(!(null==u?void 0:null===(e=u.score)||void 0===e?void 0:e.midi_url)){console.log("No MIDI URL available");return}er(!0),en(null);try{console.log("Fetching MIDI from:","".concat(ei).concat(u.score.midi_url));let e=await fetch("".concat(ei).concat(u.score.midi_url),{method:"GET",headers:{Accept:"audio/midi, audio/x-midi, */*"}});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.arrayBuffer();console.log("MIDI data fetched, size:",t.byteLength),ea(t)}catch(t){let e=t instanceof Error?t.message:"Unknown error";console.error("Failed to fetch MIDI:",e),en("Failed to fetch MIDI: ".concat(e))}finally{er(!1)}};(async()=>{try{var e,t;console.log("Attempting to fetch MusicXML from:","".concat(ei).concat(null==u?void 0:null===(e=u.score)||void 0===e?void 0:e.musicxml_url));let i=await fetch("".concat(ei).concat(null==u?void 0:null===(t=u.score)||void 0===t?void 0:t.musicxml_url),{method:"GET",headers:{Accept:"application/xml, text/xml, application/vnd.recordare.musicxml+xml, */*"}});if(!i.ok)throw Error("HTTP error! status: ".concat(i.status," - ").concat(i.statusText));let a=i.headers.get("content-type");console.log("Response content type:",a);let s=await i.text();if(console.log("Response length:",s.length),console.log("First 200 characters:",s.substring(0,200)),!s.trim().startsWith("<?xml")&&!s.trim().startsWith("<"))throw Error("Response is not valid XML format");s.includes("score-partwise")||s.includes("score-timewise")||console.warn("Warning: Content doesn't appear to be MusicXML format"),T(s),N(null),R(0),console.log("MusicXML fetched successfully")}catch(t){let e=t instanceof Error?t.message:"Unknown error";if(console.error("Failed to fetch MusicXML:",e),S<3&&(e.includes("network")||e.includes("timeout"))){console.log("Retrying fetch attempt ".concat(S+1,"/3")),R(e=>e+1),setTimeout(()=>{},2e3*(S+1));return}N("Failed to fetch MusicXML: ".concat(e)),T(null),R(0)}})(),e()}},[null==u?void 0:null===(t=u.score)||void 0===t?void 0:t.processed,null==u?void 0:null===(i=u.task_status)||void 0===i?void 0:i.state,S]);let ed=async()=>{var e;if(!(null==u?void 0:null===(e=u.score)||void 0===e?void 0:e.id)){Y("No score ID available for summary generation");return}$(!0),Y(null);try{let e=await fetch("".concat(ei,"/api/generate-summary/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({score_id:u.score.id})});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.json();if("success"===t.status)t.summary&&B(t.summary),t.cleaned_text&&Z(t.cleaned_text);else throw Error("Invalid response format from server")}catch(e){Y(e instanceof Error?e.message:"Failed to generate summary")}finally{$(!1)}};return p?(0,a.jsxs)("div",{className:"space-y-6 p-4",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-orange-600 flex items-center gap-2",children:[(0,a.jsx)(q.A,{className:"h-6 w-6"})," Score Analysis Results"]}),(0,a.jsxs)(x,{children:[(0,a.jsx)(b,{children:(0,a.jsx)(v,{children:"Error"})}),(0,a.jsxs)(w,{children:[(0,a.jsx)("p",{children:p.message}),(0,a.jsx)(h.$,{className:"mt-4",onClick:()=>g(),children:"Retry"})]})]})]}):f||u||p?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("h2",{className:"text-xl sm:text-2xl font-bold text-orange-600 flex items-center gap-2 px-2 sm:px-0",children:[(0,a.jsx)(q.A,{className:"h-5 w-5 sm:h-6 sm:w-6"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Score Analysis Results"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Analysis Results"})]}),f||u&&!(null===(n=u.score)||void 0===n?void 0:n.processed)&&(null===(o=u.task_status)||void 0===o?void 0:o.state)==="PENDING"?(0,a.jsx)(et,{message:"Analyzing your music score with Audiveris...",className:"my-custom-classes"}):(0,a.jsxs)(M,{defaultValue:"results",className:"w-full",children:[(0,a.jsxs)(C,{className:"grid w-full grid-cols-3 text-xs sm:text-sm",children:[(0,a.jsxs)(z,{value:"results",className:"px-2 sm:px-4",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Analysis Results"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Results"})]}),(0,a.jsxs)(z,{value:"musicxml",className:"px-2 sm:px-4",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Sheet Music"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Music"})]}),(0,a.jsxs)(z,{value:"summary",className:"px-2 sm:px-4",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"AI Summary"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Summary"})]})]}),(0,a.jsx)(A,{value:"results",children:(0,a.jsxs)(x,{children:[(0,a.jsx)(b,{children:(0,a.jsx)("h1",{className:"text-2xl font-semibold",children:(null==u?void 0:null===(r=u.score)||void 0===r?void 0:r.title)||"No title"})}),(0,a.jsx)(w,{children:(null==u?void 0:null===(c=u.score)||void 0===c?void 0:c.results)?(0,a.jsx)(X,{results:u.score.results,musicXmlContent:_}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"text-gray-400 mb-2",children:(0,a.jsx)(q.A,{className:"h-12 w-12 mx-auto"})}),(0,a.jsx)("p",{className:"text-gray-500",children:"No analysis results available for this score."})]})})]})}),(0,a.jsx)(A,{value:"musicxml",children:(0,a.jsxs)(x,{children:[(0,a.jsxs)(b,{children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)(v,{className:"flex items-center gap-2",children:[(0,a.jsx)(P.A,{className:"h-5 w-5"}),"Sheet Music Viewer"]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[_&&(0,a.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>{if(!_)return;let e=new Blob([_],{type:"application/xml"}),t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download="score.musicxml",i.click(),URL.revokeObjectURL(t)},className:"flex items-center justify-center gap-1 text-xs sm:text-sm px-2 sm:px-3 py-1 sm:py-2 h-8 sm:h-9 w-full sm:w-auto",children:[(0,a.jsx)(G.A,{className:"h-3 w-3 sm:h-4 sm:w-4"}),(0,a.jsx)("span",{className:"hidden xs:inline",children:"Download"})," XML"]}),ee&&(0,a.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>{if(!ee)return;let e=new Blob([ee],{type:"audio/midi"}),t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download="score.mid",i.click(),URL.revokeObjectURL(t)},className:"flex items-center justify-center gap-1 text-xs sm:text-sm px-2 sm:px-3 py-1 sm:py-2 h-8 sm:h-9 w-full sm:w-auto",children:[(0,a.jsx)(G.A,{className:"h-3 w-3 sm:h-4 sm:w-4"}),(0,a.jsx)("span",{className:"hidden xs:inline",children:"Download"})," MIDI"]})]})]}),_&&(0,a.jsxs)("div",{className:"text-sm text-gray-500 mt-2",children:["Rendered from: ",(null==u?void 0:null===(l=u.score)||void 0===l?void 0:l.title)||"Untitled Score"]})]}),(0,a.jsx)(w,{children:_?(0,a.jsxs)("div",{className:"space-y-4",children:[eo&&(0,a.jsx)(F,{children:(0,a.jsxs)(E,{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-orange-500"}),"Loading MIDI file..."]})}),es&&(0,a.jsx)(F,{variant:"destructive",children:(0,a.jsx)(E,{children:"It was not possible to generate MIDI from the file you uploaded."})}),k&&(0,a.jsx)(F,{variant:"destructive",children:(0,a.jsx)(E,{children:"It was not possible to generate MusicXML from the file you uploaded."})}),k&&(0,a.jsx)(F,{className:"mb-4",children:(0,a.jsx)(E,{children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,a.jsx)("span",{className:"text-sm",children:"It was not possible to generate MusicXML from the file you uploaded."}),(0,a.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>{R(0),N(null),T(null),en(null),ea(null),g()},className:"self-start sm:self-auto",children:"Retry"})]})})}),y&&!k&&(0,a.jsx)(F,{children:(0,a.jsx)(E,{className:"text-green-700 text-sm",children:"Sheet music loaded successfully! You can scroll and zoom to explore the notation."})}),(0,a.jsx)(L,{musicXML:_,showLoadingSpinner:!0,onLoad:()=>{console.log("MusicXML loaded successfully in OSMD"),j(!0),N(null)},onError:e=>{console.error("OSMD Error:",e),N(e),j(!1)},className:"w-full h-full"}),(0,a.jsx)("div",{className:"flex justify-between items-center text-xs sm:text-sm text-gray-500 px-2",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Use mouse wheel to zoom, click and drag to pan"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Pinch to zoom, drag to pan"})]})})]}):(0,a.jsxs)("div",{className:"text-center py-8 sm:py-12",children:[(0,a.jsx)("div",{className:"text-gray-400 mb-4",children:(0,a.jsx)(P.A,{className:"h-12 w-12 sm:h-16 sm:w-16 mx-auto"})}),(0,a.jsx)("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-2",children:"No MusicXML Available"}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-gray-500 max-w-md mx-auto px-4",children:"The sheet music notation is not available for this score. This could happen if the analysis is still processing or if the original image couldn't be converted to MusicXML format."}),(null==u?void 0:u.score)&&!u.score.processed&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)(h.$,{variant:"outline",onClick:()=>g(),className:"flex items-center gap-2",size:"sm",children:[(0,a.jsx)(W.A,{className:"h-4 w-4"}),"Check Again"]})})]})})]})}),(0,a.jsx)(A,{value:"summary",children:(0,a.jsxs)(x,{children:[(0,a.jsx)(b,{children:(0,a.jsxs)(v,{className:"flex items-center gap-2",children:[(0,a.jsx)(U.A,{className:"h-5 w-5"}),"AI-Generated Musical Analysis"]})}),(0,a.jsxs)(w,{children:[Q&&(0,a.jsx)(F,{variant:"destructive",className:"mb-4",children:(0,a.jsx)(E,{children:Q})}),V?(0,a.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mr-3"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Generating AI summary..."})]}):D?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:[(0,a.jsx)("div",{className:"text-gray-800",children:H(D)}),(0,a.jsx)(O.Divider,{className:"my-4"}),(0,a.jsx)("div",{className:"text-gray-800",children:H(K||"")})]}),(0,a.jsx)("div",{className:"flex justify-end pt-2",children:(0,a.jsxs)(h.$,{onClick:ed,variant:"outline",size:"sm",disabled:V,className:"flex items-center gap-2 hover:bg-gray-50",children:[(0,a.jsx)(W.A,{className:"h-4 w-4"})," Regenerate Summary"]})})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center text-center py-12",children:[(0,a.jsx)("div",{className:"text-gray-400 mb-4",children:(0,a.jsx)(U.A,{className:"h-16 w-16 mx-auto opacity-50"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No AI Summary Yet"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:"Generate an AI-powered musical analysis and summary of this score to get insights about its style, structure, and characteristics."}),(0,a.jsxs)(h.$,{onClick:ed,className:"flex items-center gap-2 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700",disabled:V||!(null==u?void 0:null===(d=u.score)||void 0===d?void 0:d.id),children:[(0,a.jsx)(J.A,{className:"h-4 w-4"}),"Generate AI Summary"]})]})]})]})})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-orange-600 flex items-center gap-2",children:[(0,a.jsx)(q.A,{className:"h-6 w-6"})," Score Analysis Results"]}),(0,a.jsx)(x,{children:(0,a.jsx)(w,{className:"p-4 text-center",children:(0,a.jsx)("p",{className:"text-gray-500",children:"Upload or select a score to see analysis results."})})})]})}function es(){let[e,t]=(0,s.useState)(null),[i,n]=(0,s.useState)(null),[o,r]=(0,s.useState)(!1),[c,l]=(0,s.useState)(!1),d=()=>{l(!c)};return(0,a.jsx)("div",{className:"min-h-screen bg-orange-50 text-foreground font-main",children:(0,a.jsxs)("div",{className:"container mx-auto flex flex-col px-2 sm:px-6 lg:px-8",children:[(0,a.jsx)("header",{className:"mb-4 sm:mb-6 pt-4 sm:pt-6",children:(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-primary",children:"Get Score Insights"})}),(0,a.jsx)("section",{className:"mb-4 sm:mb-6",children:(0,a.jsxs)("div",{className:"relative",children:[c&&(0,a.jsx)("div",{className:"bg-white rounded-lg border-2 border-dashed border-gray-200 p-3 sm:p-4 mb-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,a.jsx)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 text-sm sm:text-base truncate",children:"Analyze another?"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 truncate",children:"Click to upload another file"})]})]}),(0,a.jsxs)("button",{onClick:d,className:"flex items-center justify-center gap-2 px-3 py-2 sm:px-4 sm:py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm sm:text-base font-medium whitespace-nowrap flex-shrink-0",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,a.jsx)("span",{className:"hidden xs:inline",children:"Upload Another"}),(0,a.jsx)("span",{className:"xs:hidden",children:"Upload"})]})]})}),!c&&(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g,{onUploadSuccess:(e,i)=>{t(e),n(i),r(!0),l(!0)},isProcessing:o}),e&&(0,a.jsx)("div",{className:"absolute top-2 right-2 sm:top-4 sm:right-4 z-10",children:(0,a.jsx)("button",{onClick:d,className:"bg-white bg-opacity-90 hover:bg-opacity-100 rounded-full p-1.5 sm:p-2 shadow-md transition-all touch-target",title:"Collapse upload area",children:(0,a.jsx)("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})})})]})]})}),(0,a.jsx)("section",{className:"grid grid-cols-1 gap-4 sm:gap-6 mb-6 sm:mb-8 w-full ".concat(o?"border-2 border-dashed":""),children:(0,a.jsx)(T,{scoreId:e,taskId:i,children:(0,a.jsx)(ea,{onProcessingChange:e=>{r(e)}})})})]})})}},59434:(e,t,i)=>{"use strict";i.d(t,{cn:()=>n});var a=i(52596),s=i(39688);function n(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,s.QP)((0,a.$)(t))}},85057:(e,t,i)=>{"use strict";i.d(t,{J:()=>l});var a=i(95155),s=i(12115),n=i(40968),o=i(74466),r=i(59434);let c=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=s.forwardRef((e,t)=>{let{className:i,...s}=e;return(0,a.jsx)(n.b,{ref:t,className:(0,r.cn)(c(),i),...s})});l.displayName=n.b.displayName},95272:(e,t,i)=>{Promise.resolve().then(i.bind(i,42104))}},e=>{var t=t=>e(e.s=t);e.O(0,[849,670,433,724,192,441,684,358],()=>t(95272)),_N_E=e.O()}]);