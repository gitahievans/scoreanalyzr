(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[485],{755:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var a=(0,s(86467).A)("outline","plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]])},6942:(e,t,s)=>{"use strict";s.d(t,{$e:()=>o});var a=s(74275);s(12115);let r=function(e){let t=e,s=!1,a=new Set;return{getState:()=>t,updateState(e){t="function"==typeof e?e(t):e},setState(e){this.updateState(e),a.forEach(e=>e(t))},initialize(e){s||(t=e,s=!0)},subscribe:e=>(a.add(e),()=>a.delete(e))}}({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5});function l(e,t){let s=e.getState(),a=function(e,t,s){let a=[],r=[],l={};for(let o of e){let e=o.position||t;l[e]=l[e]||0,l[e]+=1,l[e]<=s?r.push(o):a.push(o)}return{notifications:r,queue:a}}(t([...s.notifications,...s.queue]),s.defaultPosition,s.limit);e.setState({notifications:a.notifications,queue:a.queue,limit:s.limit,defaultPosition:s.defaultPosition})}let o={show:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,s=e.id||(0,a.randomId)();return l(t,t=>e.id&&t.some(t=>t.id===e.id)?t:[...t,{...e,id:s}]),s},hide:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return l(t,t=>t.filter(t=>{if(t.id===e){var s;return null===(s=t.onClose)||void 0===s||s.call(t,t),!1}return!0})),e},update:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return l(t,t=>t.map(t=>t.id===e.id?{...t,...e}:t)),e.id},clean:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;l(e,()=>[])},cleanQueue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;l(e,t=>t.slice(0,e.getState().limit))},updateState:l}},54395:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var a=(0,s(86467).A)("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]])},88411:(e,t,s)=>{"use strict";s.d(t,{default:()=>N});var a=s(95155),r=s(12115),l=s(86467),o=(0,l.A)("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]),n=(0,l.A)("outline","download","IconDownload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 11l5 5l5 -5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]),i=s(11681),c=s(63617),d=(0,l.A)("outline","edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]),g=s(54395),u=(0,l.A)("outline","calendar","IconCalendar",[["path",{d:"M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z",key:"svg-0"}],["path",{d:"M16 3v4",key:"svg-1"}],["path",{d:"M8 3v4",key:"svg-2"}],["path",{d:"M4 11h16",key:"svg-3"}],["path",{d:"M11 15h1",key:"svg-4"}],["path",{d:"M12 15v3",key:"svg-5"}]]),x=(0,l.A)("outline","music","IconMusic",[["path",{d:"M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-0"}],["path",{d:"M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}],["path",{d:"M9 17v-13h10v13",key:"svg-2"}],["path",{d:"M9 8h10",key:"svg-3"}]]),m=s(755),p=(0,l.A)("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]),h=s(6942);let f=e=>{let{pdf:t,isEditing:s,setIsEditing:l}=e,[o,n]=(0,r.useState)([]),[i,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(!1),[x,f]=(0,r.useState)(null),[v,y]=(0,r.useState)({title:t.title,composer:t.composer,year:t.year,lyrics:t.lyrics,categories:t.categories.map(e=>e.name)});(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat("https://api.notadb.xyz:8443","/api/categories/"));if(!e.ok)throw Error("Failed to fetch categories");let t=await e.json();console.log("data",t),n(t)}catch(e){console.error("Error fetching categories:",e)}})()},[]);let j=async e=>{e.preventDefault();try{let e=await fetch("".concat("https://api.notadb.xyz:8443","/api/update/").concat(t.id,"/"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...v,categories:v.categories.map(e=>({name:e}))})});if(!e.ok)throw Error("Failed to update PDF");await e.json(),console.log("res",e),h.$e.show({title:"Success",message:"Music Score updated successfully",color:"green",position:"top-center"}),l(!1)}catch(e){console.error("Error updating PDF:",e)}},b=e=>t=>{y(s=>({...s,[e]:t}))},N=e=>{y(t=>{let s=t.categories.includes(e)?t.categories.filter(t=>t!==e):[...t.categories,e];return console.log("updatedCategories",s),{title:t.title,composer:t.composer,year:t.year,lyrics:t.lyrics,categories:s}})},w=Array.from({length:new Date().getFullYear()-1900+1},(e,t)=>1900+t).reverse();return(0,a.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Title"}),(0,a.jsx)("input",{type:"text",name:"composer",value:v.title,onChange:e=>b("title")(e.target.value),placeholder:"Composer",className:"w-full p-3 border rounded-md border-orange-200 focus:border-orange-500 focus:ring-2 focus:ring-orange-500 focus:outline-none"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Composer"}),(0,a.jsx)("input",{type:"text",name:"composer",value:v.composer,onChange:e=>b("composer")(e.target.value),placeholder:"Composer",className:"w-full p-3 border rounded-md border-orange-200 focus:border-orange-500 focus:ring-2 focus:ring-orange-500 focus:outline-none"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Year"}),(0,a.jsxs)("select",{name:"year",value:v.year||"",onChange:e=>b("year")(e.target.value),className:"w-full p-3 bg-white border rounded-md border-orange-200 focus:border-orange-500 focus:ring-2 focus:ring-orange-500 focus:outline-none",children:[(0,a.jsx)("option",{value:"",children:"Select Year"}),w.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Lyrics"}),(0,a.jsx)("textarea",{name:"lyrics",value:v.lyrics,onChange:e=>b("lyrics")(e.target.value),placeholder:"Lyrics",className:"w-full p-3 border rounded-md border-orange-200 focus:border-orange-500 focus:ring-2 focus:ring-orange-500 focus:outline-none"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Song Category"}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"Choose from exixting categories"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:o.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>N(e.name),className:"px-3 py-1 rounded-full text-sm \n                          ".concat(v.categories.includes(e.name)?"bg-orange-500 text-white":"bg-orange-100 text-orange-700","\n                          hover:bg-orange-400 hover:text-white transition-colors"),children:e.name},e.id))})]}),d?(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:i,onChange:e=>c(e.target.value),placeholder:"Enter new category",className:"flex-1 p-2 border rounded-md border-orange-200 focus:border-orange-500 focus:ring-2 focus:ring-orange-500 focus:outline-none"}),(0,a.jsx)("button",{type:"button",onClick:()=>{i.trim()&&(y(e=>({...e,categories:[...e.categories,i.trim()]})),c(""),u(!1))},className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600",children:"Add"})]}):(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"Add a New Category for the Song"}),(0,a.jsxs)("button",{type:"button",onClick:()=>u(!0),className:"flex items-center gap-2 text-orange-600 hover:text-orange-700",children:[(0,a.jsx)(m.A,{size:16}),(0,a.jsx)("span",{children:"Add New Category"})]})]}),v.categories.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Selected categories:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:v.categories.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm",children:[e,(0,a.jsx)("button",{type:"button",onClick:()=>N(e),className:"text-orange-500 hover:text-orange-700",children:(0,a.jsx)(g.A,{size:14})})]},e))})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),(0,a.jsxs)("button",{type:"submit",className:"flex items-center gap-2 px-4 py-2 bg-orange-100    text-orange-600 font-medium rounded-lg hover:bg-orange-200   active:scale-95 transition-all duration-300",children:[(0,a.jsx)(p,{size:18}),"Save Changes"]})]})]})};var v=s(69445);let y=e=>{let{pdf:t,opened:s,close:l,onClickDownload:i}=e,[m,p]=r.useState(!1),h=(0,v.useMediaQuery)("(max-width: 768px)");return(0,a.jsx)(c.Modal,{opened:s,onClose:l,size:"lg",padding:h?"xs":"xl",centered:!0,withCloseButton:!1,children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex gap-2 justify-between w-full items-center ",children:[(0,a.jsx)("h2",{className:"sm:text-lg md:text-2xl font-bold text-gray-900",children:t.title.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[!m&&(0,a.jsx)("button",{onClick:()=>p(!0),className:"rounded-full p-2 hover:bg-orange-100 hover:scale-105 transition-all duration-300 ease-in-out",children:(0,a.jsx)(d,{size:20,className:"text-orange-500"})}),(0,a.jsx)("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,a.jsx)(g.A,{size:20,className:"text-gray-500 hover:scale-105 transition-all duration-300 ease-in-out"})})]})]}),(0,a.jsx)("div",{className:"space-y-6 pt-2",children:m?(0,a.jsx)(f,{pdf:t,isEditing:m,setIsEditing:p}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex md:items-center flex-col md:flex-row md:flex-wrap gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("div",{className:"p-1.5 bg-orange-100 rounded-full",children:(0,a.jsx)(o,{size:12,className:"text-orange-600"})}),(0,a.jsx)("p",{className:"text-sm",children:"Composer: "})]}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:t.composer})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("div",{className:"p-1.5 bg-orange-100 rounded-full",children:(0,a.jsx)(u,{size:12,className:"text-orange-600"})}),(0,a.jsx)("p",{className:"text-sm",children:"Year Composed: "})]}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:t.year||"No date available"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("div",{className:"p-1.5 bg-orange-100 rounded-full",children:(0,a.jsx)(x,{size:12,className:"text-orange-600"})}),(0,a.jsx)("p",{className:"text-sm",children:"Categories: "})]}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:t.categories.length>0?t.categories.map(e=>e.name).join(", "):"No categories available"})]})]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"bg-orange-50 p-6 rounded-xl",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Lyrics"}),(0,a.jsx)("p",{className:"text-gray-600 leading-relaxed whitespace-pre-line",children:t.lyrics})]})}),(0,a.jsx)("div",{className:"flex justify-end pt-4",children:(0,a.jsxs)("button",{onClick:i,className:"flex items-center space-x-2 px-4 py-2 bg-orange-100    text-orange-600 font-medium rounded-lg hover:bg-orange-200    active:scale-95 transition-all duration-300",children:[(0,a.jsx)(n,{size:18}),(0,a.jsx)("span",{children:"Download PDF"})]})})]})})]})})},j=e=>{let{pdf:t}=e,[s,l]=(0,r.useState)(!1),[c,{open:d,close:g}]=(0,i.useDisclosure)(!1),u=async e=>{e.stopPropagation();try{let e=await fetch("".concat("https://api.notadb.xyz:8443","/api/download/").concat(t.id,"/download")),s=await e.blob(),a=window.URL.createObjectURL(s),r=document.createElement("a");r.href=a,r.download="".concat(null==t?void 0:t.title,".pdf"),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(a),document.body.removeChild(r)}catch(e){console.error("Error downloading PDF:",e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"".concat(s?"max-h-none":"max-h-44"," cursor-pointer w-full max-w-md bg-gradient-to-br from-orange-100 to-orange-50  \n                border border-orange-200 rounded-xl p-6\n                shadow-md hover:shadow-xl transform hover:-translate-y-1\n                transition-all duration-300 ease-in-out"),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onClick:e=>{e.target.closest("button")||d()},children:[(()=>{let e=new Date(t.uploaded_at);return(new Date().getTime()-e.getTime())/36e5<=12})()&&(0,a.jsx)("div",{className:"absolute -top-2 -left-2 bg-orange-500 text-white px-2 py-1 rounded-lg text-xs font-semibold shadow-md",children:"New"}),(0,a.jsxs)("div",{className:"h-full flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900   tracking-tight leading-tight hover:text-orange-600   transition-colors",children:t.title.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"p-1.5 bg-orange-100 rounded-full",children:(0,a.jsx)(o,{size:14,className:"text-orange-600"})}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:t.composer})]})]}),(0,a.jsx)("button",{onClick:u,className:"p-2.5 bg-white border-2 border-orange-500   rounded-lg hover:bg-orange-200   active:scale-95 transition-all duration-300",title:"Download PDF",children:(0,a.jsx)(n,{size:18,className:"text-orange-600"})})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed transition-all duration-300 cursor-text ".concat(s?"":"line-clamp-2"),children:t.lyrics})]})]}),(0,a.jsx)(y,{opened:c,close:g,pdf:t,onClickDownload:()=>u({stopPropagation:()=>{}})})]})};var b=(0,l.A)("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);let N=()=>{let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[o,n]=(0,r.useState)(null),[i,c]=(0,r.useState)(""),[d,g]=(0,r.useState)([]),[u,x]=(0,r.useState)("title-asc"),m=(0,v.useMediaQuery)("(max-width: 768px)");return((0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat("https://api.notadb.xyz:8443","/api/files/"));if(!e.ok)throw Error("Failed to fetch files");let s=await e.json();t(s.filter(e=>!e.processed&&"Anonymous"!==e.composer)),g(s.filter(e=>!e.processed&&"Anonymous"!==e.composer)),l(!1)}catch(e){console.error("Error fetching PDFs:",e),n(e.message),l(!1)}})()},[]),console.log("files",e),console.log("filteredFiles",d),(0,r.useEffect)(()=>{let t=setTimeout(()=>{e.length>0&&g(e.filter(e=>e.title.toLowerCase().includes(i.toLowerCase())||e.lyrics&&e.lyrics.toLowerCase().includes(i.toLowerCase())))},300);return()=>clearTimeout(t)},[i,e]),s)?(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-orange-500"})}):o?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen px-4",children:[(0,a.jsx)("div",{className:"text-red-500 text-xl mb-4",children:"Error loading PDFs"}),(0,a.jsx)("p",{className:"text-gray-600",children:o})]}):(0,a.jsxs)("div",{className:"container mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(b,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:m?16:20}),(0,a.jsx)("input",{type:"text",value:i,onChange:t=>{let s=t.currentTarget.value.toLowerCase();c(s),g(e.filter(e=>e.title.toLowerCase().includes(s)||e.lyrics&&e.lyrics.toLowerCase().includes(s)))},placeholder:"Search Scores...",className:"placeholder:text-gray-400 placeholder:text-xs pl-10 py-1.5 md:py-2 bg-orange-50 rounded-lg w-full border border-orange-200 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,a.jsxs)("select",{value:u,onChange:e=>{let t=e.target.value;x(t),g([...d].sort((e,s)=>{switch(t){case"title-asc":return e.title.localeCompare(s.title);case"title-desc":return s.title.localeCompare(e.title);case"date-asc":return new Date(e.uploaded_at).getTime()-new Date(s.uploaded_at).getTime();case"date-desc":return new Date(s.uploaded_at).getTime()-new Date(e.uploaded_at).getTime();default:return 0}}))},className:"py-2 px-4 bg-orange-50 rounded-lg text-sm border border-orange-200 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent cursor-pointer",children:[(0,a.jsx)("option",{value:"title-asc",children:"Title (A-Z)"}),(0,a.jsx)("option",{value:"title-desc",children:"Title (Z-A)"}),(0,a.jsx)("option",{value:"date-asc",children:"Date (Oldest)"}),(0,a.jsx)("option",{value:"date-desc",children:"Date (Newest)"})]})]}),0===d.length&&i&&(0,a.jsx)("p",{className:"text-gray-500 mt-4",children:"No PDFs found matching your search."})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(e=>(0,a.jsx)(j,{pdf:e},e.id))})]})}},93158:(e,t,s)=>{Promise.resolve().then(s.bind(s,88411))}},e=>{var t=t=>e(e.s=t);e.O(0,[545,886,382,441,684,358],()=>t(93158)),_N_E=e.O()}]);