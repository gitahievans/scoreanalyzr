(()=>{var e={};e.id=994,e.ids=[994],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3503:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=t(65239),a=t(48088),n=t(88170),o=t.n(n),i=t(30893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(r,l);let d={children:["",{children:["upload",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,42334)),"C:\\Users\\gitahi\\Development\\notalyzr-\\src\\app\\upload\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"C:\\Users\\gitahi\\Development\\notalyzr-\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\gitahi\\Development\\notalyzr-\\src\\app\\upload\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/upload/page",pathname:"/upload",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4780:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n});var s=t(49384),a=t(82348);function n(...e){return(0,a.QP)((0,s.$)(e))}},5212:(e,r,t)=>{Promise.resolve().then(t.bind(t,78859))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11285:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});var s=(0,t(6445).A)("outline","plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29523:(e,r,t)=>{"use strict";t.d(r,{$:()=>d});var s=t(60687),a=t(43210),n=t(8730),o=t(24224),i=t(4780);let l=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(({className:e,variant:r,size:t,asChild:a=!1,...o},d)=>{let c=a?n.DX:"button";return(0,s.jsx)(c,{className:(0,i.cn)(l({variant:r,size:t,className:e})),ref:d,...o})});d.displayName="Button"},33873:e=>{"use strict";e.exports=require("path")},42334:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});var s=t(37413),a=t(47857);t(61120);let n=()=>(0,s.jsx)("div",{children:(0,s.jsx)(a.default,{})})},47068:(e,r,t)=>{Promise.resolve().then(t.bind(t,47857))},47857:(e,r,t)=>{"use strict";t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\gitahi\\\\Development\\\\notalyzr-\\\\src\\\\components\\\\Upload.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\gitahi\\Development\\notalyzr-\\src\\components\\Upload.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70440:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});var s=t(31658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},78859:(e,r,t)=>{"use strict";t.d(r,{default:()=>v});var s=t(60687),a=t(43210),n=t(54050),o=t(47874),i=t(3386),l=t(58843),d=t(79138),c=t(11285),u=t(65773),p=t(88767),m=t(4780);let g=a.forwardRef(({className:e,type:r,...t},a)=>(0,s.jsx)("input",{type:r,className:(0,m.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...t}));g.displayName="Input";var f=t(29523),x=t(80013);let h=async e=>{let r=new FormData;r.append("title",e.title),r.append("composer",e.composer||"Anonymous"),r.append("lyrics",e.lyrics),e.file&&r.append("pdf_file",e.file),e.year&&r.append("year",e.year.toString()),r.append("categories",JSON.stringify(e.categories.map(e=>({name:e})))),r.append("analyze","false");let t=await fetch("http://127.0.0.1:8000/api/upload/",{method:"POST",body:r});if(!t.ok)throw Error((await t.json()).message||"Failed to upload file");return t.json()};function v(){let[e,r]=(0,a.useState)([]),[t,m]=(0,a.useState)([]),[v,b]=(0,a.useState)(""),[y,j]=(0,a.useState)(!1),[w,N]=(0,a.useState)({title:"",composer:"",lyrics:"",file:null,categories:[],year:null}),C=(0,u.useRouter)(),{mutate:k,isPending:A,error:P}=(0,n.n)({mutationFn:h,onSuccess:e=>{o.$e.show({title:"Success",message:e.message||"File uploaded successfully",color:"green",icon:(0,s.jsx)(i.A,{}),position:"top-center"}),N({title:"",composer:"",lyrics:"",file:null,categories:[],year:null}),r([]),C.push("/notadb")},onError:e=>{o.$e.show({title:"Error",message:e.message,color:"red",icon:(0,s.jsx)(l.A,{}),position:"top-center"})}}),z=e=>{let{name:r,value:t}=e.target;N(e=>({...e,[r]:"year"===r?t?Number(t):null:t}))},_=e=>{let t=e.filter(e=>"application/pdf"===e.type);if(t.length!==e.length){o.$e.show({title:"Error",message:"Only PDF files can be uploaded.",color:"red",icon:(0,s.jsx)(l.A,{})});return}r([t[0]]),N(e=>({...e,file:t[0]}))},S=e=>{N(r=>{let t=r.categories.includes(e)?r.categories.filter(r=>r!==e):[...r.categories,e];return{...r,categories:t}})},D=Array.from({length:new Date().getFullYear()-1900+1},(e,r)=>1900+r);return(0,s.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-orange-600 mb-2",children:"Upload New Music Score"}),(0,s.jsx)("h4",{className:"text-gray-600",children:"Share your musical masterpiece with the world!"})]}),(0,s.jsx)("form",{onSubmit:e=>{e.preventDefault(),w.file&&w.title.trim()&&k(w)},className:"space-y-6",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.J,{htmlFor:"title",children:"Title"}),(0,s.jsx)(g,{name:"title",value:w.title,onChange:z,placeholder:"Title",required:!0}),(0,s.jsx)(x.J,{htmlFor:"composer",children:"Composer"}),(0,s.jsx)(g,{name:"composer",value:w.composer,onChange:z,placeholder:"Composer"}),(0,s.jsx)(x.J,{htmlFor:"year",children:"Year Composed"}),(0,s.jsxs)("select",{name:"year",value:w.year?.toString()||"",onChange:z,className:"w-full p-3 bg-white border rounded-md border-orange-200 focus:border-orange-500 focus:ring-2 focus:ring-orange-500 focus:outline-none",children:[(0,s.jsx)("option",{value:"",children:"Select Year"}),D.reverse().map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsx)(x.J,{htmlFor:"lyrics",children:"Lyrics"}),(0,s.jsx)("textarea",{name:"lyrics",value:w.lyrics,onChange:z,placeholder:"Lyrics?",rows:3,className:"w-full p-3 border rounded-md border-orange-200 focus:border-orange-500 focus:ring-2 focus:ring-orange-500 focus:outline-none"}),(0,s.jsx)("div",{className:`border-2 border-dashed rounded-lg p-6 cursor-pointer
              ${e.length?"border-orange-500 bg-orange-50":"border-gray-300"}
              ${P?"border-red-500 bg-red-50":""}
              hover:border-orange-500 transition-colors`,onDrop:e=>{e.preventDefault(),_(Array.from(e.dataTransfer.files))},onDragOver:e=>e.preventDefault(),onClick:()=>{let e=document.createElement("input");e.type="file",e.accept="application/pdf",e.onchange=e=>{let r=e.target;r.files&&_(Array.from(r.files))},e.click()},children:(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[e.length?(0,s.jsx)(d.A,{size:52,className:"text-orange-500"}):(0,s.jsx)(i.A,{size:52,className:"text-gray-400"}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-xl",children:e.length?`${e.length} file selected`:"Drag a PDF file here or click to select"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Maximum file size: 5MB"})]})]})}),e.length>0&&(0,s.jsx)("div",{className:"space-y-2",children:e.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-md",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:e.name}),(0,s.jsx)(f.$,{variant:"ghost",size:"sm",onClick:()=>{r([]),N(e=>({...e,file:null}))},children:(0,s.jsx)(l.A,{size:20})})]},t))}),(0,s.jsx)(x.J,{children:"Categories"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:t.map(e=>(0,s.jsx)(f.$,{type:"button",variant:w.categories.includes(e.name)?"default":"outline",onClick:()=>S(e.name),children:e.name},e.id))}),y?(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(g,{value:v,onChange:e=>b(e.target.value),placeholder:"Enter new category"}),(0,s.jsx)(f.$,{type:"button",onClick:()=>{v.trim()&&(N(e=>({...e,categories:[...e.categories,v.trim()]})),b(""),j(!1))},children:"Add"})]}):(0,s.jsxs)(f.$,{type:"button",variant:"link",onClick:()=>j(!0),className:"flex items-center gap-2 text-orange-600",children:[(0,s.jsx)(c.A,{size:16})," Add New Category"]}),w.categories.length>0&&(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Selected categories:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:w.categories.map(e=>(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm",children:[e,(0,s.jsx)(f.$,{variant:"ghost",size:"sm",onClick:()=>S(e),children:(0,s.jsx)(l.A,{size:14})})]},e))})]}),P&&(0,s.jsx)(p.Alert,{color:"red",title:"Error",children:P}),(0,s.jsx)(f.$,{type:"submit",disabled:A||!w.file||!w.title.trim(),className:"w-full",children:A?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white mr-2"}),"Uploading..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.A,{size:20,className:"mr-2"})," Upload"]})})]})})]})}},79551:e=>{"use strict";e.exports=require("url")},80013:(e,r,t)=>{"use strict";t.d(r,{J:()=>d});var s=t(60687),a=t(43210),n=t(78148),o=t(24224),i=t(4780);let l=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)(n.b,{ref:t,className:(0,i.cn)(l(),e),...r}));d.displayName=n.b.displayName}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[719,111,581,255,493],()=>t(3503));module.exports=s})();